<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
                0.9 Changelog
             &mdash;
    SQLAlchemy 0.9 Documentation

        </title>

        
            <!-- begin iterate through SQLA + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
            <!-- end iterate through SQLA + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '0.9.7',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 0.9 Documentation" href="../index.html" />
        <link rel="up" title="Changes and Migration" href="index.html" />
        <link rel="next" title="0.8 Changelog" href="changelog_08.html" />
        <link rel="prev" title="What&#8217;s New in SQLAlchemy 0.9?" href="migration_09.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        












<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">0.9.7</span> | Release Date: July 22, 2014
    </div>

    <h1>SQLAlchemy 0.9 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 0.9 Documentation</a></h3>

            <p id="sidebar-paginate">
                    <a href="index.html" title="Changes and Migration">Up</a> |

                    <a href="migration_09.html" title="What&#8217;s New in SQLAlchemy 0.9?">Prev</a> |
                    <a href="changelog_08.html" title="0.8 Changelog">Next</a>
            </p>

            <p id="sidebar-topnav">
                <a href="../index.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <input type="text" name="q" size="12" /> <input type="submit" value="Search" />
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <h3><a href="#">            
                0.9 Changelog
            
        </a></h3>
        <ul>
<li><a class="reference internal" href="#">0.9 Changelog</a><ul>
<li><a class="reference internal" href="#change-0.9.7">0.9.7</a><ul>
<li><a class="reference internal" href="#change-0.9.7-orm">orm</a></li>
<li><a class="reference internal" href="#change-0.9.7-engine">engine</a></li>
<li><a class="reference internal" href="#change-0.9.7-sql">sql</a></li>
<li><a class="reference internal" href="#change-0.9.7-postgresql">postgresql</a></li>
<li><a class="reference internal" href="#change-0.9.7-mysql">mysql</a></li>
<li><a class="reference internal" href="#change-0.9.7-sqlite">sqlite</a></li>
<li><a class="reference internal" href="#change-0.9.7-mssql">mssql</a></li>
<li><a class="reference internal" href="#change-0.9.7-oracle">oracle</a></li>
<li><a class="reference internal" href="#change-0.9.7-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.6">0.9.6</a><ul>
<li><a class="reference internal" href="#change-0.9.6-orm">orm</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.5">0.9.5</a><ul>
<li><a class="reference internal" href="#change-0.9.5-orm">orm</a></li>
<li><a class="reference internal" href="#change-0.9.5-engine">engine</a></li>
<li><a class="reference internal" href="#change-0.9.5-sql">sql</a></li>
<li><a class="reference internal" href="#change-0.9.5-postgresql">postgresql</a></li>
<li><a class="reference internal" href="#change-0.9.5-mysql">mysql</a></li>
<li><a class="reference internal" href="#change-0.9.5-mssql">mssql</a></li>
<li><a class="reference internal" href="#change-0.9.5-firebird">firebird</a></li>
<li><a class="reference internal" href="#change-0.9.5-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.4">0.9.4</a><ul>
<li><a class="reference internal" href="#change-0.9.4-general">general</a></li>
<li><a class="reference internal" href="#change-0.9.4-orm">orm</a></li>
<li><a class="reference internal" href="#change-0.9.4-engine">engine</a></li>
<li><a class="reference internal" href="#change-0.9.4-sql">sql</a></li>
<li><a class="reference internal" href="#change-0.9.4-postgresql">postgresql</a></li>
<li><a class="reference internal" href="#change-0.9.4-mysql">mysql</a></li>
<li><a class="reference internal" href="#change-0.9.4-oracle">oracle</a></li>
<li><a class="reference internal" href="#change-0.9.4-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.3">0.9.3</a><ul>
<li><a class="reference internal" href="#change-0.9.3-orm">orm</a></li>
<li><a class="reference internal" href="#change-0.9.3-orm-declarative">orm declarative</a></li>
<li><a class="reference internal" href="#change-0.9.3-engine">engine</a></li>
<li><a class="reference internal" href="#change-0.9.3-sql">sql</a></li>
<li><a class="reference internal" href="#change-0.9.3-postgresql">postgresql</a></li>
<li><a class="reference internal" href="#change-0.9.3-mysql">mysql</a></li>
<li><a class="reference internal" href="#change-0.9.3-sqlite">sqlite</a></li>
<li><a class="reference internal" href="#change-0.9.3-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.2">0.9.2</a><ul>
<li><a class="reference internal" href="#change-0.9.2-orm">orm</a></li>
<li><a class="reference internal" href="#change-0.9.2-engine">engine</a></li>
<li><a class="reference internal" href="#change-0.9.2-sql">sql</a></li>
<li><a class="reference internal" href="#change-0.9.2-schema">schema</a></li>
<li><a class="reference internal" href="#change-0.9.2-postgresql">postgresql</a></li>
<li><a class="reference internal" href="#change-0.9.2-mysql">mysql</a></li>
<li><a class="reference internal" href="#change-0.9.2-sqlite">sqlite</a></li>
<li><a class="reference internal" href="#change-0.9.2-mssql">mssql</a></li>
<li><a class="reference internal" href="#change-0.9.2-oracle">oracle</a></li>
<li><a class="reference internal" href="#change-0.9.2-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.1">0.9.1</a><ul>
<li><a class="reference internal" href="#change-0.9.1-orm">orm</a></li>
<li><a class="reference internal" href="#change-0.9.1-orm-declarative">orm declarative</a></li>
<li><a class="reference internal" href="#change-0.9.1-sql">sql</a></li>
<li><a class="reference internal" href="#change-0.9.1-schema">schema</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.0">0.9.0</a><ul>
<li><a class="reference internal" href="#change-0.9.0-orm">orm</a></li>
<li><a class="reference internal" href="#change-0.9.0-orm-declarative">orm declarative</a></li>
<li><a class="reference internal" href="#change-0.9.0-engine">engine</a></li>
<li><a class="reference internal" href="#change-0.9.0-sql">sql</a></li>
<li><a class="reference internal" href="#change-0.9.0-schema">schema</a></li>
<li><a class="reference internal" href="#change-0.9.0-postgresql">postgresql</a></li>
<li><a class="reference internal" href="#change-0.9.0-mysql">mysql</a></li>
<li><a class="reference internal" href="#change-0.9.0-mssql">mssql</a></li>
<li><a class="reference internal" href="#change-0.9.0-oracle">oracle</a></li>
<li><a class="reference internal" href="#change-0.9.0-firebird">firebird</a></li>
<li><a class="reference internal" href="#change-0.9.0-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.0b1">0.9.0b1</a><ul>
<li><a class="reference internal" href="#change-0.9.0b1-general">general</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-orm">orm</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-orm-declarative">orm declarative</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-engine">engine</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-sql">sql</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-postgresql">postgresql</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-mysql">mysql</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-sqlite">sqlite</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-mssql">mssql</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-oracle">oracle</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-firebird">firebird</a></li>
<li><a class="reference internal" href="#change-0.9.0b1-misc">misc</a></li>
</ul>
</li>
</ul>
</li>
</ul>




        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<div class="section" id="changelog">
<h1>0.9 Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="change-0.9.7">
<h2>0.9.7<a class="headerlink" href="#change-0.9.7" title="Permalink to this headline">¶</a></h2>
Released: July 22, 2014<div class="section" id="change-0.9.7-orm">
<h3>orm<a class="headerlink" href="#change-0.9.7-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-0"><span class="target" id="change-6d4965c4def4ed6fe2cd5b1dc72055a2"><strong>[orm] [bug] [eagerloading] </strong></span>Fixed a regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2976">#2976</a> released in 0.9.4 where
the &#8220;outer join&#8221; propagation along a chain of joined eager loads
would incorrectly convert an &#8220;inner join&#8221; along a sibling join path
into an outer join as well, when only descendant paths should be
receiving the &#8220;outer join&#8221; propagation; additionally, fixed related
issue where &#8220;nested&#8221; join propagation would take place inappropriately
between two sibling join paths.<a class="changeset-link headerlink reference internal" href="#change-6d4965c4def4ed6fe2cd5b1dc72055a2">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3131">#3131</a></p>
</p>
</li>
<li><p id="change-0.9.7-1"><span class="target" id="change-61d46ddadd1243c644e4afbb5051ce5d"><strong>[orm] [bug] </strong></span>Fixed a regression from 0.9.0 due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">#2736</a> where the
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><tt class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></tt></a> method no longer set up the &#8220;from
entity&#8221; of the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object correctly, so that
subsequent <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.filter_by" title="sqlalchemy.orm.query.Query.filter_by"><tt class="xref py py-meth docutils literal"><span class="pre">Query.filter_by()</span></tt></a> or <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><tt class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></tt></a>
calls would fail to check the appropriate &#8220;from&#8221; entity when
searching for attributes by string name.<a class="changeset-link headerlink reference internal" href="#change-61d46ddadd1243c644e4afbb5051ce5d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">#2736</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3083">#3083</a></p>
</p>
</li>
<li><p id="change-0.9.7-2"><span class="target" id="change-17595fda8a28b7efa39aadde5ec47d98"><strong>[orm] [bug] </strong></span>The &#8220;evaulator&#8221; for query.update()/delete() won&#8217;t work with multi-table
updates, and needs to be set to <cite>synchronize_session=False</cite> or
<cite>synchronize_session=&#8217;fetch&#8217;</cite>; a warning is now emitted.  In
1.0 this will be promoted to a full exception.<a class="changeset-link headerlink reference internal" href="#change-17595fda8a28b7efa39aadde5ec47d98">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3117">#3117</a></p>
</p>
</li>
<li><p id="change-0.9.7-3"><span class="target" id="change-0f516bc305a847469d43e0869d992cdd"><strong>[orm] [bug] </strong></span>Fixed bug where items that were persisted, deleted, or had a
primary key change within a savepoint block would not
participate in being restored to their former state (not in
session, in session, previous PK) after the outer transaction
were rolled back.<a class="changeset-link headerlink reference internal" href="#change-0f516bc305a847469d43e0869d992cdd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3108">#3108</a></p>
</p>
</li>
<li><p id="change-0.9.7-4"><span class="target" id="change-94424863efab08f99293f7724de969bf"><strong>[orm] [bug] </strong></span>Fixed bug in subquery eager loading in conjunction with
<a class="reference internal" href="../orm/inheritance.html#sqlalchemy.orm.with_polymorphic" title="sqlalchemy.orm.with_polymorphic"><tt class="xref py py-func docutils literal"><span class="pre">with_polymorphic()</span></tt></a>, the targeting of entities and columns
in the subquery load has been made more accurate with respect
to this type of entity and others.<a class="changeset-link headerlink reference internal" href="#change-94424863efab08f99293f7724de969bf">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3106">#3106</a></p>
</p>
</li>
<li><p id="change-0.9.7-5"><span class="target" id="change-cfc1f15148c259394c9b3b373392bc15"><strong>[orm] [bug] </strong></span>Fixed bug involving dynamic attributes, that was again a regression
of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a> from version 0.9.5.  A self-referential relationship
with lazy=&#8217;dynamic&#8217; would raise a TypeError within a flush operation.<a class="changeset-link headerlink reference internal" href="#change-cfc1f15148c259394c9b3b373392bc15">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3099">#3099</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-engine">
<h3>engine<a class="headerlink" href="#change-0.9.7-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-6"><span class="target" id="change-4062d0afa2a67360ac9e7c97c79f35d4"><strong>[engine] [feature] </strong></span>Added new event <a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><tt class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.handle_error()</span></tt></a>, a more
fully featured and comprehensive replacement for
<a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.dbapi_error" title="sqlalchemy.events.ConnectionEvents.dbapi_error"><tt class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.dbapi_error()</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-4062d0afa2a67360ac9e7c97c79f35d4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3076">#3076</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-sql">
<h3>sql<a class="headerlink" href="#change-0.9.7-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-7"><span class="target" id="change-08a78793c26fd10b053486a483ebad9f"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="../core/types.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><tt class="xref py py-class docutils literal"><span class="pre">Enum</span></tt></a> and other <a class="reference internal" href="../core/types.html#sqlalchemy.types.SchemaType" title="sqlalchemy.types.SchemaType"><tt class="xref py py-class docutils literal"><span class="pre">SchemaType</span></tt></a>
subclasses where direct association of the type with a
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt></a> would lead to a hang when events
(like create events) were emitted on the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-08a78793c26fd10b053486a483ebad9f">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3124">#3124</a></p>
</p>
</li>
<li><p id="change-0.9.7-8"><span class="target" id="change-be5c6a13348bdb50ab072eded4f844b3"><strong>[sql] [bug] </strong></span>Fixed a bug within the custom operator plus <a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><tt class="xref py py-meth docutils literal"><span class="pre">TypeEngine.with_variant()</span></tt></a>
system, whereby using a <a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><tt class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></tt></a> in conjunction with
variant would fail with an MRO error when a comparison operator was used.<a class="changeset-link headerlink reference internal" href="#change-be5c6a13348bdb50ab072eded4f844b3">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3102">#3102</a></p>
</p>
</li>
<li><p id="change-0.9.7-9"><span class="target" id="change-346b9ff8fbd8e4eac954bf271b4c6ad6"><strong>[sql] [bug] </strong></span>Fix bug in naming convention feature where using a check
constraint convention that includes <tt class="docutils literal"><span class="pre">constraint_name</span></tt> would
then force all <a class="reference internal" href="../core/types.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><tt class="xref py py-class docutils literal"><span class="pre">Boolean</span></tt></a> and <a class="reference internal" href="../core/types.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><tt class="xref py py-class docutils literal"><span class="pre">Enum</span></tt></a> types to
require names as well, as these implicitly create a
constraint, even if the ultimate target backend were one that does
not require generation of the constraint such as Postgresql.
The mechanics of naming conventions for these particular
constraints has been reorganized such that the naming
determination is done at DDL compile time, rather than at
constraint/table construction time.<a class="changeset-link headerlink reference internal" href="#change-346b9ff8fbd8e4eac954bf271b4c6ad6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">#3067</a></p>
</p>
</li>
<li><p id="change-0.9.7-10"><span class="target" id="change-b79d7dd3f1ca1273c1284f2b2e8c296d"><strong>[sql] [bug] </strong></span>Fixed bug in common table expressions whereby positional bound
parameters could be expressed in the wrong final order
when CTEs were nested in certain ways.<a class="changeset-link headerlink reference internal" href="#change-b79d7dd3f1ca1273c1284f2b2e8c296d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3090">#3090</a></p>
</p>
</li>
<li><p id="change-0.9.7-11"><span class="target" id="change-9f3a810c852f582cfa2eef2e268ec4ef"><strong>[sql] [bug] </strong></span>Fixed bug where multi-valued <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><tt class="xref py py-class docutils literal"><span class="pre">Insert</span></tt></a> construct would fail
to check subsequent values entries beyond the first one given
for literal SQL expressions.<a class="changeset-link headerlink reference internal" href="#change-9f3a810c852f582cfa2eef2e268ec4ef">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3069">#3069</a></p>
</p>
</li>
<li><p id="change-0.9.7-12"><span class="target" id="change-c80817d5fa95f2678e1eab3edb2eae19"><strong>[sql] [bug] </strong></span>Added a &#8220;str()&#8221; step to the dialect_kwargs iteration for
Python version &lt; 2.6.5, working around the
&#8220;no unicode keyword arg&#8221; bug as these args are passed along as
keyword args within some reflection processes.<a class="changeset-link headerlink reference internal" href="#change-c80817d5fa95f2678e1eab3edb2eae19">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3123">#3123</a></p>
</p>
</li>
<li><p id="change-0.9.7-13"><span class="target" id="change-8b1c78cb8eeb1975b8c03e0275f0af7b"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><tt class="xref py py-meth docutils literal"><span class="pre">TypeEngine.with_variant()</span></tt></a> method will now accept a
type class as an argument which is internally converted to an
instance, using the same convention long established by other
constructs such as <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-8b1c78cb8eeb1975b8c03e0275f0af7b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3122">#3122</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.7-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-14"><span class="target" id="change-d5177977fbaffd2ad0990c4ebf70a9ae"><strong>[postgresql] [feature] </strong></span>Added kw argument <tt class="docutils literal"><span class="pre">postgresql_regconfig</span></tt> to the
<tt class="xref py py-meth docutils literal"><span class="pre">Operators.match()</span></tt> operator, allows the &#8220;reg config&#8221; argument
to be specified to the <tt class="docutils literal"><span class="pre">to_tsquery()</span></tt> function emitted.
Pull request courtesy Jonathan Vanasco.<a class="changeset-link headerlink reference internal" href="#change-d5177977fbaffd2ad0990c4ebf70a9ae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3078">#3078</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/22">pull request bitbucket:22</a></p>
</p>
</li>
<li><p id="change-0.9.7-15"><span class="target" id="change-b66794b4e3bffb82595c82694c32733b"><strong>[postgresql] [feature] </strong></span>Added support for Postgresql JSONB via <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><tt class="xref py py-class docutils literal"><span class="pre">JSONB</span></tt></a>.  Pull request
courtesy Damian Dimmich.<a class="changeset-link headerlink reference internal" href="#change-b66794b4e3bffb82595c82694c32733b">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/101">pull request github:101</a></p>
</p>
</li>
<li><p id="change-0.9.7-16"><span class="target" id="change-42d4d4dfd75600d1aca8205469504bb4"><strong>[postgresql] [bug] [pg8000] </strong></span>Fixed bug introduced in 0.9.5 by new pg8000 isolation level feature
where engine-level isolation level parameter would raise an error
on connect.<a class="changeset-link headerlink reference internal" href="#change-42d4d4dfd75600d1aca8205469504bb4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3134">#3134</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.7-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-17"><span class="target" id="change-1548add72e7bdd221e888a5b3d6d9302"><strong>[mysql] [bug] </strong></span>MySQL error 2014 &#8220;commands out of sync&#8221; appears to be raised as a
ProgrammingError, not OperationalError, in modern MySQL-Python versions;
all MySQL error codes that are tested for &#8220;is disconnect&#8221; are now
checked within OperationalError and ProgrammingError regardless.<a class="changeset-link headerlink reference internal" href="#change-1548add72e7bdd221e888a5b3d6d9302">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3101">#3101</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.7-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-18"><span class="target" id="change-5068035ad308233e769418ef305a1621"><strong>[sqlite] [bug] </strong></span>Fixed a SQLite join rewriting issue where a subquery that is embedded
as a scalar subquery such as within an IN would receive inappropriate
substitutions from the enclosing query, if the same table were present
inside the subquery as were in the enclosing query such as in a
joined inheritance scenario.<a class="changeset-link headerlink reference internal" href="#change-5068035ad308233e769418ef305a1621">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3130">#3130</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.7-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-19"><span class="target" id="change-e5ab682c0b41fbfd0dcfb6c0fa0578f2"><strong>[mssql] [feature] </strong></span>Enabled &#8220;multivalues insert&#8221; for SQL Server 2008.  Pull request
courtesy Albert Cervin.  Also expanded the checks for &#8220;IDENTITY INSERT&#8221;
mode to include when the identity key is present in the
VALUEs clause of the statement.<a class="changeset-link headerlink reference internal" href="#change-e5ab682c0b41fbfd0dcfb6c0fa0578f2">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/98">pull request github:98</a></p>
</p>
</li>
<li><p id="change-0.9.7-20"><span class="target" id="change-d9cb352dd29f9a5adb545d81d0cac1c9"><strong>[mssql] [bug] </strong></span>Added statement encoding to the &#8220;SET IDENTITY_INSERT&#8221;
statements which operate when an explicit INSERT is being
interjected into an IDENTITY column, to support non-ascii table
identifiers on drivers such as pyodbc + unix + py2k that don&#8217;t
support unicode statements.<a class="changeset-link headerlink reference internal" href="#change-d9cb352dd29f9a5adb545d81d0cac1c9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.7-21"><span class="target" id="change-4f728a60ab19f0468d57cf1bf84e2b5a"><strong>[mssql] [bug] </strong></span>In the SQL Server pyodbc dialect, repaired the implementation
for the <tt class="docutils literal"><span class="pre">description_encoding</span></tt> dialect parameter, which when
not explicitly set was preventing  cursor.description from
being parsed correctly in the case of result sets that
contained names in alternate encodings.  This parameter
shouldn&#8217;t be needed going forward.<a class="changeset-link headerlink reference internal" href="#change-4f728a60ab19f0468d57cf1bf84e2b5a">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3091">#3091</a></p>
</p>
</li>
<li><p id="change-0.9.7-22"><span class="target" id="change-82de60fa2e391061691dd22349c22f5e"><strong>[mssql] [bug] </strong></span>Fixed a regression from 0.9.5 caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">#3025</a> where the
query used to determine &#8220;default schema&#8221; is invalid in SQL Server 2000.
For SQL Server 2000 we go back to defaulting to the &#8220;schema name&#8221;
parameter of the dialect, which is configurable but defaults
to &#8216;dbo&#8217;.<a class="changeset-link headerlink reference internal" href="#change-82de60fa2e391061691dd22349c22f5e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">#3025</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.7-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-23"><span class="target" id="change-afb93babbe33115000779944030bb303"><strong>[oracle] [bug] [tests] </strong></span>Fixed bug in oracle dialect test suite where in one test,
&#8216;username&#8217; was assumed to be in the database URL, even though
this might not be the case.<a class="changeset-link headerlink reference internal" href="#change-afb93babbe33115000779944030bb303">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3128">#3128</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-misc">
<h3>misc<a class="headerlink" href="#change-0.9.7-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-24"><span class="target" id="change-7731e09fca20d7106d8a5a6a10e341f1"><strong>[bug] [tests] </strong></span>Fixed bug where &#8220;python setup.py test&#8221; wasn&#8217;t calling into
distutils appropriately, and errors would be emitted at the end
of the test suite.<a class="changeset-link headerlink reference internal" href="#change-7731e09fca20d7106d8a5a6a10e341f1">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.7-25"><span class="target" id="change-905a41f06acdffd4ebc408aee599c147"><strong>[bug] [declarative] </strong></span>Fixed bug when the declarative <tt class="docutils literal"><span class="pre">__abstract__</span></tt> flag was not being
distinguished for when it was actually the value <tt class="docutils literal"><span class="pre">False</span></tt>.
The <tt class="docutils literal"><span class="pre">__abstract__</span></tt> flag needs to acutally evaluate to a True
value at the level being tested.<a class="changeset-link headerlink reference internal" href="#change-905a41f06acdffd4ebc408aee599c147">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3097">#3097</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.6">
<h2>0.9.6<a class="headerlink" href="#change-0.9.6" title="Permalink to this headline">¶</a></h2>
Released: June 23, 2014<div class="section" id="change-0.9.6-orm">
<h3>orm<a class="headerlink" href="#change-0.9.6-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.6-0"><span class="target" id="change-b34ddce636d140c62cb6b43b92ce3464"><strong>[orm] [bug] </strong></span>Reverted the change for <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a> - this is a unit of work
fix that is updated more comprehensively in 1.0 via <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">#3061</a>.
The fix in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a> unfortunately produces a new issue whereby
an eager load of a many-to-one attribute can produce an event
that is interpreted into an attribute change.<a class="changeset-link headerlink reference internal" href="#change-b34ddce636d140c62cb6b43b92ce3464">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.5">
<h2>0.9.5<a class="headerlink" href="#change-0.9.5" title="Permalink to this headline">¶</a></h2>
Released: June 23, 2014<div class="section" id="change-0.9.5-orm">
<h3>orm<a class="headerlink" href="#change-0.9.5-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-0"><span class="target" id="change-b14ee29d17139fd41dceb132ae75ee3a"><strong>[orm] [feature] </strong></span>The &#8220;primaryjoin&#8221; model has been stretched a bit further to allow
a join condition that is strictly from a single column to itself,
translated through some kind of SQL function or expression.  This
is kind of experimental, but the first proof of concept is a
&#8220;materialized path&#8221; join condition where a path string is compared
to itself using &#8220;like&#8221;.   The <tt class="xref py py-meth docutils literal"><span class="pre">Operators.like()</span></tt> operator has
also been added to the list of valid operators to use in a primaryjoin
condition.<a class="changeset-link headerlink reference internal" href="#change-b14ee29d17139fd41dceb132ae75ee3a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3029">#3029</a></p>
</p>
</li>
<li><p id="change-0.9.5-1"><span class="target" id="change-d2f991a8058f33793f0f9fdd996750fa"><strong>[orm] [feature] </strong></span>Added new utility function <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.make_transient_to_detached" title="sqlalchemy.orm.session.make_transient_to_detached"><tt class="xref py py-func docutils literal"><span class="pre">make_transient_to_detached()</span></tt></a> which can
be used to manufacture objects that behave as though they were loaded
from a session, then detached.   Attributes that aren&#8217;t present
are marked as expired, and the object can be added to a Session
where it will act like a persistent one.<a class="changeset-link headerlink reference internal" href="#change-d2f991a8058f33793f0f9fdd996750fa">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3017">#3017</a></p>
</p>
</li>
<li><p id="change-0.9.5-2"><span class="target" id="change-368bbcba8a65910bc0ebf133019cd593"><strong>[orm] [bug] </strong></span>Fixed bug in subquery eager loading where a long chain of
eager loads across a polymorphic-subclass boundary in conjunction
with polymorphic loading would fail to locate the subclass-link in the
chain, erroring out with a missing property name on an
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><tt class="xref py py-class docutils literal"><span class="pre">AliasedClass</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-368bbcba8a65910bc0ebf133019cd593">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3055">#3055</a></p>
</p>
</li>
<li><p id="change-0.9.5-3"><span class="target" id="change-871a7a18ca10428184a782f221a13740"><strong>[orm] [bug] </strong></span>Fixed ORM bug where the <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><tt class="xref py py-func docutils literal"><span class="pre">class_mapper()</span></tt></a> function would mask
AttributeErrors or KeyErrors that should raise during mapper
configuration due to user errors.  The catch for attribute/keyerror
has been made more specific to not include the configuration step.<a class="changeset-link headerlink reference internal" href="#change-871a7a18ca10428184a782f221a13740">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3047">#3047</a></p>
</p>
</li>
<li><p id="change-0.9.5-4"><span class="target" id="change-5ffa32a79580d10d4dc6e1f322b62326"><strong>[orm] [bug] </strong></span>Additional checks have been added for the case where an inheriting
mapper is implicitly combining one of its column-based attributes
with that of the parent, where those columns normally don&#8217;t necessarily
share the same value.  This is an extension of an existing check that
was added via <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1892">#1892</a>; however this new check emits only a
warning, instead of an exception, to allow for applications that may
be relying upon the existing behavior.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../faq.html#faq-combining-columns"><em>I&#8217;m getting a warning or error about &#8220;Implicitly combining column X under attribute Y&#8221;</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-5ffa32a79580d10d4dc6e1f322b62326">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3042">#3042</a></p>
</p>
</li>
<li><p id="change-0.9.5-5"><span class="target" id="change-25bfed359ea9ffac545b3582739da0c4"><strong>[orm] [bug] </strong></span>Modified the behavior of <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><tt class="xref py py-func docutils literal"><span class="pre">orm.load_only()</span></tt></a> such that primary key
columns are always added to the list of columns to be &#8220;undeferred&#8221;;
otherwise, the ORM can&#8217;t load the row&#8217;s identity.   Apparently,
one can defer the mapped primary keys and the ORM will fail, that
hasn&#8217;t been changed.  But as load_only is essentially saying
&#8220;defer all but X&#8221;, it&#8217;s more critical that PK cols not be part of this
deferral.<a class="changeset-link headerlink reference internal" href="#change-25bfed359ea9ffac545b3582739da0c4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3080">#3080</a></p>
</p>
</li>
<li><p id="change-0.9.5-6"><span class="target" id="change-7dee9371466176d8e4b29c007477a68a"><strong>[orm] [bug] </strong></span>Fixed a few edge cases which arise in the so-called &#8220;row switch&#8221;
scenario, where an INSERT/DELETE can be turned into an UPDATE.
In this situation, a many-to-one relationship set to None, or
in some cases a scalar attribute set to None, may not be detected
as a net change in value, and therefore the UPDATE would not reset
what was on the previous row.   This is due to some as-yet
unresovled side effects of the way attribute history works in terms
of implicitly assuming None isn&#8217;t really a &#8220;change&#8221; for a previously
un-set attribute.  See also <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">#3061</a>.<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This change has been <strong>REVERTED</strong> in 0.9.6.   The full fix
will be in version 1.0 of SQLAlchemy.</p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-7dee9371466176d8e4b29c007477a68a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a></p>
</p>
</li>
<li><p id="change-0.9.5-7"><span class="target" id="change-075684cfd4ae61fbe83f5b7c147fcc8a"><strong>[orm] [bug] </strong></span>Related to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a>, an adjustment has been made to the unit
of work such that loading for related many-to-one objects is slightly
more aggressive, in the case of a graph of self-referential objects
that are to be deleted; the load of related objects is to help
determine the correct order for deletion if passive_deletes is
not set.<a class="changeset-link headerlink reference internal" href="#change-075684cfd4ae61fbe83f5b7c147fcc8a">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.5-8"><span class="target" id="change-fa2ca744e5fa4caa260e51dbac157f2e"><strong>[orm] [bug] </strong></span>Fixed bug in SQLite join rewriting where anonymized column names
due to repeats would not correctly be rewritten in subqueries.
This would affect SELECT queries with any kind of subquery + join.<a class="changeset-link headerlink reference internal" href="#change-fa2ca744e5fa4caa260e51dbac157f2e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3057">#3057</a></p>
</p>
</li>
<li><p id="change-0.9.5-9"><span class="target" id="change-45db778576e325692f382fbe4e309669"><strong>[orm] [bug] [sql] </strong></span>Fixes to the newly enhanced boolean coercion in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2804">#2804</a> where
the new rules for &#8220;where&#8221; and &#8220;having&#8221; woudn&#8217;t take effect for the
&#8220;whereclause&#8221; and &#8220;having&#8221; kw arguments of the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a> construct,
which is also what <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> uses so wasn&#8217;t working in the
ORM either.<a class="changeset-link headerlink reference internal" href="#change-45db778576e325692f382fbe4e309669">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3013">#3013</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-engine">
<h3>engine<a class="headerlink" href="#change-0.9.5-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-10"><span class="target" id="change-84310c96ae6744a277731d49bbf40a8a"><strong>[engine] [bug] </strong></span>Fixed bug which would occur if a DBAPI exception
occurs when the engine first connects and does its initial checks,
and the exception is not a disconnect exception, yet the cursor
raises an error when we try to close it.  In this case the real
exception would be quashed as we tried to log the cursor close
exception via the connection pool and failed, as we were trying
to access the pool&#8217;s logger in a way that is inappropriate
in this very specific scenario.<a class="changeset-link headerlink reference internal" href="#change-84310c96ae6744a277731d49bbf40a8a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3063">#3063</a></p>
</p>
</li>
<li><p id="change-0.9.5-11"><span class="target" id="change-b17a4835aab34786d5ecedee0ead17e1"><strong>[engine] [bug] </strong></span>Fixed some &#8220;double invalidate&#8221; situations were detected where
a connection invalidation could occur within an already critical section
like a connection.close(); ultimately, these conditions are caused
by the change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2907">#2907</a>, in that the &#8220;reset on return&#8221; feature
calls out to the Connection/Transaction in order to handle it, where
&#8220;disconnect detection&#8221; might be caught.  However, it&#8217;s possible that
the more recent change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2985">#2985</a> made it more likely for this
to be seen as the &#8220;connection invalidate&#8221; operation is much quicker,
as the issue is more reproducible on 0.9.4 than 0.9.3.<p>Checks are now added within any section that
an invalidate might occur to halt further disallowed operations
on the invalidated connection.  This includes two fixes both at the
engine level and at the pool level.   While the issue was observed
with highly concurrent gevent cases, it could in theory occur in
any kind of scenario where a disconnect occurs within the connection
close operation.</p>
<a class="changeset-link headerlink reference internal" href="#change-b17a4835aab34786d5ecedee0ead17e1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3043">#3043</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-sql">
<h3>sql<a class="headerlink" href="#change-0.9.5-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-12"><span class="target" id="change-f7babfe631a67d2dbe1627a033f09c8b"><strong>[sql] [feature] </strong></span>Liberalized the contract for <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> a bit in that you can
specify a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> expression as the target; the index no longer
needs to have a table-bound column present if the index is to be
manually added to the table, either via inline declaration or via
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.append_constraint" title="sqlalchemy.schema.Table.append_constraint"><tt class="xref py py-meth docutils literal"><span class="pre">Table.append_constraint()</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-f7babfe631a67d2dbe1627a033f09c8b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3028">#3028</a></p>
</p>
</li>
<li><p id="change-0.9.5-13"><span class="target" id="change-af7cd160da5802d1180fd83faee35afd"><strong>[sql] [feature] </strong></span>Added new flag <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.between.params.symmetric" title="sqlalchemy.sql.expression.between"><tt class="xref py py-paramref docutils literal"><span class="pre">expression.between.symmetric</span></tt></a>, when set to True
renders &#8220;BETWEEN SYMMETRIC&#8221;.  Also added a new negation operator
&#8220;notbetween_op&#8221;, which now allows an expression like <tt class="docutils literal"><span class="pre">~col.between(x,</span> <span class="pre">y)</span></tt>
to render as &#8220;col NOT BETWEEN x AND y&#8221;, rather than a parentheiszed NOT
string.<a class="changeset-link headerlink reference internal" href="#change-af7cd160da5802d1180fd83faee35afd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2990">#2990</a></p>
</p>
</li>
<li><p id="change-0.9.5-14"><span class="target" id="change-9f9af41aeaf6c84b4705936f62a45be9"><strong>[sql] [bug] </strong></span>Fixed bug in INSERT..FROM SELECT construct where selecting from a
UNION would wrap the union in an anonymous (e.g. unlabled) subquery.<a class="changeset-link headerlink reference internal" href="#change-9f9af41aeaf6c84b4705936f62a45be9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3044">#3044</a></p>
</p>
</li>
<li><p id="change-0.9.5-15"><span class="target" id="change-74c445dabb61781a9bd829c5df7d80df"><strong>[sql] [bug] </strong></span>Fixed bug where <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.update" title="sqlalchemy.schema.Table.update"><tt class="xref py py-meth docutils literal"><span class="pre">Table.update()</span></tt></a> and <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.delete" title="sqlalchemy.schema.Table.delete"><tt class="xref py py-meth docutils literal"><span class="pre">Table.delete()</span></tt></a>
would produce an empty WHERE clause when an empty <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><tt class="xref py py-func docutils literal"><span class="pre">and_()</span></tt></a>
or <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><tt class="xref py py-func docutils literal"><span class="pre">or_()</span></tt></a> or other blank expression were applied.  This is
now consistent with that of <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-74c445dabb61781a9bd829c5df7d80df">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3045">#3045</a></p>
</p>
</li>
<li><p id="change-0.9.5-16"><span class="target" id="change-83df5359e7efaeb82389957dec0cdb65"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column.params.nullable" title="sqlalchemy.schema.Column"><tt class="xref py py-paramref docutils literal"><span class="pre">Column.nullable</span></tt></a> flag is implicitly set to <tt class="docutils literal"><span class="pre">False</span></tt>
when that <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> is referred to in an explicit
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a> for that table.  This behavior now
matches that of when the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> itself has the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column.params.primary_key" title="sqlalchemy.schema.Column"><tt class="xref py py-paramref docutils literal"><span class="pre">Column.primary_key</span></tt></a> flag set to <tt class="docutils literal"><span class="pre">True</span></tt>, which is
intended to be an exactly equivalent case.<a class="changeset-link headerlink reference internal" href="#change-83df5359e7efaeb82389957dec0cdb65">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3023">#3023</a></p>
</p>
</li>
<li><p id="change-0.9.5-17"><span class="target" id="change-85577d5daa751d0acb0c47949a0c7e2f"><strong>[sql] [bug] </strong></span>Fixed bug where the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.__and__" title="sqlalchemy.sql.operators.Operators.__and__"><tt class="xref py py-meth docutils literal"><span class="pre">Operators.__and__()</span></tt></a>,
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.__or__" title="sqlalchemy.sql.operators.Operators.__or__"><tt class="xref py py-meth docutils literal"><span class="pre">Operators.__or__()</span></tt></a> and <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.__invert__" title="sqlalchemy.sql.operators.Operators.__invert__"><tt class="xref py py-meth docutils literal"><span class="pre">Operators.__invert__()</span></tt></a>
operator overload methods could not be overridden within a custom
<a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeEngine.Comparator" title="sqlalchemy.types.TypeEngine.Comparator"><tt class="xref py py-class docutils literal"><span class="pre">TypeEngine.Comparator</span></tt></a> implementation.<a class="changeset-link headerlink reference internal" href="#change-85577d5daa751d0acb0c47949a0c7e2f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3012">#3012</a></p>
</p>
</li>
<li><p id="change-0.9.5-18"><span class="target" id="change-959ca2bf6fe8506aedc7d32093077f73"><strong>[sql] [bug] </strong></span>Fixed bug in new <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><tt class="xref py py-meth docutils literal"><span class="pre">DialectKWArgs.argument_for()</span></tt></a> method where
adding an argument for a construct not previously included for any
special arguments would fail.<a class="changeset-link headerlink reference internal" href="#change-959ca2bf6fe8506aedc7d32093077f73">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3024">#3024</a></p>
</p>
</li>
<li><p id="change-0.9.5-19"><span class="target" id="change-dfb711b371577e0da5d5793400a73450"><strong>[sql] [bug] </strong></span>Fixed regression introduced in 0.9 where new &#8220;ORDER BY &lt;labelname&gt;&#8221;
feature from <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">#1068</a> would not apply quoting rules to the
label name as rendered in the ORDER BY.<a class="changeset-link headerlink reference internal" href="#change-dfb711b371577e0da5d5793400a73450">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">#1068</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3020">#3020</a></p>
</p>
</li>
<li><p id="change-0.9.5-20"><span class="target" id="change-3cdb36857fd1906309e4a9c1af99bbea"><strong>[sql] [bug] </strong></span>Restored the import for <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.Function" title="sqlalchemy.sql.functions.Function"><tt class="xref py py-class docutils literal"><span class="pre">Function</span></tt></a> to the <tt class="docutils literal"><span class="pre">sqlalchemy.sql.expression</span></tt>
import namespace, which was removed at the beginning of 0.9.<a class="changeset-link headerlink reference internal" href="#change-3cdb36857fd1906309e4a9c1af99bbea">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.5-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-21"><span class="target" id="change-911649ad2c23d32ab5dc1670d45c095c"><strong>[postgresql] [feature] </strong></span>Added support for AUTOCOMMIT isolation level when using the pg8000
DBAPI.  Pull request courtesy Tony Locke.<a class="changeset-link headerlink reference internal" href="#change-911649ad2c23d32ab5dc1670d45c095c">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/88">pull request github:88</a></p>
</p>
</li>
<li><p id="change-0.9.5-22"><span class="target" id="change-4fa3bed78a6be8258c6b3e5fd7f621f3"><strong>[postgresql] [feature] </strong></span>Added a new flag <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY.params.zero_indexes" title="sqlalchemy.dialects.postgresql.ARRAY"><tt class="xref py py-paramref docutils literal"><span class="pre">ARRAY.zero_indexes</span></tt></a> to the Postgresql
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><tt class="xref py py-class docutils literal"><span class="pre">ARRAY</span></tt></a> type.  When set to <tt class="docutils literal"><span class="pre">True</span></tt>, a value of one will be
added to all array index values before passing to the database, allowing
better interoperability between Python style zero-based indexes and
Postgresql one-based indexes.  Pull request courtesy Alexey Terentev.<a class="changeset-link headerlink reference internal" href="#change-4fa3bed78a6be8258c6b3e5fd7f621f3">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2785">#2785</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/18">pull request bitbucket:18</a></p>
</p>
</li>
<li><p id="change-0.9.5-23"><span class="target" id="change-d1fc26504bf95db6331661b1c716fa84"><strong>[postgresql] [bug] </strong></span>Added the <tt class="docutils literal"><span class="pre">hashable=False</span></tt> flag to the PG <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><tt class="xref py py-class docutils literal"><span class="pre">HSTORE</span></tt></a> type, which
is needed to allow the ORM to skip over trying to &#8220;hash&#8221; an ORM-mapped
HSTORE column when requesting it in a mixed column/entity list.
Patch courtesy Gunnlaugur Þór Briem.<a class="changeset-link headerlink reference internal" href="#change-d1fc26504bf95db6331661b1c716fa84">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3053">#3053</a></p>
</p>
</li>
<li><p id="change-0.9.5-24"><span class="target" id="change-b4544c9476cfd8dbf4900f17cafbea73"><strong>[postgresql] [bug] </strong></span>Added a new &#8220;disconnect&#8221; message &#8220;connection has been closed unexpectedly&#8221;.
This appears to be related to newer versions of SSL.
Pull request courtesy Antti Haapala.<a class="changeset-link headerlink reference internal" href="#change-b4544c9476cfd8dbf4900f17cafbea73">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/13">pull request bitbucket:13</a></p>
</p>
</li>
<li><p id="change-0.9.5-25"><span class="target" id="change-28077f9da4dc99fa0ea9c3c26c2206b0"><strong>[postgresql] [bug] </strong></span>The psycopg2 <tt class="docutils literal"><span class="pre">.closed</span></tt> accessor is now consulted when determining
if an exception is a &#8220;disconnect&#8221; error; ideally, this should remove
the need for any other inspection of the exception message to detect
disconnect, however we will leave those existing messages in place
as a fallback.   This should be able to handle newer cases like
&#8220;SSL EOF&#8221; conditions.  Pull request courtesy Dirk Mueller.<a class="changeset-link headerlink reference internal" href="#change-28077f9da4dc99fa0ea9c3c26c2206b0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3021">#3021</a>, <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/87">pull request github:87</a></p>
</p>
</li>
<li><p id="change-0.9.5-26"><span class="target" id="change-3abc7a84a2cd2a4a6b699bf9051e8c4f"><strong>[postgresql] [enhancement] </strong></span>Added a new type <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.OID" title="sqlalchemy.dialects.postgresql.OID"><tt class="xref py py-class docutils literal"><span class="pre">postgresql.OID</span></tt></a> to the Postgresql dialect.
While &#8220;oid&#8221; is generally a private type within PG that is not exposed
in modern versions, there are some PG use cases such as large object
support where these types might be exposed, as well as within some
user-reported schema reflection use cases.<a class="changeset-link headerlink reference internal" href="#change-3abc7a84a2cd2a4a6b699bf9051e8c4f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3002">#3002</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.5-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-27"><span class="target" id="change-33595244b0c4abd0a6977c31c3b4f5fa"><strong>[mysql] [bug] </strong></span>Fixed bug where column names added to <tt class="docutils literal"><span class="pre">mysql_length</span></tt> parameter
on an index needed to have the same quoting for quoted names in
order to be recognized.  The fix makes the quotes optional but
also provides the old behavior for backwards compatibility with those
using the workaround.<a class="changeset-link headerlink reference internal" href="#change-33595244b0c4abd0a6977c31c3b4f5fa">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3085">#3085</a></p>
</p>
</li>
<li><p id="change-0.9.5-28"><span class="target" id="change-d8934497b6707c20ed9dc43c8386e63d"><strong>[mysql] [bug] </strong></span>Added support for reflecting tables where an index includes
KEY_BLOCK_SIZE using an equal sign.  Pull request courtesy
Sean McGivern.<a class="changeset-link headerlink reference internal" href="#change-d8934497b6707c20ed9dc43c8386e63d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/15">pull request bitbucket:15</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.5-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-29"><span class="target" id="change-0ff915fd49e5ce758c93f7563aebdb56"><strong>[mssql] [bug] </strong></span>Revised the query used to determine the current default schema name
to use the <tt class="docutils literal"><span class="pre">database_principal_id()</span></tt> function in conjunction with
the <tt class="docutils literal"><span class="pre">sys.database_principals</span></tt> view so that we can determine
the default schema independently of the type of login in progress
(e.g., SQL Server, Windows, etc).<a class="changeset-link headerlink reference internal" href="#change-0ff915fd49e5ce758c93f7563aebdb56">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">#3025</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-firebird">
<h3>firebird<a class="headerlink" href="#change-0.9.5-firebird" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-30"><span class="target" id="change-d63a34acab255efce997614e69c98053"><strong>[firebird] [bug] </strong></span>Fixed bug where the combination of &#8220;limit&#8221; rendering as
&#8220;SELECT FIRST n ROWS&#8221; using a bound parameter (only firebird has both),
combined with column-level subqueries
which also feature &#8220;limit&#8221; as well as &#8220;positional&#8221; bound parameters
(e.g. qmark style) would erroneously assign the subquery-level positions
before that of the enclosing SELECT, thus returning parameters which
are out of order.<a class="changeset-link headerlink reference internal" href="#change-d63a34acab255efce997614e69c98053">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3038">#3038</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-misc">
<h3>misc<a class="headerlink" href="#change-0.9.5-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-31"><span class="target" id="change-b027ac056997c7e3f7a6fa31de610989"><strong>[feature] [examples] </strong></span>Added a new example illustrating materialized paths, using the
latest relationship features.   Example courtesy Jack Zhou.<a class="changeset-link headerlink reference internal" href="#change-b027ac056997c7e3f7a6fa31de610989">¶</a><p>References: <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/21">pull request bitbucket:21</a></p>
</p>
</li>
<li><p id="change-0.9.5-32"><span class="target" id="change-780993758db8d5169a0b88014034f665"><strong>[bug] [declarative] </strong></span>The <tt class="docutils literal"><span class="pre">__mapper_args__</span></tt> dictionary is copied from a declarative
mixin or abstract class when accessed, so that modifications made
to this dictionary by declarative itself won&#8217;t conflict with that
of other mappings.  The dictionary is modified regarding the
<tt class="docutils literal"><span class="pre">version_id_col</span></tt> and <tt class="docutils literal"><span class="pre">polymorphic_on</span></tt> arguments, replacing the
column within with the one that is officially mapped to the local
class/table.<a class="changeset-link headerlink reference internal" href="#change-780993758db8d5169a0b88014034f665">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3062">#3062</a></p>
</p>
</li>
<li><p id="change-0.9.5-33"><span class="target" id="change-b4a24f8e25cdd80a7862778ebaa5bb60"><strong>[bug] [ext] </strong></span>Fixed bug in mutable extension where <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><tt class="xref py py-class docutils literal"><span class="pre">MutableDict</span></tt></a> did not
report change events for the <tt class="docutils literal"><span class="pre">setdefault()</span></tt> dictionary operation.<a class="changeset-link headerlink reference internal" href="#change-b4a24f8e25cdd80a7862778ebaa5bb60">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3093">#3093</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3051">#3051</a></p>
</p>
</li>
<li><p id="change-0.9.5-34"><span class="target" id="change-6faeea1f65b0b63436eba3a21a4eff20"><strong>[bug] [ext] </strong></span>Fixed bug where <tt class="xref py py-meth docutils literal"><span class="pre">MutableDict.setdefault()</span></tt> didn&#8217;t return the
existing or new value (this bug was not released in any 0.8 version).
Pull request courtesy Thomas Hervé.<a class="changeset-link headerlink reference internal" href="#change-6faeea1f65b0b63436eba3a21a4eff20">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3093">#3093</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3051">#3051</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/24">pull request bitbucket:24</a></p>
</p>
</li>
<li><p id="change-0.9.5-35"><span class="target" id="change-aa048eb945e5e5d48d5efed1dd7c64c2"><strong>[bug] [testsuite] </strong></span>In public test suite, shanged to use of <tt class="docutils literal"><span class="pre">String(40)</span></tt> from
less-supported <tt class="docutils literal"><span class="pre">Text</span></tt> in <tt class="docutils literal"><span class="pre">StringTest.test_literal_backslashes</span></tt>.
Pullreq courtesy Jan.<a class="changeset-link headerlink reference internal" href="#change-aa048eb945e5e5d48d5efed1dd7c64c2">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/95">pull request github:95</a></p>
</p>
</li>
<li><p id="change-0.9.5-36"><span class="target" id="change-0482bb06234a4584cf24a7b5f94ba4e7"><strong>[bug] [tests] [py3k] </strong></span>Corrected for some deprecation warnings involving the <tt class="docutils literal"><span class="pre">imp</span></tt>
module and Python 3.3 or greater, when running tests.  Pull
request courtesy Matt Chisholm.<a class="changeset-link headerlink reference internal" href="#change-0482bb06234a4584cf24a7b5f94ba4e7">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2830">#2830</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/2830">pull request bitbucket:2830</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.4">
<h2>0.9.4<a class="headerlink" href="#change-0.9.4" title="Permalink to this headline">¶</a></h2>
Released: March 28, 2014<div class="section" id="change-0.9.4-general">
<h3>general<a class="headerlink" href="#change-0.9.4-general" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-0"><span class="target" id="change-8b07998904f97052927cddc00d64a109"><strong>[general] [feature] </strong></span>Support has been added for pytest to run tests.   This runner
is currently being supported in addition to nose, and will likely
be preferred to nose going forward.   The nose plugin system used
by SQLAlchemy has been split out so that it works under pytest as
well.  There are no plans to drop support for nose at the moment
and we hope that the test suite itself can continue to remain as
agnostic of testing platform as possible.  See the file
README.unittests.rst for updated information on running tests
with pytest.<p>The test plugin system has also been enhanced to support running
tests against mutiple database URLs at once, by specifying the <tt class="docutils literal"><span class="pre">--db</span></tt>
and/or <tt class="docutils literal"><span class="pre">--dburi</span></tt> flags multiple times.  This does not run the entire test
suite for each database, but instead allows test cases that are specific
to certain backends make use of that backend as the test is run.
When using pytest as the test runner, the system will also run
specific test suites multiple times, once for each database, particularly
those tests within the &#8220;dialect suite&#8221;.   The plan is that the enhanced
system will also be used by Alembic, and allow Alembic to run
migration operation tests against multiple backends in one run, including
third-party backends not included within Alembic itself.
Third party dialects and extensions are also encouraged to standardize
on SQLAlchemy&#8217;s test suite as a basis; see the file README.dialects.rst
for background on building out from SQLAlchemy&#8217;s test platform.</p>
<a class="changeset-link headerlink reference internal" href="#change-8b07998904f97052927cddc00d64a109">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-1"><span class="target" id="change-aa9491d98f1ead53e0464652e0816e71"><strong>[general] [bug] </strong></span>Adjusted <tt class="docutils literal"><span class="pre">setup.py</span></tt> file to support the possible future
removal of the <tt class="docutils literal"><span class="pre">setuptools.Feature</span></tt> extension from setuptools.
If this keyword isn&#8217;t present, the setup will still succeed
with setuptools rather than falling back to distutils.  C extension
building can be disabled now also by setting the
DISABLE_SQLALCHEMY_CEXT environment variable.  This variable works
whether or not setuptools is even available.<a class="changeset-link headerlink reference internal" href="#change-aa9491d98f1ead53e0464652e0816e71">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2986">#2986</a></p>
</p>
</li>
<li><p id="change-0.9.4-2"><span class="target" id="change-1c1ca7f7a0d5e6ba577a8a31920eba2d"><strong>[general] [bug] </strong></span>Fixed some test/feature failures occurring in Python 3.4,
in particular the logic used to wrap &#8220;column default&#8221; callables
wouldn&#8217;t work properly for Python built-ins.<a class="changeset-link headerlink reference internal" href="#change-1c1ca7f7a0d5e6ba577a8a31920eba2d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2979">#2979</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-orm">
<h3>orm<a class="headerlink" href="#change-0.9.4-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-3"><span class="target" id="change-9e23c7c28f359372f92c6661ec54a74f"><strong>[orm] [feature] </strong></span>Added new parameter <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.mapper.params.confirm_deleted_rows" title="sqlalchemy.orm.mapper"><tt class="xref py py-paramref docutils literal"><span class="pre">orm.mapper.confirm_deleted_rows</span></tt></a>.  Defaults
to True, indicates that a series of DELETE statements should confirm
that the cursor rowcount matches the number of primary keys that should
have matched;  this behavior had been taken off in most cases
(except when version_id is used) to support the unusual edge case of
self-referential ON DELETE CASCADE; to accommodate this, the message
is now just a warning, not an exception, and the flag can be used
to indicate a mapping that expects self-refererntial cascaded
deletes of this nature.  See also <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2403">#2403</a> for background on the
original change.<a class="changeset-link headerlink reference internal" href="#change-9e23c7c28f359372f92c6661ec54a74f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3007">#3007</a></p>
</p>
</li>
<li><p id="change-0.9.4-4"><span class="target" id="change-4dbefa991bc15832dbd5722613a9ec8b"><strong>[orm] [feature] </strong></span>A warning is emitted if the <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><tt class="xref py py-meth docutils literal"><span class="pre">MapperEvents.before_configured()</span></tt></a>
or <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.after_configured" title="sqlalchemy.orm.events.MapperEvents.after_configured"><tt class="xref py py-meth docutils literal"><span class="pre">MapperEvents.after_configured()</span></tt></a> events are applied to a
specific mapper or mapped class, as the events are only invoked
for the <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> target at the general level.<a class="changeset-link headerlink reference internal" href="#change-4dbefa991bc15832dbd5722613a9ec8b">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-5"><span class="target" id="change-aef7530390a87c53f08a067e5881ebc8"><strong>[orm] [feature] </strong></span>Added a new keyword argument <tt class="docutils literal"><span class="pre">once=True</span></tt> to <a class="reference internal" href="../core/event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><tt class="xref py py-func docutils literal"><span class="pre">event.listen()</span></tt></a>
and <a class="reference internal" href="../core/event.html#sqlalchemy.event.listens_for" title="sqlalchemy.event.listens_for"><tt class="xref py py-func docutils literal"><span class="pre">event.listens_for()</span></tt></a>.  This is a convenience feature which
will wrap the given listener such that it is only invoked once.<a class="changeset-link headerlink reference internal" href="#change-aef7530390a87c53f08a067e5881ebc8">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-6"><span class="target" id="change-2363c295319d0823eecd2e63c95663e5"><strong>[orm] [feature] </strong></span>Added a new option to <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship.params.innerjoin" title="sqlalchemy.orm.relationship"><tt class="xref py py-paramref docutils literal"><span class="pre">relationship.innerjoin</span></tt></a> which is
to specify the string <tt class="docutils literal"><span class="pre">&quot;nested&quot;</span></tt>.  When set to <tt class="docutils literal"><span class="pre">&quot;nested&quot;</span></tt> as opposed
to <tt class="docutils literal"><span class="pre">True</span></tt>, the &#8220;chaining&#8221; of joins will parenthesize the inner join on the
right side of an existing outer join, instead of chaining as a string
of outer joins.   This possibly should have been the default behavior
when 0.9 was released, as we introduced the feature of right-nested
joins in the ORM, however we are keeping it as a non-default for now
to avoid further surprises.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-2976"><em>Right-nested inner joins available in joined eager loads</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-2363c295319d0823eecd2e63c95663e5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2976">#2976</a></p>
</p>
</li>
<li><p id="change-0.9.4-7"><span class="target" id="change-0c43a5d88cf8a178453e8e7bb6dd6346"><strong>[orm] [bug] </strong></span>Fixed ORM bug where changing the primary key of an object, then marking
it for DELETE would fail to target the correct row for DELETE.<a class="changeset-link headerlink reference internal" href="#change-0c43a5d88cf8a178453e8e7bb6dd6346">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3006">#3006</a></p>
</p>
</li>
<li><p id="change-0.9.4-8"><span class="target" id="change-035773212f99eca992be16278ffa7c60"><strong>[orm] [bug] </strong></span>Fixed regression from 0.8.3 as a result of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a>
where <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.exists" title="sqlalchemy.orm.query.Query.exists"><tt class="xref py py-meth docutils literal"><span class="pre">Query.exists()</span></tt></a> wouldn&#8217;t work on a query that only
had a <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><tt class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></tt></a> entry but no other entities.<a class="changeset-link headerlink reference internal" href="#change-035773212f99eca992be16278ffa7c60">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2995">#2995</a></p>
</p>
</li>
<li><p id="change-0.9.4-9"><span class="target" id="change-982465365ea40acced9cf15b19a4e419"><strong>[orm] [bug] </strong></span>Improved an error message which would occur if a query() were made
against a non-selectable, such as a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.literal_column" title="sqlalchemy.sql.expression.literal_column"><tt class="xref py py-func docutils literal"><span class="pre">literal_column()</span></tt></a>, and then
an attempt was made to use <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><tt class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></tt></a> such that the &#8220;left&#8221;
side would be determined as <tt class="docutils literal"><span class="pre">None</span></tt> and then fail.  This condition
is now detected explicitly.<a class="changeset-link headerlink reference internal" href="#change-982465365ea40acced9cf15b19a4e419">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.4-10"><span class="target" id="change-bafeea020f9eb338bbde39de93481f0b"><strong>[orm] [bug] </strong></span>Removed stale names from <tt class="docutils literal"><span class="pre">sqlalchemy.orm.interfaces.__all__</span></tt> and
refreshed with current names, so that an <tt class="docutils literal"><span class="pre">import</span> <span class="pre">*</span></tt> from this
module again works.<a class="changeset-link headerlink reference internal" href="#change-bafeea020f9eb338bbde39de93481f0b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2975">#2975</a></p>
</p>
</li>
<li><p id="change-0.9.4-11"><span class="target" id="change-c7ec7a2b899f6d33f4ef3c25d538daa0"><strong>[orm] [bug] </strong></span>Fixed a very old behavior where the lazy load emitted for a one-to-many
could inappropriately pull in the parent table, and also return results
inconsistent based on what&#8217;s in the parent table, when the primaryjoin
includes some kind of discriminator against the parent table, such
as <tt class="docutils literal"><span class="pre">and_(parent.id</span> <span class="pre">==</span> <span class="pre">child.parent_id,</span> <span class="pre">parent.deleted</span> <span class="pre">==</span> <span class="pre">False)</span></tt>.
While this primaryjoin doesn&#8217;t make that much sense for a one-to-many,
it is slightly more common when applied to the many-to-one side, and
the one-to-many comes as a result of a backref.
Loading rows from <tt class="docutils literal"><span class="pre">child</span></tt> in this case would keep <tt class="docutils literal"><span class="pre">parent.deleted</span> <span class="pre">==</span> <span class="pre">False</span></tt>
as is within the query, thereby yanking it into the FROM clause
and doing a cartesian product.  The new behavior will now substitute
the value of the local &#8220;parent.deleted&#8221; for that parameter as is
appropriate.   Though typically, a real-world app probably wants to use a
different primaryjoin for the o2m side in any case.<a class="changeset-link headerlink reference internal" href="#change-c7ec7a2b899f6d33f4ef3c25d538daa0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2948">#2948</a></p>
</p>
</li>
<li><p id="change-0.9.4-12"><span class="target" id="change-f407535c51c6656da4cfb08cd1542503"><strong>[orm] [bug] </strong></span>Improved the check for &#8220;how to join from A to B&#8221; such that when
a table has multiple, composite foreign keys targeting a parent table,
the <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship.params.foreign_keys" title="sqlalchemy.orm.relationship"><tt class="xref py py-paramref docutils literal"><span class="pre">relationship.foreign_keys</span></tt></a> argument will be properly
interpreted in order to resolve the ambiguity; previously this condition
would raise that there were multiple FK paths when in fact the
foreign_keys argument should be establishing which one is expected.<a class="changeset-link headerlink reference internal" href="#change-f407535c51c6656da4cfb08cd1542503">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2965">#2965</a></p>
</p>
</li>
<li><p id="change-0.9.4-13"><span class="target" id="change-d0595b585896aafd0894b807853463d3"><strong>[orm] [bug] </strong></span>Added support for the not-quite-yet-documented <tt class="docutils literal"><span class="pre">insert=True</span></tt>
flag for <a class="reference internal" href="../core/event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><tt class="xref py py-func docutils literal"><span class="pre">event.listen()</span></tt></a> to work with mapper / instance events.<a class="changeset-link headerlink reference internal" href="#change-d0595b585896aafd0894b807853463d3">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-14"><span class="target" id="change-efb079e4a2bde52cab05c332aee49e22"><strong>[orm] [bug] [engine] </strong></span>Fixed bug where events set to listen at the class
level (e.g. on the <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> or <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.instrumentation.ClassManager" title="sqlalchemy.orm.instrumentation.ClassManager"><tt class="xref py py-class docutils literal"><span class="pre">ClassManager</span></tt></a>
level, as opposed to on an individual mapped class, and also on
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><tt class="xref py py-class docutils literal"><span class="pre">Connection</span></tt></a>) that also made use of internal argument conversion
(which is most within those categories) would fail to be removable.<a class="changeset-link headerlink reference internal" href="#change-efb079e4a2bde52cab05c332aee49e22">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2973">#2973</a></p>
</p>
</li>
<li><p id="change-0.9.4-15"><span class="target" id="change-8aae354a4b3ff011dd6d9e53507c279f"><strong>[orm] [bug] </strong></span>Fixed regression from 0.8 where using an option like
<a class="reference internal" href="../orm/loading.html#sqlalchemy.orm.lazyload" title="sqlalchemy.orm.lazyload"><tt class="xref py py-func docutils literal"><span class="pre">orm.lazyload()</span></tt></a> with the &#8220;wildcard&#8221; expression, e.g. <tt class="docutils literal"><span class="pre">&quot;*&quot;</span></tt>,
would raise an assertion error in the case where the query didn&#8217;t
contain any actual entities.  This assertion is meant for other cases
and was catching this one inadvertently.<a class="changeset-link headerlink reference internal" href="#change-8aae354a4b3ff011dd6d9e53507c279f">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-16"><span class="target" id="change-f9391466ff5f05d8025167143cffb3a3"><strong>[orm] [bug] [sqlite] </strong></span>More fixes to SQLite &#8220;join rewriting&#8221;; the fix from <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2967">#2967</a>
implemented right before the release of 0.9.3 affected the case where
a UNION contained nested joins in it.   &#8220;Join rewriting&#8221; is a feature
with a wide range of possibilities and is the first intricate
&#8220;SQL rewriting&#8221; feature we&#8217;ve introduced in years, so we&#8217;re sort of
going through a lot of iterations with it (not unlike eager loading
back in the 0.2/0.3 series, polymorphic loading in 0.4/0.5). We should
be there soon so thanks for bearing with us :).<a class="changeset-link headerlink reference internal" href="#change-f9391466ff5f05d8025167143cffb3a3">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2969">#2969</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-engine">
<h3>engine<a class="headerlink" href="#change-0.9.4-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-17"><span class="target" id="change-0fbd5944c2467b0bab55d0a60ee42790"><strong>[engine] [feature] </strong></span>Added some new event mechanics for dialect-level events; the initial
implementation allows an event handler to redefine the specific mechanics
by which an arbitrary dialect invokes execute() or executemany() on a
DBAPI cursor.  The new events, at this point semi-public and experimental,
are in support of some upcoming transaction-related extensions.<a class="changeset-link headerlink reference internal" href="#change-0fbd5944c2467b0bab55d0a60ee42790">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-18"><span class="target" id="change-bf0cfd70bc72b3a0d338585889a63fb4"><strong>[engine] [feature] </strong></span>An event listener can now be associated with a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><tt class="xref py py-class docutils literal"><span class="pre">Engine</span></tt></a>,
after one or more <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><tt class="xref py py-class docutils literal"><span class="pre">Connection</span></tt></a> objects have been created
(such as by an orm <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> or via explicit connect)
and the listener will pick up events from those connections.
Previously, performance concerns pushed the event transfer from
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><tt class="xref py py-class docutils literal"><span class="pre">Engine</span></tt></a> to  <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><tt class="xref py py-class docutils literal"><span class="pre">Connection</span></tt></a> at init-time only, but
we&#8217;ve inlined a bunch of conditional checks to make this possible
without any additional function calls.<a class="changeset-link headerlink reference internal" href="#change-bf0cfd70bc72b3a0d338585889a63fb4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2978">#2978</a></p>
</p>
</li>
<li><p id="change-0.9.4-19"><span class="target" id="change-2f688763d982ec3ef2381d07c51dd435"><strong>[engine] [bug] </strong></span>A major improvement made to the mechanics by which the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><tt class="xref py py-class docutils literal"><span class="pre">Engine</span></tt></a>
recycles the connection pool when a &#8220;disconnect&#8221; condition is detected;
instead of discarding the pool and explicitly closing out connections,
the pool is retained and a &#8220;generational&#8221; timestamp is updated to
reflect the current time, thereby causing all existing connections
to be recycled when they are next checked out.   This greatly simplifies
the recycle process, removes the need for &#8220;waking up&#8221; connect attempts
waiting on the old pool and eliminates the race condition that many
immediately-discarded &#8220;pool&#8221; objects could be created during the
recycle operation.<a class="changeset-link headerlink reference internal" href="#change-2f688763d982ec3ef2381d07c51dd435">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2985">#2985</a></p>
</p>
</li>
<li><p id="change-0.9.4-20"><span class="target" id="change-2bdaf42f4d681b56c349b95939f392fb"><strong>[engine] [bug] </strong></span>The <a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.after_cursor_execute" title="sqlalchemy.events.ConnectionEvents.after_cursor_execute"><tt class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.after_cursor_execute()</span></tt></a> event is now
emitted for the &#8220;_cursor_execute()&#8221; method of <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><tt class="xref py py-class docutils literal"><span class="pre">Connection</span></tt></a>;
this is the &#8220;quick&#8221; executor that is used for things like
when a sequence is executed ahead of an INSERT statement, as well as
for dialect startup checks like unicode returns, charset, etc.
the <a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><tt class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.before_cursor_execute()</span></tt></a> event was already
invoked here.  The &#8220;executemany&#8221; flag is now always set to False
here, as this event always corresponds to a single execution.
Previously the flag could be True if we were acting on behalf of
an executemany INSERT statement.<a class="changeset-link headerlink reference internal" href="#change-2bdaf42f4d681b56c349b95939f392fb">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-sql">
<h3>sql<a class="headerlink" href="#change-0.9.4-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-21"><span class="target" id="change-ae73b72c5883a6bfadd83231bbc945cb"><strong>[sql] [feature] </strong></span>Added support for literal rendering of boolean values, e.g.
&#8220;true&#8221; / &#8220;false&#8221; or &#8220;1&#8221; / &#8220;0&#8221;.<a class="changeset-link headerlink reference internal" href="#change-ae73b72c5883a6bfadd83231bbc945cb">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-22"><span class="target" id="change-eb76a93c5c1ba58cc198d3783e1d4d74"><strong>[sql] [feature] </strong></span>Added a new feature <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.conv" title="sqlalchemy.schema.conv"><tt class="xref py py-func docutils literal"><span class="pre">schema.conv()</span></tt></a>, the purpose of which is to
mark a constraint name as already having had a naming convention applied.
This token will be used by Alembic migrations as of Alembic 0.6.4
in order to render constraints in migration scripts with names marked
as already having been subject to a naming convention.<a class="changeset-link headerlink reference internal" href="#change-eb76a93c5c1ba58cc198d3783e1d4d74">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-23"><span class="target" id="change-da83b2502fb46853ce0e53aa3df91a9a"><strong>[sql] [feature] </strong></span>The new dialect-level keyword argument system for schema-level
constructs has been enhanced in order to assist with existing
schemes that rely upon addition of ad-hoc keyword arguments to
constructs.<p>E.g., a construct such as <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> will again accept
ad-hoc keyword arguments within the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index.kwargs" title="sqlalchemy.schema.Index.kwargs"><tt class="xref py py-attr docutils literal"><span class="pre">Index.kwargs</span></tt></a> collection,
after construction:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">idx</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="n">idx</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;mysql_someargument&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span></pre></div>
</div>
<p>To suit the use case of allowing custom arguments at construction time,
the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><tt class="xref py py-meth docutils literal"><span class="pre">DialectKWArgs.argument_for()</span></tt></a> method now allows this registration:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s">&#39;mysql&#39;</span><span class="p">,</span> <span class="s">&#39;someargument&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

<span class="n">idx</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">mysql_someargument</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><tt class="xref py py-meth docutils literal"><span class="pre">DialectKWArgs.argument_for()</span></tt></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-da83b2502fb46853ce0e53aa3df91a9a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2866">#2866</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2962">#2962</a></p>
</p>
</li>
<li><p id="change-0.9.4-24"><span class="target" id="change-fe06781a0af32115b5a219dbc350cb6b"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.tuple_" title="sqlalchemy.sql.expression.tuple_"><tt class="xref py py-func docutils literal"><span class="pre">tuple_()</span></tt></a> construct where the &#8220;type&#8221; of essentially
the first SQL expression would be applied as the &#8220;comparison type&#8221;
to a compared tuple value; this has the effect in some cases of an
inappropriate &#8220;type coersion&#8221; occurring, such as when a tuple that
has a mix of String and Binary values improperly coerces target
values to Binary even though that&#8217;s not what they are on the left
side.  <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.tuple_" title="sqlalchemy.sql.expression.tuple_"><tt class="xref py py-func docutils literal"><span class="pre">tuple_()</span></tt></a> now expects heterogeneous types within its
list of values.<a class="changeset-link headerlink reference internal" href="#change-fe06781a0af32115b5a219dbc350cb6b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2977">#2977</a></p>
</p>
</li>
<li><p id="change-0.9.4-25"><span class="target" id="change-ba95c9ab0ff11216d8fe5bb713e2398c"><strong>[sql] [bug] </strong></span>Fixed an 0.9 regression where a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a> that failed to
reflect correctly wouldn&#8217;t be removed from the parent
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt></a>, even though in an invalid state.  Pullreq
courtesy Roman Podoliaka.<a class="changeset-link headerlink reference internal" href="#change-ba95c9ab0ff11216d8fe5bb713e2398c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2988">#2988</a>, <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/78">pull request github:78</a></p>
</p>
</li>
<li><p id="change-0.9.4-26"><span class="target" id="change-e9d783386f345232a96b9a9f34389e43"><strong>[sql] [bug] </strong></span><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><tt class="xref py py-paramref docutils literal"><span class="pre">MetaData.naming_convention</span></tt></a> feature will now also
apply to <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><tt class="xref py py-class docutils literal"><span class="pre">CheckConstraint</span></tt></a> objects that are associated
directly with a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> instead of just on the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-e9d783386f345232a96b9a9f34389e43">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-27"><span class="target" id="change-50c081ddded08f44824be844d1b15da9"><strong>[sql] [bug] </strong></span>Fixed bug in new <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><tt class="xref py py-paramref docutils literal"><span class="pre">MetaData.naming_convention</span></tt></a> feature
where the name of a check constraint making use of the
<cite>&#8220;%(constraint_name)s&#8221;</cite> token would get doubled up for the
constraint generated by a boolean or enum type, and overall
duplicate events would cause the <cite>&#8220;%(constraint_name)s&#8221;</cite> token
to keep compounding itself.<a class="changeset-link headerlink reference internal" href="#change-50c081ddded08f44824be844d1b15da9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2991">#2991</a></p>
</p>
</li>
<li><p id="change-0.9.4-28"><span class="target" id="change-e92ab0a211866ce5780a590de380dd1d"><strong>[sql] [bug] </strong></span>Adjusted the logic which applies names to the .c collection when
a no-name <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><tt class="xref py py-class docutils literal"><span class="pre">BindParameter</span></tt></a> is received, e.g. via <tt class="xref py py-func docutils literal"><span class="pre">sql.literal()</span></tt>
or similar; the &#8220;key&#8221; of the bind param is used as the key within
.c. rather than the rendered name.  Since these binds have &#8220;anonymous&#8221;
names in any case, this allows individual bound parameters to
have their own name within a selectable if they are otherwise unlabeled.<a class="changeset-link headerlink reference internal" href="#change-e92ab0a211866ce5780a590de380dd1d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2974">#2974</a></p>
</p>
</li>
<li><p id="change-0.9.4-29"><span class="target" id="change-6c78e246b3394d4e4b227f1f06cc54ef"><strong>[sql] [bug] </strong></span>Some changes to how the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause.c" title="sqlalchemy.sql.expression.FromClause.c"><tt class="xref py py-attr docutils literal"><span class="pre">FromClause.c</span></tt></a> collection behaves
when presented with duplicate columns.  The behavior of emitting a
warning and replacing the old column with the same name still
remains to some degree; the replacement in particular is to maintain
backwards compatibility.  However, the replaced column still remains
associated with the <tt class="docutils literal"><span class="pre">c</span></tt> collection now in a collection <tt class="docutils literal"><span class="pre">._all_columns</span></tt>,
which is used by constructs such as aliases and unions, to deal with
the set of columns in <tt class="docutils literal"><span class="pre">c</span></tt> more towards what is actually in the
list of columns rather than the unique set of key names.  This helps
with situations where SELECT statements with same-named columns
are used in unions and such, so that the union can match the columns
up positionally and also there&#8217;s some chance of <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause.corresponding_column" title="sqlalchemy.sql.expression.FromClause.corresponding_column"><tt class="xref py py-meth docutils literal"><span class="pre">FromClause.corresponding_column()</span></tt></a>
still being usable here (it can now return a column that is only
in selectable.c._all_columns and not otherwise named).
The new collection is underscored as we still need to decide where this
list might end up.   Theoretically it
would become the result of iter(selectable.c), however this would mean
that the length of the iteration would no longer match the length of
keys(), and that behavior needs to be checked out.<a class="changeset-link headerlink reference internal" href="#change-6c78e246b3394d4e4b227f1f06cc54ef">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2974">#2974</a></p>
</p>
</li>
<li><p id="change-0.9.4-30"><span class="target" id="change-650edc97a13474c853b5c10a976a29f0"><strong>[sql] [bug] </strong></span>Fixed issue in new <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.TextClause.columns" title="sqlalchemy.sql.expression.TextClause.columns"><tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt></a> method where the ordering
of columns given positionally would not be preserved.   This could
have potential impact in positional situations such as applying the
resulting <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><tt class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></tt></a> object to a union.<a class="changeset-link headerlink reference internal" href="#change-650edc97a13474c853b5c10a976a29f0">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.4-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-31"><span class="target" id="change-f238b48f610767a520453ae382fb1992"><strong>[postgresql] [feature] </strong></span>Enabled &#8220;sane multi-row count&#8221; checking for the psycopg2 DBAPI, as
this seems to be supported as of psycopg2 2.0.9.<a class="changeset-link headerlink reference internal" href="#change-f238b48f610767a520453ae382fb1992">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.4-32"><span class="target" id="change-9708a66fcf11605de634853699c1df71"><strong>[postgresql] [bug] </strong></span>Fixed regression caused by release 0.8.5 / 0.9.3&#8217;s compatibility
enhancements where index reflection on Postgresql versions specific
to only the 8.1, 8.2 series again
broke, surrounding the ever problematic int2vector type.  While
int2vector supports array operations as of 8.1, apparently it only
supports CAST to a varchar as of 8.3.<a class="changeset-link headerlink reference internal" href="#change-9708a66fcf11605de634853699c1df71">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3000">#3000</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.4-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-33"><span class="target" id="change-8fd1f3c05b103698df571c4d15925738"><strong>[mysql] [bug] </strong></span>Tweaked the settings for mysql-connector-python; in Py2K, the
&#8220;supports unicode statements&#8221; flag is now False, so that SQLAlchemy
will encode the <em>SQL string</em> (note: <em>not</em> the parameters)
to bytes before sending to the database.  This seems to allow
all unicode-related tests to pass for mysql-connector, including those
that use non-ascii table/column names, as well as some tests for the
TEXT type using unicode under cursor.executemany().<a class="changeset-link headerlink reference internal" href="#change-8fd1f3c05b103698df571c4d15925738">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.4-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-34"><span class="target" id="change-3a96f2348877f517e9c2f5950d4c1d1b"><strong>[oracle] [feature] </strong></span>Added a new engine option <tt class="docutils literal"><span class="pre">coerce_to_unicode=True</span></tt> to the
cx_Oracle dialect, which restores the cx_Oracle outputtypehandler
approach to Python unicode conversion under Python 2, which was
removed in 0.9.2 as a result of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2911">#2911</a>.  Some use cases would
prefer that unicode coersion is unconditional for all string values,
despite performance concerns.  Pull request courtesy
Christoph Zwerschke.<a class="changeset-link headerlink reference internal" href="#change-3a96f2348877f517e9c2f5950d4c1d1b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2911">#2911</a>, <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/74">pull request github:74</a></p>
</p>
</li>
<li><p id="change-0.9.4-35"><span class="target" id="change-5861886a0faf27d02c29bdac44e39a74"><strong>[oracle] [bug] </strong></span>Added new datatype <a class="reference internal" href="../dialects/oracle.html#sqlalchemy.dialects.oracle.DATE" title="sqlalchemy.dialects.oracle.DATE"><tt class="xref py py-class docutils literal"><span class="pre">oracle.DATE</span></tt></a>, which is a subclass of
<a class="reference internal" href="../core/types.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><tt class="xref py py-class docutils literal"><span class="pre">DateTime</span></tt></a>.  As Oracle has no &#8220;datetime&#8221; type per se,
it instead has only <tt class="docutils literal"><span class="pre">DATE</span></tt>, it is appropriate here that the
<tt class="docutils literal"><span class="pre">DATE</span></tt> type as present in the Oracle dialect be an instance of
<a class="reference internal" href="../core/types.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><tt class="xref py py-class docutils literal"><span class="pre">DateTime</span></tt></a>.  This issue doesn&#8217;t change anything as far as
the behavior of the type, as data conversion is handled by the
DBAPI in any case, however the improved subclass layout will help
the use cases of inspecting types for cross-database compatibility.
Also removed uppercase <tt class="docutils literal"><span class="pre">DATETIME</span></tt> from the Oracle dialect as this
type isn&#8217;t functional in that context.<a class="changeset-link headerlink reference internal" href="#change-5861886a0faf27d02c29bdac44e39a74">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2987">#2987</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-misc">
<h3>misc<a class="headerlink" href="#change-0.9.4-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-36"><span class="target" id="change-7ed27baa911abecf8c4b54665d466e1c"><strong>[bug] [ext] </strong></span>Fixed bug in mutable extension as well as
<a class="reference internal" href="../orm/session.html#sqlalchemy.orm.attributes.flag_modified" title="sqlalchemy.orm.attributes.flag_modified"><tt class="xref py py-func docutils literal"><span class="pre">attributes.flag_modified()</span></tt></a> where the change event would not be
propagated if the attribute had been reassigned to itself.<a class="changeset-link headerlink reference internal" href="#change-7ed27baa911abecf8c4b54665d466e1c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2997">#2997</a></p>
</p>
</li>
<li><p id="change-0.9.4-37"><span class="target" id="change-50822a3d39ca486f3c066ca9821edd45"><strong>[bug] [automap] [ext] </strong></span>Added support to automap for the case where a relationship should
not be created between two classes that are in a joined inheritance
relationship, for those foreign keys that link the subclass back to
the superclass.<a class="changeset-link headerlink reference internal" href="#change-50822a3d39ca486f3c066ca9821edd45">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3004">#3004</a></p>
</p>
</li>
<li><p id="change-0.9.4-38"><span class="target" id="change-65600f5e6f7388343eecd3b62edfa06e"><strong>[bug] [tests] </strong></span>Fixed a few errant <tt class="docutils literal"><span class="pre">u''</span></tt> strings that would prevent tests from passing
in Py3.2.  Patch courtesy Arfrever Frehtes Taifersar Arahesis.<a class="changeset-link headerlink reference internal" href="#change-65600f5e6f7388343eecd3b62edfa06e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2980">#2980</a></p>
</p>
</li>
<li><p id="change-0.9.4-39"><span class="target" id="change-fe5f6bf9974e7d6f327cb0f51b761366"><strong>[bug] [pool] </strong></span>Fixed small issue in <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.SingletonThreadPool" title="sqlalchemy.pool.SingletonThreadPool"><tt class="xref py py-class docutils literal"><span class="pre">SingletonThreadPool</span></tt></a> where the current
connection to be returned might get inadvertently cleaned out during
the &#8220;cleanup&#8221; process.  Patch courtesy jd23.<a class="changeset-link headerlink reference internal" href="#change-fe5f6bf9974e7d6f327cb0f51b761366">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-40"><span class="target" id="change-4efb0c1e9b726653c4fc710a9ed431bc"><strong>[bug] [ext] [py3k] </strong></span>Fixed bug in association proxy where assigning an empty slice
(e.g. <tt class="docutils literal"><span class="pre">x[:]</span> <span class="pre">=</span> <span class="pre">[...]</span></tt>) would fail on Py3k.<a class="changeset-link headerlink reference internal" href="#change-4efb0c1e9b726653c4fc710a9ed431bc">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-41"><span class="target" id="change-30555d2dbceb91ce584663b6726101d0"><strong>[bug] [ext] </strong></span>Fixed a regression in association proxy caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2810">#2810</a> which
caused a user-provided &#8220;getter&#8221; to no longer receive values of <tt class="docutils literal"><span class="pre">None</span></tt>
when fetching scalar values from a target that is non-present.  The
check for None introduced by this change is now moved into the default
getter, so a user-provided getter will also again receive values of
None.<a class="changeset-link headerlink reference internal" href="#change-30555d2dbceb91ce584663b6726101d0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2810">#2810</a></p>
</p>
</li>
<li><p id="change-0.9.4-42"><span class="target" id="change-e0ab0a5338c4fe508e1a11411752a73c"><strong>[bug] [examples] </strong></span>Fixed bug in the versioned_history example where column-level INSERT
defaults would prevent history values of NULL from being written.<a class="changeset-link headerlink reference internal" href="#change-e0ab0a5338c4fe508e1a11411752a73c">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.3">
<h2>0.9.3<a class="headerlink" href="#change-0.9.3" title="Permalink to this headline">¶</a></h2>
Released: February 19, 2014<div class="section" id="change-0.9.3-orm">
<h3>orm<a class="headerlink" href="#change-0.9.3-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-0"><span class="target" id="change-eb786e8c736c09ac5a33083ba8a84ffd"><strong>[orm] [feature] </strong></span>Added new <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><tt class="xref py py-meth docutils literal"><span class="pre">MapperEvents.before_configured()</span></tt></a> event which allows
an event at the start of <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><tt class="xref py py-func docutils literal"><span class="pre">configure_mappers()</span></tt></a>, as well
as <tt class="docutils literal"><span class="pre">__declare_first__()</span></tt> hook within declarative to complement
<tt class="docutils literal"><span class="pre">__declare_last__()</span></tt>.<a class="changeset-link headerlink reference internal" href="#change-eb786e8c736c09ac5a33083ba8a84ffd">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.3-1"><span class="target" id="change-96a72422aa09306aa423720d8a97b57c"><strong>[orm] [bug] </strong></span>Fixed bug where <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.get" title="sqlalchemy.orm.query.Query.get"><tt class="xref py py-meth docutils literal"><span class="pre">Query.get()</span></tt></a> would fail to consistently
raise the <tt class="xref py py-class docutils literal"><span class="pre">InvalidRequestError</span></tt> that invokes when called
on a query with existing criterion, when the given identity is
already present in the identity map.<a class="changeset-link headerlink reference internal" href="#change-96a72422aa09306aa423720d8a97b57c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2951">#2951</a></p>
</p>
</li>
<li><p id="change-0.9.3-2"><span class="target" id="change-bcd89a790df27cfdcae2a8109b61d16e"><strong>[orm] [bug] [sqlite] </strong></span>Fixed bug in SQLite &#8220;join rewriting&#8221; where usage of an exists() construct
would fail to be rewritten properly, such as when the exists is
mapped to a column_property in an intricate nested-join scenario.
Also fixed a somewhat related issue where join rewriting would fail
on the columns clause of the SELECT statement if the targets were
aliased tables, as opposed to individual aliased columns.<a class="changeset-link headerlink reference internal" href="#change-bcd89a790df27cfdcae2a8109b61d16e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2967">#2967</a></p>
</p>
</li>
<li><p id="change-0.9.3-3"><span class="target" id="change-5d64e437351667e0682df36dc7a55ebb"><strong>[orm] [bug] </strong></span>Fixed an 0.9 regression where ORM instance or mapper events applied
to a base class such as a declarative base with the propagate=True
flag would fail to apply to existing mapped classes which also
used inheritance due to an assertion.  Addtionally, repaired an
attribute error which could occur during removal of such an event,
depending on how it was first assigned.<a class="changeset-link headerlink reference internal" href="#change-5d64e437351667e0682df36dc7a55ebb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2949">#2949</a></p>
</p>
</li>
<li><p id="change-0.9.3-4"><span class="target" id="change-af92c4a9aa53d0e18016cc10a0c419db"><strong>[orm] [bug] </strong></span>Improved the initialization logic of composite attributes such that
calling <tt class="docutils literal"><span class="pre">MyClass.attribute</span></tt> will not require that the configure
mappers step has occurred, e.g. it will just work without throwing
any error.<a class="changeset-link headerlink reference internal" href="#change-af92c4a9aa53d0e18016cc10a0c419db">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2935">#2935</a></p>
</p>
</li>
<li><p id="change-0.9.3-5"><span class="target" id="change-f823d5ff3da539a90fc0cf3f7dac97c5"><strong>[orm] [bug] </strong></span>More issues with [ticket:2932] first resolved in 0.9.2 where
using a column key of the form <tt class="docutils literal"><span class="pre">&lt;tablename&gt;_&lt;columnname&gt;</span></tt>
matching that of an aliased column in the text would still not
match at the ORM level, which is ultimately due to a core
column-matching issue.  Additional rules have been added so that the
column <tt class="docutils literal"><span class="pre">_label</span></tt> is taken into account when working with a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><tt class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></tt></a> construct or with literal columns.<a class="changeset-link headerlink reference internal" href="#change-f823d5ff3da539a90fc0cf3f7dac97c5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2932">#2932</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-0.9.3-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-6"><span class="target" id="change-fdcf86f8dfe04be777c674c066723232"><strong>[bug] [orm] [declarative] </strong></span>Fixed bug where <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><tt class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></tt></a> would fail to be
fully usable within declarative relationship configuration, as its
string classname would not be available in the registry of classnames
at mapper configuration time.   The class now explicitly adds itself
to the class regsitry, and additionally both <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><tt class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></tt></a>
as well as <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.ConcreteBase" title="sqlalchemy.ext.declarative.ConcreteBase"><tt class="xref py py-class docutils literal"><span class="pre">ConcreteBase</span></tt></a> set themselves up <em>before</em> mappers
are configured within the <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><tt class="xref py py-func docutils literal"><span class="pre">configure_mappers()</span></tt></a> setup, using
the new <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><tt class="xref py py-meth docutils literal"><span class="pre">MapperEvents.before_configured()</span></tt></a> event.<a class="changeset-link headerlink reference internal" href="#change-fdcf86f8dfe04be777c674c066723232">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2950">#2950</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-engine">
<h3>engine<a class="headerlink" href="#change-0.9.3-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-7"><span class="target" id="change-a5e88f49d79f6b2a868c6f66b3be7d98"><strong>[engine] [bug] [pool] </strong></span>Fixed a critical regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2880">#2880</a> where the newly
concurrent ability to return connections from the pool means that the
&#8220;first_connect&#8221; event is now no longer synchronized either, thus leading
to dialect mis-configurations under even minimal concurrency situations.<a class="changeset-link headerlink reference internal" href="#change-a5e88f49d79f6b2a868c6f66b3be7d98">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2964">#2964</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2880">#2880</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-sql">
<h3>sql<a class="headerlink" href="#change-0.9.3-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-8"><span class="target" id="change-4bcdb46ed066a2c9b8490bf78da16720"><strong>[sql] [bug] </strong></span>Fixed bug where calling <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.values" title="sqlalchemy.sql.expression.Insert.values"><tt class="xref py py-meth docutils literal"><span class="pre">Insert.values()</span></tt></a> with an empty list
or tuple would raise an IndexError.   It now produces an empty
insert construct as would be the case with an empty dictionary.<a class="changeset-link headerlink reference internal" href="#change-4bcdb46ed066a2c9b8490bf78da16720">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2944">#2944</a></p>
</p>
</li>
<li><p id="change-0.9.3-9"><span class="target" id="change-d04236a265c2b96a0d1c28f0cb10ee98"><strong>[sql] [bug] </strong></span>Fixed bug where <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.interfaces.PropComparator.in_" title="sqlalchemy.orm.interfaces.PropComparator.in_"><tt class="xref py py-meth docutils literal"><span class="pre">in_()</span></tt></a> would go into an endless loop if
erroneously passed a column expression whose comparator included
the <tt class="docutils literal"><span class="pre">__getitem__()</span></tt> method, such as a column that uses the
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><tt class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></tt></a> type.<a class="changeset-link headerlink reference internal" href="#change-d04236a265c2b96a0d1c28f0cb10ee98">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2957">#2957</a></p>
</p>
</li>
<li><p id="change-0.9.3-10"><span class="target" id="change-32e5f45f2c9cbe4cd6ccc0326087b300"><strong>[sql] [bug] </strong></span>Fixed regression in new &#8220;naming convention&#8221; feature where conventions
would fail if the referred table in a foreign key contained a schema
name.  Pull request courtesy Thomas Farvour.<a class="changeset-link headerlink reference internal" href="#change-32e5f45f2c9cbe4cd6ccc0326087b300">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/67">pull request github:67</a></p>
</p>
</li>
<li><p id="change-0.9.3-11"><span class="target" id="change-e2e7387ca4e9c810c4f780765399985c"><strong>[sql] [bug] </strong></span>Fixed bug where so-called &#8220;literal render&#8221; of <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a>
constructs would fail if the bind were constructed with a callable,
rather than a direct value.  This prevented ORM expressions
from being rendered with the &#8220;literal_binds&#8221; compiler flag.<a class="changeset-link headerlink reference internal" href="#change-e2e7387ca4e9c810c4f780765399985c">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.3-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-12"><span class="target" id="change-2887ae0aba411e9eb86f31766ab46817"><strong>[postgresql] [feature] </strong></span>Added the <a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeEngine.python_type" title="sqlalchemy.types.TypeEngine.python_type"><tt class="xref py py-attr docutils literal"><span class="pre">TypeEngine.python_type</span></tt></a> convenience accessor onto the
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><tt class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></tt></a> type.  Pull request courtesy Alexey Terentev.<a class="changeset-link headerlink reference internal" href="#change-2887ae0aba411e9eb86f31766ab46817">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/64">pull request github:64</a></p>
</p>
</li>
<li><p id="change-0.9.3-13"><span class="target" id="change-6799209a311c3dc94eac58c106af18da"><strong>[postgresql] [bug] </strong></span>Added an additional message to psycopg2 disconnect detection,
&#8220;could not send data to server&#8221;, which complements the existing
&#8220;could not receive data from server&#8221; and has been observed by users.<a class="changeset-link headerlink reference internal" href="#change-6799209a311c3dc94eac58c106af18da">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2936">#2936</a></p>
</p>
</li>
<li><p id="change-0.9.3-14"><span class="target" id="change-f41983d269d6edd9b36005f803524707"><strong>[postgresql] [bug] </strong></span><blockquote>
<div>Support has been improved for Postgresql reflection behavior on very old
(pre 8.1) versions of Postgresql, and potentially other PG engines
such as Redshift (assuming Redshift reports the version as &lt; 8.1).
The query for &#8220;indexes&#8221; as well as &#8220;primary keys&#8221; relies upon inspecting
a so-called &#8220;int2vector&#8221; datatype, which refuses to coerce to an array
prior to 8.1 causing failures regarding the &#8220;ANY()&#8221; operator used
in the query.  Extensive googling has located the very hacky, but
recommended-by-PG-core-developer query to use when PG version &lt; 8.1
is in use, so index and primary key constraint reflection now work
on these versions.</div></blockquote>
<a class="changeset-link headerlink reference internal" href="#change-f41983d269d6edd9b36005f803524707">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.3-15"><span class="target" id="change-5433997f376e8e488a886c0c8e165f57"><strong>[postgresql] [bug] </strong></span>Revised this very old issue where the Postgresql &#8220;get primary key&#8221;
reflection query were updated to take into account primary key constraints
that were renamed; the newer query fails on very old versions of
Postgresql such as version 7, so the old query is restored in those cases
when server_version_info &lt; (8, 0) is detected.<a class="changeset-link headerlink reference internal" href="#change-5433997f376e8e488a886c0c8e165f57">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2291">#2291</a></p>
</p>
</li>
<li><p id="change-0.9.3-16"><span class="target" id="change-4f3cfb3c174030c18a138b13afe7a215"><strong>[postgresql] [bug] </strong></span>Added server version detection to the newly added dialect startup
query for  &#8220;show standard_conforming_strings&#8221;; as this variable was
added as of PG 8.2, we skip the query for PG versions who report a
version string earlier than that.<a class="changeset-link headerlink reference internal" href="#change-4f3cfb3c174030c18a138b13afe7a215">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2946">#2946</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.3-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-17"><span class="target" id="change-ab9ba4668cce1a333145dd002a487a27"><strong>[mysql] [feature] </strong></span>Added new MySQL-specific <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.DATETIME" title="sqlalchemy.dialects.mysql.DATETIME"><tt class="xref py py-class docutils literal"><span class="pre">mysql.DATETIME</span></tt></a> which includes
fractional seconds support; also added fractional seconds support
to <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.TIMESTAMP" title="sqlalchemy.dialects.mysql.TIMESTAMP"><tt class="xref py py-class docutils literal"><span class="pre">mysql.TIMESTAMP</span></tt></a>.  DBAPI support is limited, though
fractional seconds are known to be supported by MySQL Connector/Python.
Patch courtesy Geert JM Vanderkelen.<a class="changeset-link headerlink reference internal" href="#change-ab9ba4668cce1a333145dd002a487a27">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2941">#2941</a></p>
</p>
</li>
<li><p id="change-0.9.3-18"><span class="target" id="change-985ed90f90095c4b537ea36d3c1ac546"><strong>[mysql] [bug] </strong></span>Added support for the <tt class="docutils literal"><span class="pre">PARTITION</span> <span class="pre">BY</span></tt> and <tt class="docutils literal"><span class="pre">PARTITIONS</span></tt>
MySQL table keywords, specified as <tt class="docutils literal"><span class="pre">mysql_partition_by='value'</span></tt> and
<tt class="docutils literal"><span class="pre">mysql_partitions='value'</span></tt> to <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a>.  Pull request
courtesy Marcus McCurdy.<a class="changeset-link headerlink reference internal" href="#change-985ed90f90095c4b537ea36d3c1ac546">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2966">#2966</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/12">pull request bitbucket:12</a></p>
</p>
</li>
<li><p id="change-0.9.3-19"><span class="target" id="change-73d5f7e864d7ffd3bf7060a3a52e6d34"><strong>[mysql] [bug] </strong></span>Fixed bug which prevented MySQLdb-based dialects (e.g.
pymysql) from working in Py3K, where a check for &#8220;connection
charset&#8221; would fail due to Py3K&#8217;s more strict value comparison
rules.  The call in question  wasn&#8217;t taking the database
version into account in any case as the server version was
still None at that point, so the method overall has been
simplified to rely upon connection.character_set_name().<a class="changeset-link headerlink reference internal" href="#change-73d5f7e864d7ffd3bf7060a3a52e6d34">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2933">#2933</a></p>
</p>
</li>
<li><p id="change-0.9.3-20"><span class="target" id="change-cec15bf8dc76d9d68418cad966e2a9f1"><strong>[mysql] [bug] [cymysql] </strong></span>Fixed bug in cymysql dialect where a version string such as
<tt class="docutils literal"><span class="pre">'33a-MariaDB'</span></tt> would fail to parse properly.  Pull request
courtesy Matt Schmidt.<a class="changeset-link headerlink reference internal" href="#change-cec15bf8dc76d9d68418cad966e2a9f1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2934">#2934</a>, <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/69">pull request github:69</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.3-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-21"><span class="target" id="change-daa887aa6b3dccbb6a979e6d7ecfd2cb"><strong>[sqlite] [bug] </strong></span>The SQLite dialect will now skip unsupported arguments when reflecting
types; such as if it encounters a string like <tt class="docutils literal"><span class="pre">INTEGER(5)</span></tt>, the
<a class="reference internal" href="../dialects/drizzle.html#sqlalchemy.dialects.drizzle.INTEGER" title="sqlalchemy.dialects.drizzle.INTEGER"><tt class="xref py py-class docutils literal"><span class="pre">INTEGER</span></tt></a> type will be instantiated without the &#8220;5&#8221; being included,
based on detecting a <tt class="docutils literal"><span class="pre">TypeError</span></tt> on the first attempt.<a class="changeset-link headerlink reference internal" href="#change-daa887aa6b3dccbb6a979e6d7ecfd2cb">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.3-22"><span class="target" id="change-c8dda32a20ab1a2a6020cd0b56a025cf"><strong>[sqlite] [bug] </strong></span>Support has been added to SQLite type reflection to fully support
the &#8220;type affinity&#8221; contract specified at <a class="reference external" href="http://www.sqlite.org/datatype3.html">http://www.sqlite.org/datatype3.html</a>.
In this scheme, keywords like <tt class="docutils literal"><span class="pre">INT</span></tt>, <tt class="docutils literal"><span class="pre">CHAR</span></tt>, <tt class="docutils literal"><span class="pre">BLOB</span></tt> or
<tt class="docutils literal"><span class="pre">REAL</span></tt> located in the type name generically associate the type with
one of five affinities.  Pull request courtesy Erich Blume.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../dialects/sqlite.html#sqlite-type-reflection"><em>Type Reflection</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-c8dda32a20ab1a2a6020cd0b56a025cf">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/65">pull request github:65</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-misc">
<h3>misc<a class="headerlink" href="#change-0.9.3-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-23"><span class="target" id="change-6e2fa11bc1b490afa61009b74983d414"><strong>[feature] [examples] </strong></span>Added optional &#8220;changed&#8221; column to the versioned rows example, as well
as support for when the versioned <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a> has an explicit
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><tt class="xref py py-paramref docutils literal"><span class="pre">schema</span></tt></a> argument.   Pull request
courtesy jplaverdure.<a class="changeset-link headerlink reference internal" href="#change-6e2fa11bc1b490afa61009b74983d414">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/41">pull request github:41</a></p>
</p>
</li>
<li><p id="change-0.9.3-24"><span class="target" id="change-30674584c851329f071d2f6c65eb6630"><strong>[bug] [ext] </strong></span>Fixed bug where the <a class="reference internal" href="../orm/extensions/automap.html#sqlalchemy.ext.automap.AutomapBase" title="sqlalchemy.ext.automap.AutomapBase"><tt class="xref py py-class docutils literal"><span class="pre">AutomapBase</span></tt></a> class of the
new automap extension would fail if classes
were pre-arranged in single or potentially joined inheritance patterns.
The repaired joined inheritance issue could also potentially apply when
using <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><tt class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></tt></a> as well.<a class="changeset-link headerlink reference internal" href="#change-30674584c851329f071d2f6c65eb6630">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.2">
<h2>0.9.2<a class="headerlink" href="#change-0.9.2" title="Permalink to this headline">¶</a></h2>
Released: February 2, 2014<div class="section" id="change-0.9.2-orm">
<h3>orm<a class="headerlink" href="#change-0.9.2-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-0"><span class="target" id="change-2dc2e780e8373cbbb7b3d14048f7f7dd"><strong>[orm] [feature] </strong></span>Added a new parameter <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.op.params.is_comparison" title="sqlalchemy.sql.operators.Operators.op"><tt class="xref py py-paramref docutils literal"><span class="pre">Operators.op.is_comparison</span></tt></a>.  This
flag allows a custom op from <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.op" title="sqlalchemy.sql.operators.Operators.op"><tt class="xref py py-meth docutils literal"><span class="pre">Operators.op()</span></tt></a> to be considered
as a &#8220;comparison&#8221; operator, thus usable for custom
<a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><tt class="xref py py-paramref docutils literal"><span class="pre">relationship.primaryjoin</span></tt></a> conditions.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../orm/relationships.html#relationship-custom-operator"><em>Using custom operators in join conditions</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-2dc2e780e8373cbbb7b3d14048f7f7dd">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-1"><span class="target" id="change-a8b3a5b9943f34a153c535d66ec180f9"><strong>[orm] [feature] </strong></span>Support is improved for supplying a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.join" title="sqlalchemy.sql.expression.join"><tt class="xref py py-func docutils literal"><span class="pre">join()</span></tt></a> construct as the
target of <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><tt class="xref py py-paramref docutils literal"><span class="pre">relationship.secondary</span></tt></a> for the purposes
of creating very complex <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> join conditions.
The change includes adjustments to query joining, joined eager loading
to not render a SELECT subquery, changes to lazy loading such that
the &#8220;secondary&#8221; target is properly included in the SELECT, and
changes to declarative to better support specification of a
join() object with classes as targets.<p>The new use case is somewhat experimental, but a new documentation section
has been added.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../orm/relationships.html#composite-secondary-join"><em>Composite &#8220;Secondary&#8221; Joins</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-a8b3a5b9943f34a153c535d66ec180f9">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-2"><span class="target" id="change-1c3f8f5feedf0bfccec2acf81dc4d612"><strong>[orm] [bug] </strong></span>Fixed error message when an iterator object is passed to
<a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><tt class="xref py py-func docutils literal"><span class="pre">class_mapper()</span></tt></a> or similar, where the error would fail to
render on string formatting.  Pullreq courtesy Kyle Stark.<a class="changeset-link headerlink reference internal" href="#change-1c3f8f5feedf0bfccec2acf81dc4d612">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/58">pull request github:58</a></p>
</p>
</li>
<li><p id="change-0.9.2-3"><span class="target" id="change-87563ee95139d715f8d0326c80758a47"><strong>[orm] [bug] </strong></span>Fixed bug in new <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><tt class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></tt></a> construct where <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a>-
oriented row lookups were not matching up to the ad-hoc <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><tt class="xref py py-class docutils literal"><span class="pre">ColumnClause</span></tt></a>
objects that <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><tt class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></tt></a> generates, thereby making it not
usable as a target in <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.from_statement" title="sqlalchemy.orm.query.Query.from_statement"><tt class="xref py py-meth docutils literal"><span class="pre">Query.from_statement()</span></tt></a>.  Also fixed
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.from_statement" title="sqlalchemy.orm.query.Query.from_statement"><tt class="xref py py-meth docutils literal"><span class="pre">Query.from_statement()</span></tt></a> mechanics to not mistake a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><tt class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></tt></a>
for a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt></a> construct.  This bug is also an 0.9 regression
as the <tt class="xref py py-meth docutils literal"><span class="pre">Text.columns()</span></tt> method is called to accommodate the
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text.params.typemap" title="sqlalchemy.sql.expression.text"><tt class="xref py py-paramref docutils literal"><span class="pre">text.typemap</span></tt></a> argument.<a class="changeset-link headerlink reference internal" href="#change-87563ee95139d715f8d0326c80758a47">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2932">#2932</a></p>
</p>
</li>
<li><p id="change-0.9.2-4"><span class="target" id="change-6dde90e6801f9bdf0bec0d5ba49cd086"><strong>[orm] [bug] </strong></span>Added a new directive used within the scope of an attribute &#8220;set&#8221; operation
to disable autoflush, in the case that the attribute needs to lazy-load
the &#8220;old&#8221; value, as in when replacing one-to-one values or some
kinds of many-to-one.  A flush at this point otherwise occurs
at the point that the attribute is None and can cause NULL violations.<a class="changeset-link headerlink reference internal" href="#change-6dde90e6801f9bdf0bec0d5ba49cd086">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2921">#2921</a></p>
</p>
</li>
<li><p id="change-0.9.2-5"><span class="target" id="change-03749d6f654c1889673b5e0c12e79baf"><strong>[orm] [bug] </strong></span>Fixed an 0.9 regression where the automatic aliasing applied by
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> and in other situations where selects or joins
were aliased (such as joined table inheritance) could fail if a
user-defined <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> subclass were used in the expression.
In this case, the subclass would fail to propagate ORM-specific
&#8220;annotations&#8221; along needed by the adaptation.  The &#8220;expression
annotations&#8221; system has been corrected to account for this case.<a class="changeset-link headerlink reference internal" href="#change-03749d6f654c1889673b5e0c12e79baf">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2918">#2918</a></p>
</p>
</li>
<li><p id="change-0.9.2-6"><span class="target" id="change-c0f8554831a29dce282bda7f4a1fced7"><strong>[orm] [bug] </strong></span>Fixed a bug involving the new flattened JOIN structures which
are used with <a class="reference internal" href="../orm/loading.html#sqlalchemy.orm.joinedload" title="sqlalchemy.orm.joinedload"><tt class="xref py py-func docutils literal"><span class="pre">joinedload()</span></tt></a> (thereby causing a regression
in joined eager loading) as well as <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><tt class="xref py py-func docutils literal"><span class="pre">aliased()</span></tt></a>
in conjunction with the <tt class="docutils literal"><span class="pre">flat=True</span></tt> flag and joined-table inheritance;
basically multiple joins across a &#8220;parent JOIN sub&#8221; entity using different
paths to get to a target class wouldn&#8217;t form the correct ON conditions.
An adjustment / simplification made in the mechanics of figuring
out the &#8220;left side&#8221; of the join in the case of an aliased, joined-inh
class repairs the issue.<a class="changeset-link headerlink reference internal" href="#change-c0f8554831a29dce282bda7f4a1fced7">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2908">#2908</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-engine">
<h3>engine<a class="headerlink" href="#change-0.9.2-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-7"><span class="target" id="change-8b18bdd2f4b3ca051745c279938e63c4"><strong>[engine] [feature] [pool] </strong></span>Added a new pool event <a class="reference internal" href="../core/events.html#sqlalchemy.events.PoolEvents.invalidate" title="sqlalchemy.events.PoolEvents.invalidate"><tt class="xref py py-meth docutils literal"><span class="pre">PoolEvents.invalidate()</span></tt></a>.  Called when
a DBAPI connection is to be marked as &#8220;invaldated&#8221; and discarded
from the pool.<a class="changeset-link headerlink reference internal" href="#change-8b18bdd2f4b3ca051745c279938e63c4">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-sql">
<h3>sql<a class="headerlink" href="#change-0.9.2-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-8"><span class="target" id="change-4f8918d438f70e33f0202a0ebf9ab58b"><strong>[sql] [feature] </strong></span>Added <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect.params.**dialect_kwargs" title="sqlalchemy.schema.MetaData.reflect"><tt class="xref py py-paramref docutils literal"><span class="pre">MetaData.reflect.**dialect_kwargs</span></tt></a>
to support dialect-level reflection options for all <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a>
objects reflected.<a class="changeset-link headerlink reference internal" href="#change-4f8918d438f70e33f0202a0ebf9ab58b">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-9"><span class="target" id="change-7a930bef6cc4cbf8fd14845482204265"><strong>[sql] [feature] </strong></span>Added a new feature which allows automated naming conventions to be
applied to <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><tt class="xref py py-class docutils literal"><span class="pre">Constraint</span></tt></a> and <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> objects.  Based
on a recipe in the wiki, the new feature uses schema-events to set up
names as various schema objects are associated with each other.  The
events then expose a configuration system through a new argument
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><tt class="xref py py-paramref docutils literal"><span class="pre">MetaData.naming_convention</span></tt></a>.  This system allows production
of both simple and custom naming schemes for constraints and indexes
on a per-<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt></a> basis.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../core/constraints.html#constraint-naming-conventions"><em>Configuring Constraint Naming Conventions</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-7a930bef6cc4cbf8fd14845482204265">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2923">#2923</a></p>
</p>
</li>
<li><p id="change-0.9.2-10"><span class="target" id="change-87912ddc5217c8d309bca24da22147bb"><strong>[sql] [feature] </strong></span>Options can now be specified on a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a> object
independently of the specification of columns in the table with
the <tt class="docutils literal"><span class="pre">primary_key=True</span></tt> flag; use a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a>
object with no columns in it to achieve this result.<p>Previously, an explicit <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a> would have the
effect of those columns marked as <tt class="docutils literal"><span class="pre">primary_key=True</span></tt> being ignored;
since this is no longer the case, the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a>
will now assert that either one style or the other is used to specify
the columns, or if both are present, that the column lists match
exactly.  If an inconsistent set of columns in the
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a>
and within the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a> marked as <tt class="docutils literal"><span class="pre">primary_key=True</span></tt> are
present, a warning is emitted, and the list of columns is taken
only from the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a> alone as was the case
in previous releases.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-87912ddc5217c8d309bca24da22147bb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2910">#2910</a></p>
</p>
</li>
<li><p id="change-0.9.2-11"><span class="target" id="change-2df4f7fe29c0f5aa2f957f4a89b0d74d"><strong>[sql] [feature] </strong></span>The system by which schema constructs and certain SQL constructs
accept dialect-specific keyword arguments has been enhanced.  This
system includes commonly the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a> and <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> constructs,
which accept a wide variety of dialect-specific arguments such as
<tt class="docutils literal"><span class="pre">mysql_engine</span></tt> and <tt class="docutils literal"><span class="pre">postgresql_where</span></tt>, as well as the constructs
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a>, <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><tt class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></tt></a>,
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><tt class="xref py py-class docutils literal"><span class="pre">Update</span></tt></a>, <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><tt class="xref py py-class docutils literal"><span class="pre">Insert</span></tt></a> and <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><tt class="xref py py-class docutils literal"><span class="pre">Delete</span></tt></a>, and also
newly added kwarg capability to <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt></a>
and <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>.  The change is that participating dialects
can now specify acceptable argument lists for these constructs, allowing
an argument error to be raised if an invalid keyword is specified for
a particular dialect.  If the dialect portion of the keyword is unrecognized,
a warning is emitted only; while the system will actually make use
of setuptools entrypoints in order to locate non-local dialects,
the use case where certain dialect-specific arguments are used
in an environment where that third-party dialect is uninstalled remains
supported.  Dialects also have to explicitly opt-in to this system,
so that external dialects which aren&#8217;t making use of this system
will remain unaffected.<a class="changeset-link headerlink reference internal" href="#change-2df4f7fe29c0f5aa2f957f4a89b0d74d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2866">#2866</a></p>
</p>
</li>
<li><p id="change-0.9.2-12"><span class="target" id="change-d4cf4109c92f5c593c0eb29a55e23b2f"><strong>[sql] [bug] </strong></span>The behavior of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><tt class="xref py py-meth docutils literal"><span class="pre">Table.tometadata()</span></tt></a> has been adjusted such that
the schema target of a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> will not be changed unless
that schema matches that of the parent table.  That is, if
a table &#8220;schema_a.user&#8221; has a foreign key to &#8220;schema_b.order.id&#8221;,
the &#8220;schema_b&#8221; target will be maintained whether or not the
&#8220;schema&#8221; argument is passed to <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><tt class="xref py py-meth docutils literal"><span class="pre">Table.tometadata()</span></tt></a>.  However
if a table &#8220;schema_a.user&#8221; refers to &#8220;schema_a.order.id&#8221;, the presence
of &#8220;schema_a&#8221; will be updated on both the parent and referred tables.
This is a behavioral change hence isn&#8217;t likely to be backported to
0.8; it is assumed that the previous behavior is pretty buggy
however and that it&#8217;s unlikely anyone was relying upon it.<p>Additionally, a new parameter has been added
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.tometadata.params.referred_schema_fn" title="sqlalchemy.schema.Table.tometadata"><tt class="xref py py-paramref docutils literal"><span class="pre">Table.tometadata.referred_schema_fn</span></tt></a>.  This refers to a
callable function which will be used to determine the new referred
schema for any <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt></a> encountered in the
tometadata operation.  This callable can be used to revert to the
previous behavior or to customize how referred schemas are treated
on a per-constraint basis.</p>
<a class="changeset-link headerlink reference internal" href="#change-d4cf4109c92f5c593c0eb29a55e23b2f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2913">#2913</a></p>
</p>
</li>
<li><p id="change-0.9.2-13"><span class="target" id="change-a2d477b9294340f7ec81a1b359bee6cc"><strong>[sql] [bug] </strong></span>Fixed bug whereby binary type would fail in some cases
if used with a &#8220;test&#8221; dialect, such as a DefaultDialect or other
dialect with no DBAPI.<a class="changeset-link headerlink reference internal" href="#change-a2d477b9294340f7ec81a1b359bee6cc">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-14"><span class="target" id="change-f7ed7a7bdd579cfb59afaf713ec2da5c"><strong>[sql] [bug] [py3k] </strong></span>Fixed bug where &#8220;literal binds&#8221; wouldn&#8217;t work with a bound parameter
that&#8217;s a binary type.  A similar, but different, issue is fixed
in 0.8.<a class="changeset-link headerlink reference internal" href="#change-f7ed7a7bdd579cfb59afaf713ec2da5c">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-15"><span class="target" id="change-182243baf075d92a029213dbd8041026"><strong>[sql] [bug] </strong></span>Fixed regression whereby the &#8220;annotation&#8221; system used by the ORM was leaking
into the names used by standard functions in <a class="reference internal" href="../core/functions.html#module-sqlalchemy.sql.functions" title="sqlalchemy.sql.functions"><tt class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.sql.functions</span></tt></a>,
such as <tt class="docutils literal"><span class="pre">func.coalesce()</span></tt> and <tt class="docutils literal"><span class="pre">func.max()</span></tt>.  Using these functions
in ORM attributes and thus producing annotated versions of them could
corrupt the actual function name rendered in the SQL.<a class="changeset-link headerlink reference internal" href="#change-182243baf075d92a029213dbd8041026">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2927">#2927</a></p>
</p>
</li>
<li><p id="change-0.9.2-16"><span class="target" id="change-3fe73b94064bab8326605943165bdf71"><strong>[sql] [bug] </strong></span>Fixed 0.9 regression where the new sortable support for <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><tt class="xref py py-class docutils literal"><span class="pre">RowProxy</span></tt></a>
would lead to <tt class="docutils literal"><span class="pre">TypeError</span></tt> when compared to non-tuple types as it attempted
to apply tuple() to the &#8220;other&#8221; object unconditionally.  The
full range of Python comparison operators have now been implemented on
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><tt class="xref py py-class docutils literal"><span class="pre">RowProxy</span></tt></a>, using an approach that guarantees a comparison
system that is equivalent to that of a tuple, and the &#8220;other&#8221; object
is only coerced if it&#8217;s an instance of RowProxy.<a class="changeset-link headerlink reference internal" href="#change-3fe73b94064bab8326605943165bdf71">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2924">#2924</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2848">#2848</a></p>
</p>
</li>
<li><p id="change-0.9.2-17"><span class="target" id="change-808b13e7a37e3b773154107db0509031"><strong>[sql] [bug] </strong></span>A <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><tt class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></tt></a> created inline with a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a>
that has no columns within it will be skipped.  Pullreq courtesy
Derek Harland.<a class="changeset-link headerlink reference internal" href="#change-808b13e7a37e3b773154107db0509031">¶</a><p>References: <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/11">pull request bitbucket:11</a></p>
</p>
</li>
<li><p id="change-0.9.2-18"><span class="target" id="change-e78b46088d529294a0abdee2cd8fe000"><strong>[sql] [bug] [orm] </strong></span>Fixed the multiple-table &#8220;UPDATE..FROM&#8221; construct, only usable on
MySQL, to correctly render the SET clause among multiple columns
with the same name across tables.  This also changes the name used for
the bound parameter in the SET clause to &#8220;&lt;tablename&gt;_&lt;colname&gt;&#8221; for
the non-primary table only; as this parameter is typically specified
using the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> object directly this should not have an
impact on applications.   The fix takes effect for both
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.update" title="sqlalchemy.schema.Table.update"><tt class="xref py py-meth docutils literal"><span class="pre">Table.update()</span></tt></a> as well as <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><tt class="xref py py-meth docutils literal"><span class="pre">Query.update()</span></tt></a> in the ORM.<a class="changeset-link headerlink reference internal" href="#change-e78b46088d529294a0abdee2cd8fe000">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2912">#2912</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-schema">
<h3>schema<a class="headerlink" href="#change-0.9.2-schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-19"><span class="target" id="change-3a49a58c161e46ce5b9d89e2758041b3"><strong>[schema] [bug] </strong></span>Restored <tt class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema.SchemaVisitor</span></tt> to the <tt class="docutils literal"><span class="pre">.schema</span></tt>
module.  Pullreq courtesy Sean Dague.<a class="changeset-link headerlink reference internal" href="#change-3a49a58c161e46ce5b9d89e2758041b3">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/57">pull request github:57</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.2-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-20"><span class="target" id="change-aff5edc2e351865134d3aecbac9ae00d"><strong>[postgresql] [feature] </strong></span>Added a new dialect-level argument <tt class="docutils literal"><span class="pre">postgresql_ignore_search_path</span></tt>;
this argument is accepted by both the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a> constructor
as well as by the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><tt class="xref py py-meth docutils literal"><span class="pre">MetaData.reflect()</span></tt></a> method.  When in use
against Postgresql, a foreign-key referenced table which specifies
a remote schema name will retain that schema name even if the name
is present in the <tt class="docutils literal"><span class="pre">search_path</span></tt>; the default behavior since 0.7.3
has been that schemas present in <tt class="docutils literal"><span class="pre">search_path</span></tt> would not be copied
to reflected <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> objects.  The documentation has been
updated to describe in detail the behavior of the <tt class="docutils literal"><span class="pre">pg_get_constraintdef()</span></tt>
function and how the <tt class="docutils literal"><span class="pre">postgresql_ignore_search_path</span></tt> feature essentially
determines if we will honor the schema qualification reported by
this function or not.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../dialects/postgresql.html#postgresql-schema-reflection"><em>Remote-Schema Table Introspection and Postgresql search_path</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-aff5edc2e351865134d3aecbac9ae00d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2922">#2922</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.2-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-21"><span class="target" id="change-c9d1183ac37b97cd9bba811e075e7ee1"><strong>[mysql] [bug] </strong></span>Some missing methods added to the cymysql dialect, including
_get_server_version_info() and _detect_charset().  Pullreq
courtesy Hajime Nakagami.<a class="changeset-link headerlink reference internal" href="#change-c9d1183ac37b97cd9bba811e075e7ee1">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/61">pull request github:61</a></p>
</p>
</li>
<li><p id="change-0.9.2-22"><span class="target" id="change-c46c51b91fba93f95b0a32692149e285"><strong>[mysql] [bug] [sql] </strong></span>Added new test coverage for so-called &#8220;down adaptions&#8221; of SQL types,
where a more specific type is adapted to a more generic one - this
use case is needed by some third party tools such as <tt class="docutils literal"><span class="pre">sqlacodegen</span></tt>.
The specific cases that needed repair within this test suite were that
of <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.ENUM" title="sqlalchemy.dialects.mysql.ENUM"><tt class="xref py py-class docutils literal"><span class="pre">mysql.ENUM</span></tt></a> being downcast into a <a class="reference internal" href="../core/types.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><tt class="xref py py-class docutils literal"><span class="pre">types.Enum</span></tt></a>,
and that of SQLite date types being cast into generic date types.
The <tt class="docutils literal"><span class="pre">adapt()</span></tt> method needed to become more specific here to counteract
the removal of a &#8220;catch all&#8221; <tt class="docutils literal"><span class="pre">**kwargs</span></tt> collection on the base
<a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><tt class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></tt></a> class that was removed in 0.9.<a class="changeset-link headerlink reference internal" href="#change-c46c51b91fba93f95b0a32692149e285">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2917">#2917</a></p>
</p>
</li>
<li><p id="change-0.9.2-23"><span class="target" id="change-5e11ddb98a45933e5e3e4cc3649b5932"><strong>[mysql] [bug] </strong></span>The MySQL CAST compilation now takes into account aspects of a string
type such as &#8220;charset&#8221; and &#8220;collation&#8221;.  While MySQL wants all character-
based CAST calls to use the CHAR type, we now create a real CHAR
object at CAST time and copy over all the parameters it has, so that
an expression like <tt class="docutils literal"><span class="pre">cast(x,</span> <span class="pre">mysql.TEXT(charset='utf8'))</span></tt> will
render <tt class="docutils literal"><span class="pre">CAST(t.col</span> <span class="pre">AS</span> <span class="pre">CHAR</span> <span class="pre">CHARACTER</span> <span class="pre">SET</span> <span class="pre">utf8)</span></tt>.<a class="changeset-link headerlink reference internal" href="#change-5e11ddb98a45933e5e3e4cc3649b5932">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-24"><span class="target" id="change-5306ccbcd637857024e7f7526badb84e"><strong>[mysql] [bug] </strong></span>Added new &#8220;unicode returns&#8221; detection to the MySQL dialect and
to the default dialect system overall, such that any dialect
can add extra &#8220;tests&#8221; to the on-first-connect &#8220;does this DBAPI
return unicode directly?&#8221; detection. In this case, we are
adding a check specifically against the &#8220;utf8&#8221; encoding with
an explicit &#8220;utf8_bin&#8221; collation type (after checking that
this collation is available) to test for some buggy unicode
behavior observed with MySQLdb version 1.2.3.  While MySQLdb
has resolved this issue as of 1.2.4, the check here should
guard against regressions.  The change also allows the &#8220;unicode&#8221;
checks to log in the engine logs, which was not previously
the case.<a class="changeset-link headerlink reference internal" href="#change-5306ccbcd637857024e7f7526badb84e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2906">#2906</a></p>
</p>
</li>
<li><p id="change-0.9.2-25"><span class="target" id="change-f9af1f23fa7c0156a51404d81df8f88c"><strong>[mysql] [bug] [engine] [pool] </strong></span><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><tt class="xref py py-class docutils literal"><span class="pre">Connection</span></tt></a> now associates a new
<tt class="xref py py-class docutils literal"><span class="pre">RootTransaction</span></tt> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><tt class="xref py py-class docutils literal"><span class="pre">TwoPhaseTransaction</span></tt></a>
with its immediate <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool._ConnectionFairy" title="sqlalchemy.pool._ConnectionFairy"><tt class="xref py py-class docutils literal"><span class="pre">_ConnectionFairy</span></tt></a> as a &#8220;reset handler&#8221;
for the span of that transaction, which takes over the task
of calling commit() or rollback() for the &#8220;reset on return&#8221; behavior
of <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><tt class="xref py py-class docutils literal"><span class="pre">Pool</span></tt></a> if the transaction was not otherwise completed.
This resolves the issue that a picky transaction
like that of MySQL two-phase will be
properly closed out when the connection is closed without an
explicit rollback or commit (e.g. no longer raises &#8220;XAER_RMFAIL&#8221;
in this case - note this only shows up in logging as the exception
is not propagated within pool reset).
This issue would arise e.g. when using an orm
<a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> with <tt class="docutils literal"><span class="pre">twophase</span></tt> set, and then
<a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session.close" title="sqlalchemy.orm.session.Session.close"><tt class="xref py py-meth docutils literal"><span class="pre">Session.close()</span></tt></a> is called without an explicit rollback or
commit.   The change also has the effect that you will now see
an explicit &#8220;ROLLBACK&#8221; in the logs when using a <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>
object in non-autocommit mode regardless of how that session was
discarded.  Thanks to Jeff Dairiki and Laurence Rowe for isolating
the issue here.<a class="changeset-link headerlink reference internal" href="#change-f9af1f23fa7c0156a51404d81df8f88c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2907">#2907</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.2-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-26"><span class="target" id="change-f340e82cab2db7a33792c8734bd3dd2c"><strong>[sqlite] [bug] </strong></span>Fixed bug whereby SQLite compiler failed to propagate compiler arguments
such as &#8220;literal binds&#8221; into a CAST expression.<a class="changeset-link headerlink reference internal" href="#change-f340e82cab2db7a33792c8734bd3dd2c">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.2-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-27"><span class="target" id="change-2f279749d1dbc19d2dcab58b0a56c870"><strong>[mssql] [feature] </strong></span>Added an option <tt class="docutils literal"><span class="pre">mssql_clustered</span></tt> to the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><tt class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></tt></a>
and <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></tt></a> constructs; on SQL Server, this adds
the <tt class="docutils literal"><span class="pre">CLUSTERED</span></tt> keyword to the constraint construct within DDL.
Pullreq courtesy Derek Harland.<a class="changeset-link headerlink reference internal" href="#change-2f279749d1dbc19d2dcab58b0a56c870">¶</a><p>References: <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/11">pull request bitbucket:11</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.2-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-28"><span class="target" id="change-2cd0a6583e825c62477ab7a3d4770de9"><strong>[oracle] [bug] </strong></span>It&#8217;s been observed that the usage of a cx_Oracle &#8220;outputtypehandler&#8221;
in Python 2.xx in order to coerce string values to Unicode is inordinately
expensive; even though cx_Oracle is written in C, when you pass the
Python <tt class="docutils literal"><span class="pre">unicode</span></tt> primitive to cursor.var() and associate with an output
handler, the library counts every conversion as a Python function call
with all the requisite overhead being recorded; this <em>despite</em> the fact
when running in Python 3, all strings are also unconditionally coerced
to unicode but it does <em>not</em> incur this overhead,
meaning that cx_Oracle is failing to use performant techniques in Py2K.
As SQLAlchemy cannot easily select for this style of type handler on a
per-column basis, the handler was assembled unconditionally thereby
adding the overhead to all string access.<p>So this logic has been replaced with SQLAlchemy&#8217;s own unicode
conversion system, which now
only takes effect in Py2K for columns that are requested as unicode.
When C extensions are used, SQLAlchemy&#8217;s system appears to be 2-3x faster than
cx_Oracle&#8217;s.  Additionally, SQLAlchemy&#8217;s unicode conversion has been
enhanced such that when the &#8220;conditional&#8221; converter is required
(now needed for the Oracle backend), the check for &#8220;already unicode&#8221; is now
performed in C and no longer introduces significant overhead.</p>
<p>This change has two impacts on the cx_Oracle backend.  One is that
string values in Py2K which aren&#8217;t specifically requested with the
Unicode type or convert_unicode=True will now come back as <tt class="docutils literal"><span class="pre">str</span></tt>,
not <tt class="docutils literal"><span class="pre">unicode</span></tt> - this behavior is similar to a backend such as
MySQL.  Additionally, when unicode values are requested with the cx_Oracle
backend, if the C extensions are <em>not</em> used, there is now an additional
overhead of an isinstance() check per column.  This tradeoff has been
made as it can be worked around and no longer places a performance burden
on the likely majority of Oracle result columns that are non-unicode
strings.</p>
<a class="changeset-link headerlink reference internal" href="#change-2cd0a6583e825c62477ab7a3d4770de9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2911">#2911</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-misc">
<h3>misc<a class="headerlink" href="#change-0.9.2-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-29"><span class="target" id="change-b3122f01ed7d8d120a8035233320d558"><strong>[bug] [examples] </strong></span>Added a tweak to the &#8220;history_meta&#8221; example where the check for
&#8220;history&#8221; on a relationship-bound attribute will now no longer emit
any SQL if the relationship is unloaded.<a class="changeset-link headerlink reference internal" href="#change-b3122f01ed7d8d120a8035233320d558">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-30"><span class="target" id="change-34c66a5b820b990e8ccde1cb2eee76c2"><strong>[bug] [pool] </strong></span>The argument names for the <a class="reference internal" href="../core/events.html#sqlalchemy.events.PoolEvents.reset" title="sqlalchemy.events.PoolEvents.reset"><tt class="xref py py-meth docutils literal"><span class="pre">PoolEvents.reset()</span></tt></a> event have been
renamed to <tt class="docutils literal"><span class="pre">dbapi_connection</span></tt> and <tt class="docutils literal"><span class="pre">connection_record</span></tt> in order
to maintain consistency with all the other pool events.  It is expected
that any existing listeners for this relatively new and
seldom-used event are using positional style to receive arguments in
any case.<a class="changeset-link headerlink reference internal" href="#change-34c66a5b820b990e8ccde1cb2eee76c2">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-31"><span class="target" id="change-98b1a028c00831d12344a81c2928019c"><strong>[bug] [cextensions] [py3k] </strong></span>Fixed an issue where the C extensions in Py3K are using the wrong API
to specify the top-level module function, which breaks
in Python 3.4b2.  Py3.4b2 changes PyMODINIT_FUNC to return
&#8220;void&#8221; instead of &#8220;PyObject <a href="#id1"><span class="problematic" id="id2">*</span></a>&#8221;, so we now make sure to use
&#8220;PyMODINIT_FUNC&#8221; instead of &#8220;PyObject <a href="#id3"><span class="problematic" id="id4">*</span></a>&#8221; directly.  Pull request
courtesy cgohlke.<a class="changeset-link headerlink reference internal" href="#change-98b1a028c00831d12344a81c2928019c">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/55">pull request github:55</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.1">
<h2>0.9.1<a class="headerlink" href="#change-0.9.1" title="Permalink to this headline">¶</a></h2>
Released: January 5, 2014<div class="section" id="change-0.9.1-orm">
<h3>orm<a class="headerlink" href="#change-0.9.1-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.1-0"><span class="target" id="change-03a1682f97f04e9969b1eedfea573837"><strong>[orm] [feature] [extensions] </strong></span>A new, <strong>experimental</strong> extension <a class="reference internal" href="../orm/extensions/automap.html#module-sqlalchemy.ext.automap" title="sqlalchemy.ext.automap"><tt class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.ext.automap</span></tt></a> is added.
This extension expands upon the functionality of Declarative as well as
the <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><tt class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></tt></a> class to produce a base class which
automatically generates mapped classes <em>and relationships</em> based on
table metadata.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-automap"><em>Automap Extension</em></a></p>
<p class="last"><a class="reference internal" href="../orm/extensions/automap.html"><em>Automap</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-03a1682f97f04e9969b1eedfea573837">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.1-1"><span class="target" id="change-8aeefcaaa4a378dba8faa4278d991e73"><strong>[orm] [bug] [events] </strong></span>Fixed regression where using a <tt class="docutils literal"><span class="pre">functools.partial()</span></tt> with the event
system would cause a recursion overflow due to usage of inspect.getargspec()
on it in order to detect a legacy calling signature for certain events,
and apparently there&#8217;s no way to do this with a partial object.  Instead
we skip the legacy check and assume the modern style; the check itself
now only occurs for the SessionEvents.after_bulk_update and
SessionEvents.after_bulk_delete events.  Those two events will require
the new signature style if assigned to a &#8220;partial&#8221; event listener.<a class="changeset-link headerlink reference internal" href="#change-8aeefcaaa4a378dba8faa4278d991e73">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2905">#2905</a></p>
</p>
</li>
<li><p id="change-0.9.1-2"><span class="target" id="change-590902684e2acb993441b174c1ab59a3"><strong>[orm] [bug] </strong></span>Fixed bug where using new <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><tt class="xref py py-attr docutils literal"><span class="pre">Session.info</span></tt></a> attribute would fail
if the <tt class="docutils literal"><span class="pre">.info</span></tt> argument were only passed to the <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><tt class="xref py py-class docutils literal"><span class="pre">sessionmaker</span></tt></a>
creation call but not to the object itself.  Courtesy Robin Schoonover.<a class="changeset-link headerlink reference internal" href="#change-590902684e2acb993441b174c1ab59a3">¶</a><p>References: <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/9">pull request bitbucket:9</a></p>
</p>
</li>
<li><p id="change-0.9.1-3"><span class="target" id="change-53e42d12ab61af327a7559207a6211b4"><strong>[orm] [bug] </strong></span>Fixed regression where we don&#8217;t check the given name against the
correct string class when setting up a backref based on a name,
therefore causing the error &#8220;too many values to unpack&#8221;.  This was
related to the Py3k conversion.<a class="changeset-link headerlink reference internal" href="#change-53e42d12ab61af327a7559207a6211b4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2901">#2901</a></p>
</p>
</li>
<li><p id="change-0.9.1-4"><span class="target" id="change-48eab507305f1712468f94e36bc07cfb"><strong>[orm] [bug] </strong></span>Fixed regression where we apparently still create an implicit
alias when saying query(B).join(B.cs), where &#8220;C&#8221; is a joined inh
class; however, this implicit alias was created only considering
the immediate left side, and not a longer chain of joins along different
joined-inh subclasses of the same base.   As long as we&#8217;re still
implicitly aliasing in this case, the behavior is dialed back a bit
so that it will alias the right side in a wider variety of cases.<a class="changeset-link headerlink reference internal" href="#change-48eab507305f1712468f94e36bc07cfb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2903">#2903</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.1-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-0.9.1-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.1-5"><span class="target" id="change-0f3dd659714e45e0f577963d43d7d5aa"><strong>[bug] [orm] [declarative] </strong></span>Fixed an extremely unlikely memory issue where when using
<a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><tt class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></tt></a>
to define classes pending for reflection, if some subset of those
classes were discarded before the <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.DeferredReflection.prepare" title="sqlalchemy.ext.declarative.DeferredReflection.prepare"><tt class="xref py py-meth docutils literal"><span class="pre">DeferredReflection.prepare()</span></tt></a>
method were called to reflect and map the class, a strong reference
to the class would remain held within the declarative internals.
This internal collection of &#8220;classes to map&#8221; now uses weak
references against the classes themselves.<a class="changeset-link headerlink reference internal" href="#change-0f3dd659714e45e0f577963d43d7d5aa">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.1-6"><span class="target" id="change-4bf7b34989a71c9289696d84c85cc213"><strong>[bug] [orm] [declarative] </strong></span>A quasi-regression where apparently in 0.8 you can set a class-level
attribute on declarative to simply refer directly to an <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.attributes.InstrumentedAttribute" title="sqlalchemy.orm.attributes.InstrumentedAttribute"><tt class="xref py py-class docutils literal"><span class="pre">InstrumentedAttribute</span></tt></a>
on a superclass or on the class itself, and it
acts more or less like a synonym; in 0.9, this fails to set up enough
bookkeeping to keep up with the more liberalized backref logic
from <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2789">#2789</a>.  Even though this use case was never directly
considered, it is now detected by declarative at the &#8220;setattr()&#8221; level
as well as when setting up a subclass, and the mirrored/renamed attribute
is now set up as a <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><tt class="xref py py-func docutils literal"><span class="pre">synonym()</span></tt></a> instead.<a class="changeset-link headerlink reference internal" href="#change-4bf7b34989a71c9289696d84c85cc213">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2900">#2900</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.1-sql">
<h3>sql<a class="headerlink" href="#change-0.9.1-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.1-7"><span class="target" id="change-e56929f2d249d5a65bd72271366f4ad3"><strong>[sql] [feature] </strong></span>Conjunctions like <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><tt class="xref py py-func docutils literal"><span class="pre">and_()</span></tt></a> and <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><tt class="xref py py-func docutils literal"><span class="pre">or_()</span></tt></a> can now accept
Python generators as a single argument, e.g.:<div class="highlight-python"><div class="highlight"><pre><span class="n">and_</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">tuples</span><span class="p">)</span></pre></div>
</div>
<p>The logic here looks for a single argument <tt class="docutils literal"><span class="pre">*args</span></tt> where the first
element is an instance of <tt class="docutils literal"><span class="pre">types.GeneratorType</span></tt>.</p>
<a class="changeset-link headerlink reference internal" href="#change-e56929f2d249d5a65bd72271366f4ad3">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.1-schema">
<h3>schema<a class="headerlink" href="#change-0.9.1-schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.1-8"><span class="target" id="change-08112f9e5e2d64a1f0236743dbd072a4"><strong>[schema] [feature] </strong></span>The <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><tt class="xref py py-paramref docutils literal"><span class="pre">Table.extend_existing</span></tt></a> and <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.params.autoload_replace" title="sqlalchemy.schema.Table"><tt class="xref py py-paramref docutils literal"><span class="pre">Table.autoload_replace</span></tt></a>
parameters are now available on the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><tt class="xref py py-meth docutils literal"><span class="pre">MetaData.reflect()</span></tt></a>
method.<a class="changeset-link headerlink reference internal" href="#change-08112f9e5e2d64a1f0236743dbd072a4">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.0">
<h2>0.9.0<a class="headerlink" href="#change-0.9.0" title="Permalink to this headline">¶</a></h2>
Released: December 30, 2013<div class="section" id="change-0.9.0-orm">
<h3>orm<a class="headerlink" href="#change-0.9.0-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-0"><span class="target" id="change-6f14ee03b908f78d8d174e7ef588746d"><strong>[orm] [feature] </strong></span>The <tt class="xref py py-class docutils literal"><span class="pre">exc.StatementError</span></tt> or DBAPI-related subclass
now can accommodate additional information about the &#8220;reason&#8221; for
the exception; the <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> now adds some detail to it
when the exception occurs within an autoflush.  This approach
is taken as opposed to combining <tt class="xref py py-class docutils literal"><span class="pre">FlushError</span></tt> with
a Python 3 style &#8220;chained exception&#8221; approach so as to maintain
compatibility both with Py2K code as well as code that already
catches <tt class="docutils literal"><span class="pre">IntegrityError</span></tt> or similar.<a class="changeset-link headerlink reference internal" href="#change-6f14ee03b908f78d8d174e7ef588746d">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-1"><span class="target" id="change-45720dc1b5014ca04cc355970a4a77ae"><strong>[orm] [feature] [backrefs] </strong></span>Added new argument <tt class="docutils literal"><span class="pre">include_backrefs=True</span></tt> to the
<a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.validates" title="sqlalchemy.orm.validates"><tt class="xref py py-func docutils literal"><span class="pre">validates()</span></tt></a> function; when set to False, a validation event
will not be triggered if the event was initated as a backref to
an attribute operation from the other side.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-1535"><em>include_backrefs=False option for &#64;validates</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-45720dc1b5014ca04cc355970a4a77ae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1535">#1535</a></p>
</p>
</li>
<li><p id="change-0.9.0-2"><span class="target" id="change-1144ec1f7338720f8b1ea74ccda5f49b"><strong>[orm] [feature] </strong></span>A new API for specifying the <tt class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></tt> clause of a <tt class="docutils literal"><span class="pre">SELECT</span></tt>
is added with the new <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.with_for_update" title="sqlalchemy.orm.query.Query.with_for_update"><tt class="xref py py-meth docutils literal"><span class="pre">Query.with_for_update()</span></tt></a> method,
to complement the new <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.GenerativeSelect.with_for_update" title="sqlalchemy.sql.expression.GenerativeSelect.with_for_update"><tt class="xref py py-meth docutils literal"><span class="pre">GenerativeSelect.with_for_update()</span></tt></a> method.
Pull request courtesy Mario Lassnig.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-github-42"><em>New FOR UPDATE support on select(), Query()</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-1144ec1f7338720f8b1ea74ccda5f49b">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/42">pull request github:42</a></p>
</p>
</li>
<li><p id="change-0.9.0-3"><span class="target" id="change-596ed6934e304cb10692a3ddea823f90"><strong>[orm] [bug] </strong></span>An adjustment to the <a class="reference internal" href="../orm/loading.html#sqlalchemy.orm.subqueryload" title="sqlalchemy.orm.subqueryload"><tt class="xref py py-func docutils literal"><span class="pre">subqueryload()</span></tt></a> strategy which ensures that
the query runs after the loading process has begun; this is so that
the subqueryload takes precedence over other loaders that may be
hitting the same attribute due to other eager/noload situations
at the wrong time.<a class="changeset-link headerlink reference internal" href="#change-596ed6934e304cb10692a3ddea823f90">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2887">#2887</a></p>
</p>
</li>
<li><p id="change-0.9.0-4"><span class="target" id="change-73f5c9c3d26dc55718454012b0f6cbd7"><strong>[orm] [bug] </strong></span>Fixed bug when using joined table inheritance from a table to a
select/alias on the base, where the PK columns were also not same
named; the persistence system would fail to copy primary key values
from the base table to the inherited table upon INSERT.<a class="changeset-link headerlink reference internal" href="#change-73f5c9c3d26dc55718454012b0f6cbd7">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2885">#2885</a></p>
</p>
</li>
<li><p id="change-0.9.0-5"><span class="target" id="change-87f8c9385495cffe875cfa574f7a3063"><strong>[orm] [bug] </strong></span><a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.composite" title="sqlalchemy.orm.composite"><tt class="xref py py-func docutils literal"><span class="pre">composite()</span></tt></a> will raise an informative error message when the
columns/attribute (names) passed don&#8217;t resolve to a Column or mapped
attribute (such as an erroneous tuple); previously raised an unbound
local.<a class="changeset-link headerlink reference internal" href="#change-87f8c9385495cffe875cfa574f7a3063">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2889">#2889</a></p>
</p>
</li>
<li><p id="change-0.9.0-6"><span class="target" id="change-a97169e0a5e5a559f46bd8e3f7e58fc4"><strong>[orm] [bug] </strong></span>Fixed a regression introduced by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a> where the EXISTS
query being generated would produce a &#8220;columns being replaced&#8221;
warning for a statement with two same-named columns,
as the internal SELECT wouldn&#8217;t have use_labels set.<a class="changeset-link headerlink reference internal" href="#change-a97169e0a5e5a559f46bd8e3f7e58fc4">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a></p>
</p>
</li>
<li><p id="change-0.9.0-7"><span class="target" id="change-c178432e123c26d95767915cfd94145b"><strong>[orm] [bug] [collections] [py3k] </strong></span>Added support for the Python 3 method <tt class="docutils literal"><span class="pre">list.clear()</span></tt> within
the ORM collection instrumentation system; pull request
courtesy Eduardo Schettino.<a class="changeset-link headerlink reference internal" href="#change-c178432e123c26d95767915cfd94145b">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/40">pull request github:40</a></p>
</p>
</li>
<li><p id="change-0.9.0-8"><span class="target" id="change-524c3fc2a92c716633ad362ee5de0c41"><strong>[orm] [bug] </strong></span>Some refinements to the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><tt class="xref py py-class docutils literal"><span class="pre">AliasedClass</span></tt></a> construct with regards
to descriptors, like hybrids, synonyms, composites, user-defined
descriptors, etc.  The attribute
adaptation which goes on has been made more robust, such that if a descriptor
returns another instrumented attribute, rather than a compound SQL
expression element, the operation will still proceed.
Addtionally, the &#8220;adapted&#8221; operator will retain its class; previously,
a change in class from <tt class="docutils literal"><span class="pre">InstrumentedAttribute</span></tt> to <tt class="docutils literal"><span class="pre">QueryableAttribute</span></tt>
(a superclass) would interact with Python&#8217;s operator system such that
an expression like <tt class="docutils literal"><span class="pre">aliased(MyClass.x)</span> <span class="pre">&gt;</span> <span class="pre">MyClass.x</span></tt> would reverse itself
to read <tt class="docutils literal"><span class="pre">myclass.x</span> <span class="pre">&lt;</span> <span class="pre">myclass_1.x</span></tt>.   The adapted attribute will also
refer to the new <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><tt class="xref py py-class docutils literal"><span class="pre">AliasedClass</span></tt></a> as its parent which was not
always the case before.<a class="changeset-link headerlink reference internal" href="#change-524c3fc2a92c716633ad362ee5de0c41">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2872">#2872</a></p>
</p>
</li>
<li><p id="change-0.9.0-9"><span class="target" id="change-cd9ee851b4fed4be44aa3357d3ea656e"><strong>[orm] [bug] </strong></span>The <tt class="docutils literal"><span class="pre">viewonly</span></tt> flag on <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> will now prevent
attribute history from being written on behalf of the target attribute.
This has the effect of the object not being written to the
Session.dirty list if it is mutated.  Previously, the object would
be present in Session.dirty, but no change would take place on behalf
of the modified attribute during flush.   The attribute still emits
events such as backref events and user-defined events and will still
receive mutations from backrefs.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2833"><em>viewonly=True on relationship() prevents history from taking effect</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-cd9ee851b4fed4be44aa3357d3ea656e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2833">#2833</a></p>
</p>
</li>
<li><p id="change-0.9.0-10"><span class="target" id="change-57380df483eb4573627dd0c4cc6285b2"><strong>[orm] [bug] </strong></span>Added support for new <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><tt class="xref py py-attr docutils literal"><span class="pre">Session.info</span></tt></a> attribute to
<a class="reference internal" href="../orm/session.html#sqlalchemy.orm.scoping.scoped_session" title="sqlalchemy.orm.scoping.scoped_session"><tt class="xref py py-class docutils literal"><span class="pre">scoped_session</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-57380df483eb4573627dd0c4cc6285b2">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-11"><span class="target" id="change-74dca08530e2aa7327444a66c6c6d823"><strong>[orm] [bug] </strong></span>Fixed bug where usage of new <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><tt class="xref py py-class docutils literal"><span class="pre">Bundle</span></tt></a> object would cause
the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.column_descriptions" title="sqlalchemy.orm.query.Query.column_descriptions"><tt class="xref py py-attr docutils literal"><span class="pre">Query.column_descriptions</span></tt></a> attribute to fail.<a class="changeset-link headerlink reference internal" href="#change-74dca08530e2aa7327444a66c6c6d823">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-12"><span class="target" id="change-17f42ee3eb7206b1653e3a04460ff2a5"><strong>[orm] [bug] [sqlite] [sql] </strong></span>Fixed a regression introduced by the join rewriting feature of
<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2369">#2369</a> and <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2587">#2587</a> where a nested join with one side
already an aliased select would fail to translate the ON clause on the
outside correctly; in the ORM this could be seen when using a
SELECT statement as a &#8220;secondary&#8221; table.<a class="changeset-link headerlink reference internal" href="#change-17f42ee3eb7206b1653e3a04460ff2a5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2858">#2858</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-0.9.0-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-13"><span class="target" id="change-2160db7c02e08d3477c32ebfe806bf14"><strong>[bug] [orm] [declarative] </strong></span>Declarative does an extra check to detect if the same
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> is mapped multiple times under different properties
(which typically should be a <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><tt class="xref py py-func docutils literal"><span class="pre">synonym()</span></tt></a> instead) or if two
or more <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> objects are given the same name, raising
a warning if this condition is detected.<a class="changeset-link headerlink reference internal" href="#change-2160db7c02e08d3477c32ebfe806bf14">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2828">#2828</a></p>
</p>
</li>
<li><p id="change-0.9.0-14"><span class="target" id="change-93a22c24dfcd871c8f872616c98d3b23"><strong>[bug] [orm] [declarative] </strong></span>The <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><tt class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></tt></a> class has been enhanced to provide
automatic reflection support for the &#8220;secondary&#8221; table referred
to by a <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.   &#8220;secondary&#8221;, when specified
either as a string table name, or as a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a> object with
only a name and <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt></a> object will also be included
in the reflection process when <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.DeferredReflection.prepare" title="sqlalchemy.ext.declarative.DeferredReflection.prepare"><tt class="xref py py-meth docutils literal"><span class="pre">DeferredReflection.prepare()</span></tt></a>
is called.<a class="changeset-link headerlink reference internal" href="#change-93a22c24dfcd871c8f872616c98d3b23">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2865">#2865</a></p>
</p>
</li>
<li><p id="change-0.9.0-15"><span class="target" id="change-abd40b717be4a66e010edbce0f8dacb6"><strong>[bug] [orm] [declarative] </strong></span>Fixed bug where in Py2K a unicode literal would not be accepted
as the string name of a class or other argument within
declarative using <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-abd40b717be4a66e010edbce0f8dacb6">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-engine">
<h3>engine<a class="headerlink" href="#change-0.9.0-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-16"><span class="target" id="change-9e964e2f4332755c2be06fb8dfad0052"><strong>[engine] [feature] </strong></span>The <a class="reference internal" href="../core/engines.html#sqlalchemy.engine_from_config" title="sqlalchemy.engine_from_config"><tt class="xref py py-func docutils literal"><span class="pre">engine_from_config()</span></tt></a> function has been improved so that
we will be able to parse dialect-specific arguments from string
configuration dictionaries.  Dialect classes can now provide their
own list of parameter types and string-conversion routines.
The feature is not yet used by the built-in dialects, however.<a class="changeset-link headerlink reference internal" href="#change-9e964e2f4332755c2be06fb8dfad0052">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2875">#2875</a></p>
</p>
</li>
<li><p id="change-0.9.0-17"><span class="target" id="change-b41267634efb6a5162eca78021998f59"><strong>[engine] [bug] </strong></span>A DBAPI that raises an error on <tt class="docutils literal"><span class="pre">connect()</span></tt> which is not a subclass
of dbapi.Error (such as <tt class="docutils literal"><span class="pre">TypeError</span></tt>, <tt class="docutils literal"><span class="pre">NotImplementedError</span></tt>, etc.)
will propagate the exception unchanged.  Previously,
the error handling specific to the <tt class="docutils literal"><span class="pre">connect()</span></tt> routine would both
inappropriately run the exception through the dialect&#8217;s
<a class="reference internal" href="../core/internals.html#sqlalchemy.engine.interfaces.Dialect.is_disconnect" title="sqlalchemy.engine.interfaces.Dialect.is_disconnect"><tt class="xref py py-meth docutils literal"><span class="pre">Dialect.is_disconnect()</span></tt></a> routine as well as wrap it in
a <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.DBAPIError" title="sqlalchemy.exc.DBAPIError"><tt class="xref py py-class docutils literal"><span class="pre">sqlalchemy.exc.DBAPIError</span></tt></a>.  It is now propagated unchanged
in the same way as occurs within the execute process.<a class="changeset-link headerlink reference internal" href="#change-b41267634efb6a5162eca78021998f59">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2881">#2881</a></p>
</p>
</li>
<li><p id="change-0.9.0-18"><span class="target" id="change-af2f363b02c9b82d6729e8e1c808d636"><strong>[engine] [bug] [pool] </strong></span>The <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><tt class="xref py py-class docutils literal"><span class="pre">QueuePool</span></tt></a> has been enhanced to not block new connection
attempts when an existing connection attempt is blocking.  Previously,
the production of new connections was serialized within the block
that monitored overflow; the overflow counter is now altered within
its own critical section outside of the connection process itself.<a class="changeset-link headerlink reference internal" href="#change-af2f363b02c9b82d6729e8e1c808d636">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2880">#2880</a></p>
</p>
</li>
<li><p id="change-0.9.0-19"><span class="target" id="change-33f71100778b84fb526ebd50c7e9468d"><strong>[engine] [bug] [pool] </strong></span>Made a slight adjustment to the logic which waits for a pooled
connection to be available, such that for a connection pool
with no timeout specified, it will every half a second break out of
the wait to check for the so-called &#8220;abort&#8221; flag, which allows the
waiter to break out in case the whole connection pool was dumped;
normally the waiter should break out due to a notify_all() but it&#8217;s
possible this notify_all() is missed in very slim cases.
This is an extension of logic first introduced in 0.8.0, and the
issue has only been observed occasionally in stress tests.<a class="changeset-link headerlink reference internal" href="#change-33f71100778b84fb526ebd50c7e9468d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2522">#2522</a></p>
</p>
</li>
<li><p id="change-0.9.0-20"><span class="target" id="change-d789c97206bbfdf6d74064846660d3db"><strong>[engine] [bug] </strong></span>Fixed bug where SQL statement would be improperly ASCII-encoded
when a pre-DBAPI <tt class="xref py py-class docutils literal"><span class="pre">StatementError</span></tt> were raised within
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><tt class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></tt></a>, causing encoding errors for
non-ASCII statements.  The stringification now remains within
Python unicode thus avoiding encoding errors.<a class="changeset-link headerlink reference internal" href="#change-d789c97206bbfdf6d74064846660d3db">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2871">#2871</a></p>
</p>
</li>
<li><p id="change-0.9.0-21"><span class="target" id="change-54ee80068e58a88b092a47a6ddd0353d"><strong>[engine] [bug] </strong></span>The <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><tt class="xref py py-func docutils literal"><span class="pre">create_engine()</span></tt></a> routine and the related
<a class="reference internal" href="../core/engines.html#sqlalchemy.engine.url.make_url" title="sqlalchemy.engine.url.make_url"><tt class="xref py py-func docutils literal"><span class="pre">make_url()</span></tt></a> function no longer considers the <tt class="docutils literal"><span class="pre">+</span></tt> sign
to be a space within the password field.  The parsing has been
adjuted to match RFC 1738 exactly, in that both <tt class="docutils literal"><span class="pre">username</span></tt>
and <tt class="docutils literal"><span class="pre">password</span></tt> expect only <tt class="docutils literal"><span class="pre">:</span></tt>, <tt class="docutils literal"><span class="pre">&#64;</span></tt>, and <tt class="docutils literal"><span class="pre">/</span></tt> to be
encoded.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2873"><em>The &#8220;password&#8221; portion of a create_engine() no longer considers the + sign as an encoded space</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-54ee80068e58a88b092a47a6ddd0353d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2873">#2873</a></p>
</p>
</li>
<li><p id="change-0.9.0-22"><span class="target" id="change-cc0ce586ee4b6d177eb5504dadba1feb"><strong>[engine] [bug] </strong></span>The <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><tt class="xref py py-class docutils literal"><span class="pre">RowProxy</span></tt></a> object is now sortable in Python as a regular
tuple is; this is accomplished via ensuring tuple() conversion on
both sides within the <tt class="docutils literal"><span class="pre">__eq__()</span></tt> method as well as
the addition of a <tt class="docutils literal"><span class="pre">__lt__()</span></tt> method.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2848"><em>RowProxy now has tuple-sorting behavior</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-cc0ce586ee4b6d177eb5504dadba1feb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2848">#2848</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-sql">
<h3>sql<a class="headerlink" href="#change-0.9.0-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-23"><span class="target" id="change-434eede0d7c5ab434a2634bb1c477426"><strong>[sql] [feature] </strong></span>New improvements to the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> construct, including
more flexible ways to set up bound parameters and return types;
in particular, a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> can now be turned into a full
FROM-object, embeddable in other statements as an alias or CTE
using the new method <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.TextClause.columns" title="sqlalchemy.sql.expression.TextClause.columns"><tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt></a>.   The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a>
construct can also render &#8220;inline&#8221; bound parameters when the construct
is compiled in a &#8220;literal bound&#8221; context.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-2877"><em>New text() Capabilities</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-434eede0d7c5ab434a2634bb1c477426">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2882">#2882</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2877">#2877</a></p>
</p>
</li>
<li><p id="change-0.9.0-24"><span class="target" id="change-80575a82c6ca1e11cdf9bba117d2a012"><strong>[sql] [feature] </strong></span>A new API for specifying the <tt class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></tt> clause of a <tt class="docutils literal"><span class="pre">SELECT</span></tt>
is added with the new <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.GenerativeSelect.with_for_update" title="sqlalchemy.sql.expression.GenerativeSelect.with_for_update"><tt class="xref py py-meth docutils literal"><span class="pre">GenerativeSelect.with_for_update()</span></tt></a> method.
This method supports a more straightforward system of setting
dialect-specific options compared to the <tt class="docutils literal"><span class="pre">for_update</span></tt> keyword
argument of <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>, and also includes support for the
SQL standard <tt class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span> <span class="pre">OF</span></tt> clause.   The ORM also includes
a new corresponding method <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.with_for_update" title="sqlalchemy.orm.query.Query.with_for_update"><tt class="xref py py-meth docutils literal"><span class="pre">Query.with_for_update()</span></tt></a>.
Pull request courtesy Mario Lassnig.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-github-42"><em>New FOR UPDATE support on select(), Query()</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-80575a82c6ca1e11cdf9bba117d2a012">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/42">pull request github:42</a></p>
</p>
</li>
<li><p id="change-0.9.0-25"><span class="target" id="change-b05ab8cbc93a69cb1072bcae721b4ec6"><strong>[sql] [feature] </strong></span>The precision used when coercing a returned floating point value to
Python <tt class="docutils literal"><span class="pre">Decimal</span></tt> via string is now configurable.  The
flag <tt class="docutils literal"><span class="pre">decimal_return_scale</span></tt> is now supported by all <a class="reference internal" href="../core/types.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><tt class="xref py py-class docutils literal"><span class="pre">Numeric</span></tt></a>
and <a class="reference internal" href="../core/types.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><tt class="xref py py-class docutils literal"><span class="pre">Float</span></tt></a> types, which will ensure this many digits are taken
from the native floating point value when it is converted to string.
If not present, the type will make use of the value of <tt class="docutils literal"><span class="pre">.scale</span></tt>, if
the type supports this setting and it is non-None.  Otherwise the original
default length of 10 is used.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-2867"><em>Floating Point String-Conversion Precision Configurable for Native Floating Point Types</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-b05ab8cbc93a69cb1072bcae721b4ec6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2867">#2867</a></p>
</p>
</li>
<li><p id="change-0.9.0-26"><span class="target" id="change-17f346ee6ecd1268fbc24fa52ca6fbb7"><strong>[sql] [bug] </strong></span>Fixed issue where a primary key column that has a Sequence on it,
yet the column is not the &#8220;auto increment&#8221; column, either because
it has a foreign key constraint or <tt class="docutils literal"><span class="pre">autoincrement=False</span></tt> set,
would attempt to fire the Sequence on INSERT for backends that don&#8217;t
support sequences, when presented with an INSERT missing the primary
key value.  This would take place on non-sequence backends like
SQLite, MySQL.<a class="changeset-link headerlink reference internal" href="#change-17f346ee6ecd1268fbc24fa52ca6fbb7">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2896">#2896</a></p>
</p>
</li>
<li><p id="change-0.9.0-27"><span class="target" id="change-8201a57e8a671eba9a5e14fb1d129e71"><strong>[sql] [bug] </strong></span>Fixed bug with <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><tt class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></tt></a> method where the order
of the given names would not be taken into account when generating
the INSERT statement, thus producing a mismatch versus the column
names in the given SELECT statement.  Also noted that
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><tt class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></tt></a> implies that Python-side insert defaults
cannot be used, since the statement has no VALUES clause.<a class="changeset-link headerlink reference internal" href="#change-8201a57e8a671eba9a5e14fb1d129e71">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2895">#2895</a></p>
</p>
</li>
<li><p id="change-0.9.0-28"><span class="target" id="change-dd267693c4318fbd71e8ff2f00c3839c"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt></a> function, when given a plain literal value,
will now apply the given type to the given literal value on the
bind parameter side according to the type given to the cast,
in the same manner as that of the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><tt class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></tt></a> function.
However unlike <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><tt class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></tt></a>, this only takes effect if a
non-clauseelement value is passed to <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt></a>; an existing typed
construct will retain its type.<a class="changeset-link headerlink reference internal" href="#change-dd267693c4318fbd71e8ff2f00c3839c">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-29"><span class="target" id="change-8089bd064566ab520c8d752d8f44b7ea"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> class more aggressively checks the given
column argument.   If not a string, it checks that the object is
at least a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><tt class="xref py py-class docutils literal"><span class="pre">ColumnClause</span></tt></a>, or an object that resolves to one,
and that the <tt class="docutils literal"><span class="pre">.table</span></tt> attribute, if present, refers to a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><tt class="xref py py-class docutils literal"><span class="pre">TableClause</span></tt></a> or subclass, and not something like an
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Alias" title="sqlalchemy.sql.expression.Alias"><tt class="xref py py-class docutils literal"><span class="pre">Alias</span></tt></a>.  Otherwise, a <tt class="xref py py-class docutils literal"><span class="pre">ArgumentError</span></tt> is raised.<a class="changeset-link headerlink reference internal" href="#change-8089bd064566ab520c8d752d8f44b7ea">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2883">#2883</a></p>
</p>
</li>
<li><p id="change-0.9.0-30"><span class="target" id="change-fb4da0d066ca932a5f91af14f8541994"><strong>[sql] [bug] </strong></span>The precedence rules for the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.collate" title="sqlalchemy.sql.operators.ColumnOperators.collate"><tt class="xref py py-meth docutils literal"><span class="pre">ColumnOperators.collate()</span></tt></a> operator
have been modified, such that the COLLATE operator is now of lower
precedence than the comparison operators.  This has the effect that
a COLLATE applied to a comparison will not render parenthesis
around the comparison, which is not parsed by backends such as
MSSQL.  The change is backwards incompatible for those setups that
were working around the issue by applying <tt class="xref py py-meth docutils literal"><span class="pre">Operators.collate()</span></tt>
to an individual element of the comparison expression,
rather than the comparison expression as a whole.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2879"><em>The precedence rules for COLLATE have been changed</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-fb4da0d066ca932a5f91af14f8541994">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2879">#2879</a></p>
</p>
</li>
<li><p id="change-0.9.0-31"><span class="target" id="change-55d6c5d7c76b54deb2d68f5e6ee4e501"><strong>[sql] [enhancement] </strong></span>The exception raised when a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><tt class="xref py py-class docutils literal"><span class="pre">BindParameter</span></tt></a> is present
in a compiled statement without a value now includes the key name
of the bound parameter in the error message.<a class="changeset-link headerlink reference internal" href="#change-55d6c5d7c76b54deb2d68f5e6ee4e501">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-schema">
<h3>schema<a class="headerlink" href="#change-0.9.0-schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-32"><span class="target" id="change-eb0f69af2f52edcebc270889846a3f7d"><strong>[schema] [bug] </strong></span>Fixed a regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2812">#2812</a> where the repr() for
table and column names would fail if the name contained non-ascii
characters.<a class="changeset-link headerlink reference internal" href="#change-eb0f69af2f52edcebc270889846a3f7d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2868">#2868</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.0-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-33"><span class="target" id="change-7b58abc6472e6a9756729e397c6ee060"><strong>[postgresql] [feature] </strong></span>Support for Postgresql JSON has been added, using the new
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><tt class="xref py py-class docutils literal"><span class="pre">JSON</span></tt></a> type.   Huge thanks to Nathan Rice for
implementing and testing this.<a class="changeset-link headerlink reference internal" href="#change-7b58abc6472e6a9756729e397c6ee060">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2581">#2581</a>, <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/50">pull request github:50</a></p>
</p>
</li>
<li><p id="change-0.9.0-34"><span class="target" id="change-77977fae5177b45781690c834e63d13f"><strong>[postgresql] [feature] </strong></span>Added support for Postgresql TSVECTOR via the
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.TSVECTOR" title="sqlalchemy.dialects.postgresql.TSVECTOR"><tt class="xref py py-class docutils literal"><span class="pre">postgresql.TSVECTOR</span></tt></a> type.  Pull request courtesy
Noufal Ibrahim.<a class="changeset-link headerlink reference internal" href="#change-77977fae5177b45781690c834e63d13f">¶</a><p>References: <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/8">pull request bitbucket:8</a></p>
</p>
</li>
<li><p id="change-0.9.0-35"><span class="target" id="change-6c4b7c62d0cebe9f8e7fa158a55c506e"><strong>[postgresql] [bug] </strong></span>Fixed bug where index reflection would mis-interpret indkey values
when using the pypostgresql adapter, which returns these values
as lists vs. psycopg2&#8217;s return type of string.<a class="changeset-link headerlink reference internal" href="#change-6c4b7c62d0cebe9f8e7fa158a55c506e">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2855">#2855</a></p>
</p>
</li>
<li><p id="change-0.9.0-36"><span class="target" id="change-0d74908c0a46fa09168e385eecb4f0a1"><strong>[postgresql] [bug] </strong></span>Now using psycopg2 UNICODEARRAY extension for handling unicode arrays
with psycopg2 + normal &#8220;native unicode&#8221; mode, in the same way the
UNICODE extension is used.<a class="changeset-link headerlink reference internal" href="#change-0d74908c0a46fa09168e385eecb4f0a1">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-37"><span class="target" id="change-278c2212115d7604aa6ba7694c5c5965"><strong>[postgresql] [bug] </strong></span>Fixed bug where values within an ENUM weren&#8217;t escaped for single
quote signs.   Note that this is backwards-incompatible for existing
workarounds that manually escape the single quotes.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2878"><em>Postgresql CREATE TYPE &lt;x&gt; AS ENUM now applies quoting to values</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-278c2212115d7604aa6ba7694c5c5965">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2878">#2878</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.0-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-38"><span class="target" id="change-aff523a757357ad13ae691047b8183cd"><strong>[mysql] [bug] </strong></span>Improvements to the system by which SQL types generate within
<tt class="docutils literal"><span class="pre">__repr__()</span></tt>, particularly with regards to the MySQL integer/numeric/
character types which feature a wide variety of keyword arguments.
The <tt class="docutils literal"><span class="pre">__repr__()</span></tt> is important for use with Alembic autogenerate
for when Python code is rendered in a migration script.<a class="changeset-link headerlink reference internal" href="#change-aff523a757357ad13ae691047b8183cd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2893">#2893</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.0-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-39"><span class="target" id="change-9aad279410ec35f73c2ed835b9775263"><strong>[mssql] [bug] [firebird] </strong></span>The &#8220;asdecimal&#8221; flag used with the <a class="reference internal" href="../core/types.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><tt class="xref py py-class docutils literal"><span class="pre">Float</span></tt></a> type will now
work with Firebird as well as the mssql+pyodbc dialects; previously the
decimal conversion was not occurring.<a class="changeset-link headerlink reference internal" href="#change-9aad279410ec35f73c2ed835b9775263">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0-40"><span class="target" id="change-f1ee7d7ea1eb2a0cb21a50ae1dea3fe9"><strong>[mssql] [bug] [pymssql] </strong></span>Added &#8220;Net-Lib error during Connection reset by peer&#8221; message
to the list of messages checked for &#8220;disconnect&#8221; within the
pymssql dialect.  Courtesy John Anderson.<a class="changeset-link headerlink reference internal" href="#change-f1ee7d7ea1eb2a0cb21a50ae1dea3fe9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/51">pull request github:51</a></p>
</p>
</li>
<li><p id="change-0.9.0-41"><span class="target" id="change-b65b88da0221c3f0bb0c2443185a5221"><strong>[mssql] [bug] </strong></span>Fixed bug introduced in 0.8.0 where the <tt class="docutils literal"><span class="pre">DROP</span> <span class="pre">INDEX</span></tt>
statement for an index in MSSQL would render incorrectly if the
index were in an alternate schema; the schemaname/tablename
would be reversed.  The format has been also been revised to
match current MSSQL documentation.  Courtesy Derek Harland.<a class="changeset-link headerlink reference internal" href="#change-b65b88da0221c3f0bb0c2443185a5221">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/7">pull request bitbucket:7</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.0-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-42"><span class="target" id="change-9be5ac15b91d5ec132c4a6b689d5d15e"><strong>[oracle] [bug] </strong></span>Added ORA-02396 &#8220;maximum idle time&#8221; error code to list of
&#8220;is disconnect&#8221; codes with cx_oracle.<a class="changeset-link headerlink reference internal" href="#change-9be5ac15b91d5ec132c4a6b689d5d15e">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2864">#2864</a></p>
</p>
</li>
<li><p id="change-0.9.0-43"><span class="target" id="change-495a336b8096587d32bf1959ae9c2509"><strong>[oracle] [bug] </strong></span>Fixed bug where Oracle <tt class="docutils literal"><span class="pre">VARCHAR</span></tt> types given with no length
(e.g. for a <tt class="docutils literal"><span class="pre">CAST</span></tt> or similar) would incorrectly render <tt class="docutils literal"><span class="pre">None</span> <span class="pre">CHAR</span></tt>
or similar.<a class="changeset-link headerlink reference internal" href="#change-495a336b8096587d32bf1959ae9c2509">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2870">#2870</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-firebird">
<h3>firebird<a class="headerlink" href="#change-0.9.0-firebird" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-44"><span class="target" id="change-0e80ff1217d1159ae0303de5c0ed4ec5"><strong>[firebird] [bug] </strong></span>The firebird dialect will quote identifiers which begin with an
underscore.  Courtesy Treeve Jelbert.<a class="changeset-link headerlink reference internal" href="#change-0e80ff1217d1159ae0303de5c0ed4ec5">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2897">#2897</a></p>
</p>
</li>
<li><p id="change-0.9.0-45"><span class="target" id="change-eea51d8b16bb72d519c6f5a9cb105561"><strong>[firebird] [bug] </strong></span>Fixed bug in Firebird index reflection where the columns within the
index were not sorted correctly; they are now sorted
in order of RDB$FIELD_POSITION.<a class="changeset-link headerlink reference internal" href="#change-eea51d8b16bb72d519c6f5a9cb105561">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0-46"><span class="target" id="change-70bdabe000861535a7e228956add9020"><strong>[firebird] [bug] </strong></span>Changed the queries used by Firebird to list table and view names
to query from the <tt class="docutils literal"><span class="pre">rdb$relations</span></tt> view instead of the
<tt class="docutils literal"><span class="pre">rdb$relation_fields</span></tt> and <tt class="docutils literal"><span class="pre">rdb$view_relations</span></tt> views.
Variants of both the old and new queries are mentioned on many
FAQ and blogs, however the new queries are taken straight from
the &#8220;Firebird FAQ&#8221; which appears to be the most official source
of info.<a class="changeset-link headerlink reference internal" href="#change-70bdabe000861535a7e228956add9020">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2898">#2898</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-misc">
<h3>misc<a class="headerlink" href="#change-0.9.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-47"><span class="target" id="change-b9609d3e6665e3b2e9cbc73bb84adebc"><strong>[bug] [declarative] </strong></span>Error message when a string arg sent to <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> which
doesn&#8217;t resolve to a class or mapper has been corrected to work
the same way as when a non-string arg is received, which indicates
the name of the relationship which had the configurational error.<a class="changeset-link headerlink reference internal" href="#change-b9609d3e6665e3b2e9cbc73bb84adebc">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2888">#2888</a></p>
</p>
</li>
<li><p id="change-0.9.0-48"><span class="target" id="change-7b23b02498aded0119f08fe8df17cb20"><strong>[bug] [ext] </strong></span>Fixed bug which prevented the <tt class="docutils literal"><span class="pre">serializer</span></tt> extension from working
correctly with table or column names that contain non-ASCII
characters.<a class="changeset-link headerlink reference internal" href="#change-7b23b02498aded0119f08fe8df17cb20">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2869">#2869</a></p>
</p>
</li>
<li><p id="change-0.9.0-49"><span class="target" id="change-51a37bd7516f5c6879964cfd09f1be56"><strong>[bug] [examples] </strong></span>Fixed bug which prevented history_meta recipe from working with
joined inheritance schemes more than one level deep.<a class="changeset-link headerlink reference internal" href="#change-51a37bd7516f5c6879964cfd09f1be56">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-50"><span class="target" id="change-577e7805c86d301deafe2f47a2840148"><strong>[removed] </strong></span>The &#8220;informix&#8221; and &#8220;informixdb&#8221; dialects have been removed; the code
is now available as a separate repository on Bitbucket.   The IBM-DB
project has provided production-level Informix support since the
informixdb dialect was first added.<a class="changeset-link headerlink reference internal" href="#change-577e7805c86d301deafe2f47a2840148">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.0b1">
<h2>0.9.0b1<a class="headerlink" href="#change-0.9.0b1" title="Permalink to this headline">¶</a></h2>
Released: October 26, 2013<div class="section" id="change-0.9.0b1-general">
<h3>general<a class="headerlink" href="#change-0.9.0b1-general" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-0"><span class="target" id="change-63557d61147791e2c67e8fe819f1b2b2"><strong>[general] [feature] [py3k] </strong></span>The C extensions are ported to Python 3 and will build under
any supported CPython 2 or 3 environment.<a class="changeset-link headerlink reference internal" href="#change-63557d61147791e2c67e8fe819f1b2b2">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2161">#2161</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-1"><span class="target" id="change-e1f88f4751daaf8c4bf39213780dfc1f"><strong>[general] [feature] [py3k] </strong></span>The codebase is now &#8220;in-place&#8221; for Python
2 and 3, the need to run 2to3 has been removed.
Compatibility is now against Python 2.6 on forward.<a class="changeset-link headerlink reference internal" href="#change-e1f88f4751daaf8c4bf39213780dfc1f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2671">#2671</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-2"><span class="target" id="change-0858791080deb02ea2ef1c8aec366f29"><strong>[general] </strong></span>A large refactoring of packages has reorganized
the import structure of many Core modules as well as some aspects
of the ORM modules.  In particular <tt class="docutils literal"><span class="pre">sqlalchemy.sql</span></tt> has been broken
out into several more modules than before so that the very large size
of <tt class="docutils literal"><span class="pre">sqlalchemy.sql.expression</span></tt> is now pared down.   The effort
has focused on a large reduction in import cycles.   Additionally,
the system of API functions in <tt class="docutils literal"><span class="pre">sqlalchemy.sql.expression</span></tt> and
<tt class="docutils literal"><span class="pre">sqlalchemy.orm</span></tt> has been reorganized to eliminate redundancy
in documentation between the functions vs. the objects they produce.<a class="changeset-link headerlink reference internal" href="#change-0858791080deb02ea2ef1c8aec366f29">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-orm">
<h3>orm<a class="headerlink" href="#change-0.9.0b1-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-3"><span class="target" id="change-9262d71ee52f650e127ee71427812930"><strong>[orm] [feature] </strong></span>Added new option to <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> <tt class="docutils literal"><span class="pre">distinct_target_key</span></tt>.
This enables the subquery eager loader strategy to apply a DISTINCT
to the innermost SELECT subquery, to assist in the case where
duplicate rows are generated by the innermost query which corresponds
to this relationship (there&#8217;s not yet a general solution to the issue
of dupe rows within subquery eager loading, however, when joins outside
of the innermost subquery produce dupes).  When the flag
is set to <tt class="docutils literal"><span class="pre">True</span></tt>, the DISTINCT is rendered unconditionally, and when
it is set to <tt class="docutils literal"><span class="pre">None</span></tt>, DISTINCT is rendered if the innermost relationship
targets columns that do not comprise a full primary key.
The option defaults to False in 0.8 (e.g. off by default in all cases),
None in 0.9 (e.g. automatic by default).   Thanks to Alexander Koval
for help with this.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#change-2836"><em>Subquery Eager Loading will apply DISTINCT to the innermost SELECT for some queries</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-9262d71ee52f650e127ee71427812930">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2836">#2836</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-4"><span class="target" id="change-7df1b4e6150537b72c4b758277a44288"><strong>[orm] [feature] </strong></span>The association proxy now returns <tt class="docutils literal"><span class="pre">None</span></tt> when fetching a scalar
attribute off of a scalar relationship, where the scalar relationship
itself points to <tt class="docutils literal"><span class="pre">None</span></tt>, instead of raising an <tt class="docutils literal"><span class="pre">AttributeError</span></tt>.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2810"><em>Association Proxy Missing Scalar returns None</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-7df1b4e6150537b72c4b758277a44288">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2810">#2810</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-5"><span class="target" id="change-17ada80ccb89c1e1109f3190e75092b5"><strong>[orm] [feature] </strong></span>Added new method <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.state.AttributeState.load_history" title="sqlalchemy.orm.state.AttributeState.load_history"><tt class="xref py py-meth docutils literal"><span class="pre">AttributeState.load_history()</span></tt></a>, works like
<a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.state.AttributeState.history" title="sqlalchemy.orm.state.AttributeState.history"><tt class="xref py py-attr docutils literal"><span class="pre">AttributeState.history</span></tt></a> but also fires loader callables.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#change-2787"><em>attributes.get_history() will query from the DB by default if value not present</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-17ada80ccb89c1e1109f3190e75092b5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2787">#2787</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-6"><span class="target" id="change-3108052346d72a5b370a5dd64588efa8"><strong>[orm] [feature] </strong></span>Added a new load option <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><tt class="xref py py-func docutils literal"><span class="pre">orm.load_only()</span></tt></a>.  This allows a series
of column names to be specified as loading &#8220;only&#8221; those attributes,
deferring the rest.<a class="changeset-link headerlink reference internal" href="#change-3108052346d72a5b370a5dd64588efa8">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1418">#1418</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-7"><span class="target" id="change-44e23631c9a2cd3d7341ba488a0ec775"><strong>[orm] [feature] </strong></span>The system of loader options has been entirely rearchitected to build
upon a much more comprehensive base, the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.strategy_options.Load" title="sqlalchemy.orm.strategy_options.Load"><tt class="xref py py-class docutils literal"><span class="pre">Load</span></tt></a> object.  This
base allows any common loader option like <a class="reference internal" href="../orm/loading.html#sqlalchemy.orm.joinedload" title="sqlalchemy.orm.joinedload"><tt class="xref py py-func docutils literal"><span class="pre">joinedload()</span></tt></a>,
<a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><tt class="xref py py-func docutils literal"><span class="pre">defer()</span></tt></a>, etc. to be used in a &#8220;chained&#8221; style for the purpose
of specifying options down a path, such as <tt class="docutils literal"><span class="pre">joinedload(&quot;foo&quot;).subqueryload(&quot;bar&quot;)</span></tt>.
The new system supersedes the usage of dot-separated path names,
multiple attributes within options, and the usage of <tt class="docutils literal"><span class="pre">_all()</span></tt> options.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-1418"><em>New Query Options API; load_only() option</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-44e23631c9a2cd3d7341ba488a0ec775">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1418">#1418</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-8"><span class="target" id="change-a1bb82ee5cb482c0985d71e1e82e3b50"><strong>[orm] [feature] </strong></span>The <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.composite" title="sqlalchemy.orm.composite"><tt class="xref py py-func docutils literal"><span class="pre">composite()</span></tt></a> construct now maintains the return object
when used in a column-oriented <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>, rather than expanding
out into individual columns.  This makes use of the new <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><tt class="xref py py-class docutils literal"><span class="pre">Bundle</span></tt></a>
feature internally.  This behavior is backwards incompatible; to
select from a composite column which will expand out, use
<tt class="docutils literal"><span class="pre">MyClass.some_composite.clauses</span></tt>.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2824"><em>Composite attributes are now returned as their object form when queried on a per-attribute basis</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-a1bb82ee5cb482c0985d71e1e82e3b50">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2824">#2824</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-9"><span class="target" id="change-e3d4b8c06aa3216a8f10452f097a17ae"><strong>[orm] [feature] </strong></span>A new construct <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><tt class="xref py py-class docutils literal"><span class="pre">Bundle</span></tt></a> is added, which allows for specification
of groups of column expressions to a <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> construct.
The group of columns are returned as a single tuple by default.  The
behavior of <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><tt class="xref py py-class docutils literal"><span class="pre">Bundle</span></tt></a> can be overridden however to provide
any sort of result processing to the returned row.  The behavior
of <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><tt class="xref py py-class docutils literal"><span class="pre">Bundle</span></tt></a> is also embedded into composite attributes now
when they are used in a column-oriented <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#change-2824"><em>Column Bundles for ORM queries</em></a></p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2824"><em>Composite attributes are now returned as their object form when queried on a per-attribute basis</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-e3d4b8c06aa3216a8f10452f097a17ae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2824">#2824</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-10"><span class="target" id="change-ebb167a81b388b8ac090fa33246c48a2"><strong>[orm] [feature] </strong></span>The <tt class="docutils literal"><span class="pre">version_id_generator</span></tt> parameter of <tt class="docutils literal"><span class="pre">Mapper</span></tt> can now be specified
to rely upon server generated version identifiers, using triggers
or other database-provided versioning features, or via an optional programmatic
value, by setting <tt class="docutils literal"><span class="pre">version_id_generator=False</span></tt>.
When using a server-generated version identfier, the ORM will use RETURNING when
available to immediately
load the new version value, else it will emit a second SELECT.<a class="changeset-link headerlink reference internal" href="#change-ebb167a81b388b8ac090fa33246c48a2">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2793">#2793</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-11"><span class="target" id="change-8ee7cac9783d870a07c279041dd11bc9"><strong>[orm] [feature] </strong></span>The <tt class="docutils literal"><span class="pre">eager_defaults</span></tt> flag of <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> will now allow the
newly generated default values to be fetched using an inline
RETURNING clause, rather than a second SELECT statement, for backends
that support RETURNING.<a class="changeset-link headerlink reference internal" href="#change-8ee7cac9783d870a07c279041dd11bc9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2793">#2793</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-12"><span class="target" id="change-03c6ce5802904e9ebc488ea78ab24b78"><strong>[orm] [feature] </strong></span>Added a new attribute <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><tt class="xref py py-attr docutils literal"><span class="pre">Session.info</span></tt></a> to <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>;
this is a dictionary where applications can store arbitrary
data local to a <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.
The contents of <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><tt class="xref py py-attr docutils literal"><span class="pre">Session.info</span></tt></a> can be also be initialized
using the <tt class="docutils literal"><span class="pre">info</span></tt> argument of <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> or
<a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><tt class="xref py py-class docutils literal"><span class="pre">sessionmaker</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-03c6ce5802904e9ebc488ea78ab24b78">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0b1-13"><span class="target" id="change-3fab266a28f41e49452166ecc367921d"><strong>[orm] [feature] </strong></span>Removal of event listeners is now implemented.    The feature is
provided via the <a class="reference internal" href="../core/event.html#sqlalchemy.event.remove" title="sqlalchemy.event.remove"><tt class="xref py py-func docutils literal"><span class="pre">event.remove()</span></tt></a> function.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-2268"><em>Event Removal API</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-3fab266a28f41e49452166ecc367921d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2268">#2268</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-14"><span class="target" id="change-0dc7109a8a2359edd8e21d7ed70a1462"><strong>[orm] [feature] </strong></span>The mechanism by which attribute events pass along an
<tt class="xref py py-class docutils literal"><span class="pre">AttributeImpl</span></tt> as an &#8220;initiator&#8221; token has been changed;
the object is now an event-specific object called <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.attributes.Event" title="sqlalchemy.orm.attributes.Event"><tt class="xref py py-class docutils literal"><span class="pre">attributes.Event</span></tt></a>.
Additionally, the attribute system no longer halts events based
on a matching &#8220;initiator&#8221; token; this logic has been moved to be
specific to ORM backref event handlers, which are the typical source
of the re-propagation of an attribute event onto subsequent append/set/remove
operations.  End user code which emulates the behavior of backrefs
must now ensure that recursive event propagation schemes are halted,
if the scheme does not use the backref handlers.   Using this new system,
backref handlers can now perform a
&#8220;two-hop&#8221; operation when an object is appended to a collection,
associated with a new many-to-one, de-associated with the previous
many-to-one, and then removed from a previous collection.   Before this
change, the last step of removal from the previous collection would
not occur.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2789"><em>Backref handlers can now propagate more than one level deep</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-0dc7109a8a2359edd8e21d7ed70a1462">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2789">#2789</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-15"><span class="target" id="change-0a9cba0c775121ff87389c9d5a411292"><strong>[orm] [feature] </strong></span>A major change regarding how the ORM constructs joins where
the right side is itself a join or left outer join.   The ORM
is now configured to allow simple nesting of joins of
the form <tt class="docutils literal"><span class="pre">a</span> <span class="pre">JOIN</span> <span class="pre">(b</span> <span class="pre">JOIN</span> <span class="pre">c</span> <span class="pre">ON</span> <span class="pre">b.id=c.id)</span> <span class="pre">ON</span> <span class="pre">a.id=b.id</span></tt>,
rather than forcing the right side into a <tt class="docutils literal"><span class="pre">SELECT</span></tt> subquery.
This should allow significant performance improvements on most
backends, most particularly MySQL.   The one database backend
that has for many years held back this change, SQLite, is now addressed by
moving the production of the <tt class="docutils literal"><span class="pre">SELECT</span></tt> subquery from the
ORM to the SQL compiler; so that a right-nested join on SQLite will still
ultimately render with a <tt class="docutils literal"><span class="pre">SELECT</span></tt>, while all other backends
are no longer impacted by this workaround.<p>As part of this change, a new argument <tt class="docutils literal"><span class="pre">flat=True</span></tt> has been added
to the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><tt class="xref py py-func docutils literal"><span class="pre">orm.aliased()</span></tt></a>, <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Join.alias" title="sqlalchemy.sql.expression.Join.alias"><tt class="xref py py-meth docutils literal"><span class="pre">Join.alias()</span></tt></a>, and
<a class="reference internal" href="../orm/inheritance.html#sqlalchemy.orm.with_polymorphic" title="sqlalchemy.orm.with_polymorphic"><tt class="xref py py-func docutils literal"><span class="pre">orm.with_polymorphic()</span></tt></a> functions, which allows an &#8220;alias&#8221; of a
JOIN to be produced which applies an anonymous alias to each component
table within the join, rather than producing a subquery.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-joins-09"><em>Many JOIN and LEFT OUTER JOIN expressions will no longer be wrapped in (SELECT * FROM ..) AS ANON_1</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-0a9cba0c775121ff87389c9d5a411292">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2587">#2587</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-16"><span class="target" id="change-a0c2b843b3a7a6f41d90792cf10e7e3d"><strong>[orm] [bug] </strong></span>Fixed bug where using an annotation such as <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.remote" title="sqlalchemy.orm.remote"><tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt></a> or
<a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.foreign" title="sqlalchemy.orm.foreign"><tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt></a> on a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> before association with a parent
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a> could produce issues related to the parent table not
rendering within joins, due to the inherent copy operation performed
by an annotation.<a class="changeset-link headerlink reference internal" href="#change-a0c2b843b3a7a6f41d90792cf10e7e3d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2813">#2813</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-17"><span class="target" id="change-ef9f61eaff6e736d97c7a7096da10f37"><strong>[orm] [bug] </strong></span>Fixed bug where <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.exists" title="sqlalchemy.orm.query.Query.exists"><tt class="xref py py-meth docutils literal"><span class="pre">Query.exists()</span></tt></a> failed to work correctly
without any WHERE criterion.  Courtesy Vladimir Magamedov.<a class="changeset-link headerlink reference internal" href="#change-ef9f61eaff6e736d97c7a7096da10f37">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-18"><span class="target" id="change-4315e5745177d007461f7bc0247cbb12"><strong>[orm] [bug] </strong></span>Fixed a potential issue in an ordered sequence implementation used
by the ORM to iterate mapper hierarchies; under the Jython interpreter
this implementation wasn&#8217;t ordered, even though cPython and Pypy
maintained ordering.<a class="changeset-link headerlink reference internal" href="#change-4315e5745177d007461f7bc0247cbb12">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2794">#2794</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-19"><span class="target" id="change-e0cad55b3c8cd8dfb6d0ee70f9dfe7d0"><strong>[orm] [bug] </strong></span>Fixed bug in ORM-level event registration where the &#8220;raw&#8221; or
&#8220;propagate&#8221; flags could potentially be mis-configured in some
&#8220;unmapped base class&#8221; configurations.<a class="changeset-link headerlink reference internal" href="#change-e0cad55b3c8cd8dfb6d0ee70f9dfe7d0">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2786">#2786</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-20"><span class="target" id="change-e1a708dde5288510230755ac690de45b"><strong>[orm] [bug] </strong></span>A performance fix related to the usage of the <a class="reference internal" href="../orm/mapper_config.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><tt class="xref py py-func docutils literal"><span class="pre">defer()</span></tt></a> option
when loading mapped entities.   The function overhead of applying
a per-object deferred callable to an instance at load time was
significantly higher than that of just loading the data from the row
(note that <tt class="docutils literal"><span class="pre">defer()</span></tt> is meant to reduce DB/network overhead, not
necessarily function call count); the function call overhead is now
less than that of loading data from the column in all cases.  There
is also a reduction in the number of &#8220;lazy callable&#8221; objects created
per load from N (total deferred values in the result) to 1 (total
number of deferred cols).<a class="changeset-link headerlink reference internal" href="#change-e1a708dde5288510230755ac690de45b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2778">#2778</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-21"><span class="target" id="change-8a5cddc8cb97dec46f5e9e5bf4c4d922"><strong>[orm] [bug] </strong></span>Fixed bug whereby attribute history functions would fail
when an object we moved from &#8220;persistent&#8221; to &#8220;pending&#8221;
using the <a class="reference internal" href="../orm/session.html#sqlalchemy.orm.session.make_transient" title="sqlalchemy.orm.session.make_transient"><tt class="xref py py-func docutils literal"><span class="pre">make_transient()</span></tt></a> function, for operations
involving collection-based backrefs.<a class="changeset-link headerlink reference internal" href="#change-8a5cddc8cb97dec46f5e9e5bf4c4d922">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2773">#2773</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-22"><span class="target" id="change-dd4b79b5d51e7c3f475fb2adec886c01"><strong>[orm] [bug] </strong></span>A warning is emitted when trying to flush an object of an inherited
class where the polymorphic discriminator has been assigned
to a value that is invalid for the class.<a class="changeset-link headerlink reference internal" href="#change-dd4b79b5d51e7c3f475fb2adec886c01">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2750">#2750</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-23"><span class="target" id="change-d8b5c05c64292219e59d34a4d1d9edfe"><strong>[orm] [bug] </strong></span>Fixed bug in polymorphic SQL generation where multiple joined-inheritance
entities against the same base class joined to each other as well
would not track columns on the base table independently of each other if
the string of joins were more than two entities long.<a class="changeset-link headerlink reference internal" href="#change-d8b5c05c64292219e59d34a4d1d9edfe">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2759">#2759</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-24"><span class="target" id="change-0df6c969856f2e6e6ddbed5c093b58f7"><strong>[orm] [bug] </strong></span>Fixed bug where sending a composite attribute into <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.order_by" title="sqlalchemy.orm.query.Query.order_by"><tt class="xref py py-meth docutils literal"><span class="pre">Query.order_by()</span></tt></a>
would produce a parenthesized expression not accepted by some databases.<a class="changeset-link headerlink reference internal" href="#change-0df6c969856f2e6e6ddbed5c093b58f7">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2754">#2754</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-25"><span class="target" id="change-62648da125cd1e7e856bccba57c1c4b9"><strong>[orm] [bug] </strong></span>Fixed the interaction between composite attributes and
the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><tt class="xref py py-func docutils literal"><span class="pre">aliased()</span></tt></a> function.  Previously, composite attributes
wouldn&#8217;t work correctly in comparison operations when aliasing
was applied.<a class="changeset-link headerlink reference internal" href="#change-62648da125cd1e7e856bccba57c1c4b9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2755">#2755</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-26"><span class="target" id="change-c6ec101b2fa17b87ed51b2bcc64f1785"><strong>[orm] [bug] [ext] </strong></span>Fixed bug where <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><tt class="xref py py-class docutils literal"><span class="pre">MutableDict</span></tt></a> didn&#8217;t report a change event
when <tt class="docutils literal"><span class="pre">clear()</span></tt> was called.<a class="changeset-link headerlink reference internal" href="#change-c6ec101b2fa17b87ed51b2bcc64f1785">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2730">#2730</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-27"><span class="target" id="change-e7e01f7d15796a940fa6608c2a24096c"><strong>[orm] [bug] </strong></span>Fixed bug where list instrumentation would fail to represent a
setslice of <tt class="docutils literal"><span class="pre">[0:0]</span></tt> correctly, which in particular could occur
when using <tt class="docutils literal"><span class="pre">insert(0,</span> <span class="pre">item)</span></tt> with the association proxy.  Due
to some quirk in Python collections, the issue was much more likely
with Python 3 rather than 2.<a class="changeset-link headerlink reference internal" href="#change-e7e01f7d15796a940fa6608c2a24096c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2807">#2807</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-28"><span class="target" id="change-57cba062cac3ea3d4b9c20737f356339"><strong>[orm] [bug] </strong></span><a class="reference internal" href="../orm/session.html#sqlalchemy.orm.attributes.get_history" title="sqlalchemy.orm.attributes.get_history"><tt class="xref py py-func docutils literal"><span class="pre">attributes.get_history()</span></tt></a> when used with a scalar column-mapped
attribute will now honor the &#8220;passive&#8221; flag
passed to it; as this defaults to <tt class="docutils literal"><span class="pre">PASSIVE_OFF</span></tt>, the function will
by default query the database if the value is not present.
This is a behavioral change vs. 0.8.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#change-2787"><em>attributes.get_history() will query from the DB by default if value not present</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-57cba062cac3ea3d4b9c20737f356339">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2787">#2787</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-29"><span class="target" id="change-077302a77471edd431eee122414f0ff1"><strong>[orm] [bug] [associationproxy] </strong></span>Added additional criterion to the ==, != comparators, used with
scalar values, for comparisons to None to also take into account
the association record itself being non-present, in addition to the
existing test for the scalar endpoint on the association record
being NULL.  Previously, comparing <tt class="docutils literal"><span class="pre">Cls.scalar</span> <span class="pre">==</span> <span class="pre">None</span></tt> would return
records for which <tt class="docutils literal"><span class="pre">Cls.associated</span></tt> were present and
<tt class="docutils literal"><span class="pre">Cls.associated.scalar</span></tt> is None, but not rows for which
<tt class="docutils literal"><span class="pre">Cls.associated</span></tt> is non-present.  More significantly, the
inverse operation <tt class="docutils literal"><span class="pre">Cls.scalar</span> <span class="pre">!=</span> <span class="pre">None</span></tt> <em>would</em> return <tt class="docutils literal"><span class="pre">Cls</span></tt>
rows for which <tt class="docutils literal"><span class="pre">Cls.associated</span></tt> was non-present.<p>The case for <tt class="docutils literal"><span class="pre">Cls.scalar</span> <span class="pre">!=</span> <span class="pre">'somevalue'</span></tt> is also modified
to act more like a direct SQL comparison; only rows for
which <tt class="docutils literal"><span class="pre">Cls.associated</span></tt> is present and <tt class="docutils literal"><span class="pre">Associated.scalar</span></tt>
is non-NULL and not equal to <tt class="docutils literal"><span class="pre">'somevalue'</span></tt> are returned.
Previously, this would be a simple <tt class="docutils literal"><span class="pre">NOT</span> <span class="pre">EXISTS</span></tt>.</p>
<p>Also added a special use case where you
can call <tt class="docutils literal"><span class="pre">Cls.scalar.has()</span></tt> with no arguments,
when <tt class="docutils literal"><span class="pre">Cls.scalar</span></tt> is a column-based value - this returns whether or
not <tt class="docutils literal"><span class="pre">Cls.associated</span></tt> has any rows present, regardless of whether
or not <tt class="docutils literal"><span class="pre">Cls.associated.scalar</span></tt> is NULL or not.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2751"><em>Association Proxy SQL Expression Improvements and Fixes</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-077302a77471edd431eee122414f0ff1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2751">#2751</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-30"><span class="target" id="change-04b284e1a49effb2ce153e574641dfb0"><strong>[orm] [bug] </strong></span>Fixed an obscure bug where the wrong results would be
fetched when joining/joinedloading across a many-to-many
relationship to a single-table-inheriting
subclass with a specific discriminator value, due to &#8220;secondary&#8221;
rows that would come back.  The &#8220;secondary&#8221; and right-side
tables are now inner joined inside of parenthesis for all
ORM joins on many-to-many relationships so that the left-&gt;right
join can accurately filtered.  This change was made possible
by finally addressing the issue with right-nested joins
outlined in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2587">#2587</a>.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-joins-09"><em>Many JOIN and LEFT OUTER JOIN expressions will no longer be wrapped in (SELECT * FROM ..) AS ANON_1</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-04b284e1a49effb2ce153e574641dfb0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2369">#2369</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-31"><span class="target" id="change-6856f4c9574c2e7f8cae541a3af37c17"><strong>[orm] [bug] </strong></span>The &#8220;auto-aliasing&#8221; behavior of the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><tt class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></tt></a>
method has been turned off.  The specific behavior is now
available via a new method <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_entity_from" title="sqlalchemy.orm.query.Query.select_entity_from"><tt class="xref py py-meth docutils literal"><span class="pre">Query.select_entity_from()</span></tt></a>.
The auto-aliasing behavior here was never well documented and
is generally not what&#8217;s desired, as <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><tt class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></tt></a>
has become more oriented towards controlling how a JOIN is
rendered.  <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_entity_from" title="sqlalchemy.orm.query.Query.select_entity_from"><tt class="xref py py-meth docutils literal"><span class="pre">Query.select_entity_from()</span></tt></a> will also be made
available in 0.8 so that applications which rely on the auto-aliasing
can shift their applications to use this method.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2736"><em>Query.select_from() no longer applies the clause to corresponding entities</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-6856f4c9574c2e7f8cae541a3af37c17">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">#2736</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-0.9.0b1-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-32"><span class="target" id="change-928ad6a6f0e7bf2d61add68c58d2693a"><strong>[feature] [orm] [declarative] </strong></span>Added a convenience class decorator <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.as_declarative" title="sqlalchemy.ext.declarative.as_declarative"><tt class="xref py py-func docutils literal"><span class="pre">as_declarative()</span></tt></a>, is
a wrapper for <a class="reference internal" href="../orm/extensions/declarative.html#sqlalchemy.ext.declarative.declarative_base" title="sqlalchemy.ext.declarative.declarative_base"><tt class="xref py py-func docutils literal"><span class="pre">declarative_base()</span></tt></a> which allows an existing base
class to be applied using a nifty class-decorated approach.<a class="changeset-link headerlink reference internal" href="#change-928ad6a6f0e7bf2d61add68c58d2693a">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-33"><span class="target" id="change-fa2beb10ebb49a0f8c15349cf5a7ca72"><strong>[feature] [orm] [declarative] </strong></span>ORM descriptors such as hybrid properties can now be referenced
by name in a string argument used with <tt class="docutils literal"><span class="pre">order_by</span></tt>,
<tt class="docutils literal"><span class="pre">primaryjoin</span></tt>, or similar in <a class="reference internal" href="../orm/relationships.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>,
in addition to column-bound attributes.<a class="changeset-link headerlink reference internal" href="#change-fa2beb10ebb49a0f8c15349cf5a7ca72">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2761">#2761</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-engine">
<h3>engine<a class="headerlink" href="#change-0.9.0b1-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-34"><span class="target" id="change-e265af1f13013b87ee5cfd3dc4348c0f"><strong>[engine] [feature] </strong></span><tt class="docutils literal"><span class="pre">repr()</span></tt> for the <a class="reference internal" href="../core/engines.html#sqlalchemy.engine.url.URL" title="sqlalchemy.engine.url.URL"><tt class="xref py py-class docutils literal"><span class="pre">URL</span></tt></a> of an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><tt class="xref py py-class docutils literal"><span class="pre">Engine</span></tt></a>
will now conceal the password using asterisks.
Courtesy Gunnlaugur Þór Briem.<a class="changeset-link headerlink reference internal" href="#change-e265af1f13013b87ee5cfd3dc4348c0f">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2821">#2821</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-35"><span class="target" id="change-d27b9f0357f06e9cf95fd1246c8052ae"><strong>[engine] [feature] </strong></span>New events added to <a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents" title="sqlalchemy.events.ConnectionEvents"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionEvents</span></tt></a>:<ul>
<li><a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.engine_connect" title="sqlalchemy.events.ConnectionEvents.engine_connect"><tt class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.engine_connect()</span></tt></a></li>
<li><a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.set_connection_execution_options" title="sqlalchemy.events.ConnectionEvents.set_connection_execution_options"><tt class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.set_connection_execution_options()</span></tt></a></li>
<li><a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.set_engine_execution_options" title="sqlalchemy.events.ConnectionEvents.set_engine_execution_options"><tt class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.set_engine_execution_options()</span></tt></a></li>
</ul>
<a class="changeset-link headerlink reference internal" href="#change-d27b9f0357f06e9cf95fd1246c8052ae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2770">#2770</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-36"><span class="target" id="change-3d8267e6caa813efc145b77d062c77ad"><strong>[engine] [bug] [oracle] </strong></span>Dialect.initialize() is not called a second time if an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><tt class="xref py py-class docutils literal"><span class="pre">Engine</span></tt></a>
is recreated, due to a disconnect error.   This fixes a particular
issue in the Oracle 8 dialect, but in general the dialect.initialize()
phase should only be once per dialect.<a class="changeset-link headerlink reference internal" href="#change-3d8267e6caa813efc145b77d062c77ad">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2776">#2776</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-37"><span class="target" id="change-155adccbc41937b6cb1bc83c19fd47ef"><strong>[engine] [bug] [pool] </strong></span>Fixed bug where <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><tt class="xref py py-class docutils literal"><span class="pre">QueuePool</span></tt></a> would lose the correct
checked out count if an existing pooled connection failed to reconnect
after an invalidate or recycle event.<a class="changeset-link headerlink reference internal" href="#change-155adccbc41937b6cb1bc83c19fd47ef">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2772">#2772</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-38"><span class="target" id="change-e8091dd32fb1ad01f0003ca4b9687bf5"><strong>[engine] [bug] </strong></span>Fixed bug where the <tt class="docutils literal"><span class="pre">reset_on_return</span></tt> argument to various <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><tt class="xref py py-class docutils literal"><span class="pre">Pool</span></tt></a>
implementations would not be propagated when the pool was regenerated.
Courtesy Eevee.<a class="changeset-link headerlink reference internal" href="#change-e8091dd32fb1ad01f0003ca4b9687bf5">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/6">pull request github:6</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-39"><span class="target" id="change-eb0b93a1244b5f1389a13544c801b4cf"><strong>[engine] [bug] </strong></span>The regexp used by the <a class="reference internal" href="../core/engines.html#sqlalchemy.engine.url.make_url" title="sqlalchemy.engine.url.make_url"><tt class="xref py py-func docutils literal"><span class="pre">make_url()</span></tt></a> function now parses
ipv6 addresses, e.g. surrounded by brackets.<a class="changeset-link headerlink reference internal" href="#change-eb0b93a1244b5f1389a13544c801b4cf">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2851">#2851</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-40"><span class="target" id="change-8fe08fa349b1117af24feae4b1a76bc5"><strong>[engine] [bug] </strong></span>The method signature of <a class="reference internal" href="../core/internals.html#sqlalchemy.engine.interfaces.Dialect.reflecttable" title="sqlalchemy.engine.interfaces.Dialect.reflecttable"><tt class="xref py py-meth docutils literal"><span class="pre">Dialect.reflecttable()</span></tt></a>, which in
all known cases is provided by <a class="reference internal" href="../core/internals.html#sqlalchemy.engine.default.DefaultDialect" title="sqlalchemy.engine.default.DefaultDialect"><tt class="xref py py-class docutils literal"><span class="pre">DefaultDialect</span></tt></a>, has been
tightened to expect <tt class="docutils literal"><span class="pre">include_columns</span></tt> and <tt class="docutils literal"><span class="pre">exclude_columns</span></tt>
arguments without any kw option, reducing ambiguity - previously
<tt class="docutils literal"><span class="pre">exclude_columns</span></tt> was missing.<a class="changeset-link headerlink reference internal" href="#change-8fe08fa349b1117af24feae4b1a76bc5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2748">#2748</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-sql">
<h3>sql<a class="headerlink" href="#change-0.9.0b1-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-41"><span class="target" id="change-e911a8b7deaa9ca6726dfc5d21dfd76d"><strong>[sql] [feature] </strong></span>Added support for &#8220;unique constraint&#8221; reflection, via the
<a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_unique_constraints" title="sqlalchemy.engine.reflection.Inspector.get_unique_constraints"><tt class="xref py py-meth docutils literal"><span class="pre">Inspector.get_unique_constraints()</span></tt></a> method.
Thanks for Roman Podolyaka for the patch.<a class="changeset-link headerlink reference internal" href="#change-e911a8b7deaa9ca6726dfc5d21dfd76d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1443">#1443</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-42"><span class="target" id="change-93cc634b6be87be3a5f50c6295f3ece2"><strong>[sql] [feature] </strong></span>The <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.update" title="sqlalchemy.sql.expression.update"><tt class="xref py py-func docutils literal"><span class="pre">update()</span></tt></a>, <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><tt class="xref py py-func docutils literal"><span class="pre">insert()</span></tt></a>, and <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.delete" title="sqlalchemy.sql.expression.delete"><tt class="xref py py-func docutils literal"><span class="pre">delete()</span></tt></a> constructs
will now interpret ORM entities as target tables to be operated upon,
e.g.:<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">insert</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">delete</span>

<span class="n">ins</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">del_</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">upd</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ed&#39;</span><span class="p">)</span></pre></div>
</div>
<a class="changeset-link headerlink reference internal" href="#change-93cc634b6be87be3a5f50c6295f3ece2">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-43"><span class="target" id="change-8eb029cbdea1c892a1ad62622f54cdba"><strong>[sql] [feature] [postgresql] [mysql] </strong></span>The Postgresql and MySQL dialects now support reflection/inspection
of foreign key options, including ON UPDATE, ON DELETE.  Postgresql
also reflects MATCH, DEFERRABLE, and INITIALLY.  Coutesy ijl.<a class="changeset-link headerlink reference internal" href="#change-8eb029cbdea1c892a1ad62622f54cdba">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2183">#2183</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-44"><span class="target" id="change-d24a04a8befc766ba1bf79f8656487a5"><strong>[sql] [feature] </strong></span>A <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> construct with a &#8220;null&#8221; type (e.g. no type
specified) is now copied when used in a typed expression, and the
new copy is assigned the actual type of the compared column.  Previously,
this logic would occur on the given <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> in place.
Additionally, a similar process now occurs for <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> constructs
passed to <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><tt class="xref py py-meth docutils literal"><span class="pre">ValuesBase.values()</span></tt></a> for an <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><tt class="xref py py-class docutils literal"><span class="pre">Insert</span></tt></a> or
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><tt class="xref py py-class docutils literal"><span class="pre">Update</span></tt></a> construct, within the compilation phase of the
construct.<p>These are both subtle behavioral changes which may impact some
usages.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2850"><em>A bindparam() construct with no type gets upgraded via copy when a type is available</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-d24a04a8befc766ba1bf79f8656487a5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2850">#2850</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-45"><span class="target" id="change-39321a75ce7fa62c42a70b5096452d0e"><strong>[sql] [feature] </strong></span>An overhaul of expression handling for special symbols particularly
with conjunctions, e.g.
<tt class="docutils literal"><span class="pre">None</span></tt> <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.null" title="sqlalchemy.sql.expression.null"><tt class="xref py py-func docutils literal"><span class="pre">expression.null()</span></tt></a> <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.true" title="sqlalchemy.sql.expression.true"><tt class="xref py py-func docutils literal"><span class="pre">expression.true()</span></tt></a>
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.false" title="sqlalchemy.sql.expression.false"><tt class="xref py py-func docutils literal"><span class="pre">expression.false()</span></tt></a>, including consistency in rendering NULL
in conjunctions, &#8220;short-circuiting&#8221; of <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><tt class="xref py py-func docutils literal"><span class="pre">and_()</span></tt></a> and <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><tt class="xref py py-func docutils literal"><span class="pre">or_()</span></tt></a>
expressions which contain boolean constants, and rendering of
boolean constants and expressions as compared to &#8220;1&#8221; or &#8220;0&#8221; for backends
that don&#8217;t feature <tt class="docutils literal"><span class="pre">true</span></tt>/<tt class="docutils literal"><span class="pre">false</span></tt> constants.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-2804"><em>Improved rendering of Boolean constants, NULL constants, conjunctions</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-39321a75ce7fa62c42a70b5096452d0e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2734">#2734</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2804">#2804</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2823">#2823</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-46"><span class="target" id="change-272e70220cd05bb94293b58f14259825"><strong>[sql] [feature] </strong></span>The typing system now handles the task of rendering &#8220;literal bind&#8221; values,
e.g. values that are normally bound parameters but due to context must
be rendered as strings, typically within DDL constructs such as
CHECK constraints and indexes (note that &#8220;literal bind&#8221; values
become used by DDL as of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2742">#2742</a>).  A new method
<a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeEngine.literal_processor" title="sqlalchemy.types.TypeEngine.literal_processor"><tt class="xref py py-meth docutils literal"><span class="pre">TypeEngine.literal_processor()</span></tt></a> serves as the base, and
<a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeDecorator.process_literal_param" title="sqlalchemy.types.TypeDecorator.process_literal_param"><tt class="xref py py-meth docutils literal"><span class="pre">TypeDecorator.process_literal_param()</span></tt></a> is added to allow wrapping
of a native literal rendering method.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#change-2838"><em>The typing system now handles the task of rendering &#8220;literal bind&#8221; values</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-272e70220cd05bb94293b58f14259825">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2838">#2838</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-47"><span class="target" id="change-98eded5d80636b193ea09e3c9865f4a1"><strong>[sql] [feature] </strong></span>The <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><tt class="xref py py-meth docutils literal"><span class="pre">Table.tometadata()</span></tt></a> method now produces copies of
all <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><tt class="xref py py-attr docutils literal"><span class="pre">SchemaItem.info</span></tt></a> dictionaries from all <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><tt class="xref py py-class docutils literal"><span class="pre">SchemaItem</span></tt></a>
objects within the structure including columns, constraints,
foreign keys, etc.   As these dictionaries
are copies, they are independent of the original dictionary.
Previously, only the <tt class="docutils literal"><span class="pre">.info</span></tt> dictionary of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> was transferred
within this operation, and it was only linked in place, not copied.<a class="changeset-link headerlink reference internal" href="#change-98eded5d80636b193ea09e3c9865f4a1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2716">#2716</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-48"><span class="target" id="change-2f3ab8473c252112e2ebb16aa940261f"><strong>[sql] [feature] </strong></span>The <tt class="docutils literal"><span class="pre">default</span></tt> argument of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> now accepts a class
or object method as an argument, in addition to a standalone function;
will properly detect if the &#8220;context&#8221; argument is accepted or not.<a class="changeset-link headerlink reference internal" href="#change-2f3ab8473c252112e2ebb16aa940261f">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0b1-49"><span class="target" id="change-13e79ff2064616ed83c6e394ab472ee5"><strong>[sql] [feature] </strong></span>Added new method to the <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><tt class="xref py py-func docutils literal"><span class="pre">insert()</span></tt></a> construct
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><tt class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></tt></a>.  Given a list of columns and
a selectable, renders <tt class="docutils literal"><span class="pre">INSERT</span> <span class="pre">INTO</span> <span class="pre">(table)</span> <span class="pre">(columns)</span> <span class="pre">SELECT</span> <span class="pre">..</span></tt>.
While this feature is highlighted as part of 0.9 it is also
backported to 0.8.3.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#feature-722"><em>INSERT from SELECT</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-13e79ff2064616ed83c6e394ab472ee5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/722">#722</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-50"><span class="target" id="change-3300a90d71384cf7c366f03b14fa1351"><strong>[sql] [feature] </strong></span>Provided a new attribute for <a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><tt class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></tt></a>
called <a class="reference internal" href="../core/types.html#sqlalchemy.types.TypeDecorator.coerce_to_is_types" title="sqlalchemy.types.TypeDecorator.coerce_to_is_types"><tt class="xref py py-attr docutils literal"><span class="pre">TypeDecorator.coerce_to_is_types</span></tt></a>,
to make it easier to control how comparisons using
<tt class="docutils literal"><span class="pre">==</span></tt> or <tt class="docutils literal"><span class="pre">!=</span></tt> to <tt class="docutils literal"><span class="pre">None</span></tt> and boolean types goes
about producing an <tt class="docutils literal"><span class="pre">IS</span></tt> expression, or a plain
equality expression with a bound parameter.<a class="changeset-link headerlink reference internal" href="#change-3300a90d71384cf7c366f03b14fa1351">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2734">#2734</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2744">#2744</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-51"><span class="target" id="change-e50ad7b22d3a616aeb47cf832c27097a"><strong>[sql] [feature] </strong></span>A <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.label" title="sqlalchemy.sql.expression.label"><tt class="xref py py-func docutils literal"><span class="pre">label()</span></tt></a> construct will now render as its name alone
in an <tt class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></tt> clause, if that label is also referred to
in the columns clause of the select, instead of rewriting the
full expression.  This gives the database a better chance to
optimize the evaulation of the same expression in two different
contexts.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-1068"><em>Label constructs can now render as their name alone in an ORDER BY</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-e50ad7b22d3a616aeb47cf832c27097a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">#1068</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-52"><span class="target" id="change-4a3641b48480cf313538449a8e5b1c5f"><strong>[sql] [bug] </strong></span>Fixed bug where <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><tt class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></tt></a> would not interpret ORM
elements with a <tt class="docutils literal"><span class="pre">__clause_element__()</span></tt> method properly.<a class="changeset-link headerlink reference internal" href="#change-4a3641b48480cf313538449a8e5b1c5f">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2849">#2849</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-53"><span class="target" id="change-a5059e2a0d6f7ae306b16d71a6884f3f"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="../core/types.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><tt class="xref py py-class docutils literal"><span class="pre">Enum</span></tt></a> and <a class="reference internal" href="../core/types.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><tt class="xref py py-class docutils literal"><span class="pre">Boolean</span></tt></a> types now bypass
any custom (e.g. TypeDecorator) type in use when producing the
CHECK constraint for the &#8220;non native&#8221; type.  This so that the custom type
isn&#8217;t involved in the expression within the CHECK, since this
expression is against the &#8220;impl&#8221; value and not the &#8220;decorated&#8221; value.<a class="changeset-link headerlink reference internal" href="#change-a5059e2a0d6f7ae306b16d71a6884f3f">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2842">#2842</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-54"><span class="target" id="change-2d486e59e387ed6c8d50bf5d99627cdf"><strong>[sql] [bug] </strong></span>The <tt class="docutils literal"><span class="pre">.unique</span></tt> flag on <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> could be produced as <tt class="docutils literal"><span class="pre">None</span></tt>
if it was generated from a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> that didn&#8217;t specify <tt class="docutils literal"><span class="pre">unique</span></tt>
(where it defaults to <tt class="docutils literal"><span class="pre">None</span></tt>).  The flag will now always be <tt class="docutils literal"><span class="pre">True</span></tt> or
<tt class="docutils literal"><span class="pre">False</span></tt>.<a class="changeset-link headerlink reference internal" href="#change-2d486e59e387ed6c8d50bf5d99627cdf">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2825">#2825</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-55"><span class="target" id="change-6f6cd0ca9e6e5050ad6d52b884122ea9"><strong>[sql] [bug] </strong></span>Fixed bug in default compiler plus those of postgresql, mysql, and
mssql to ensure that any literal SQL expression values are
rendered directly as literals, instead of as bound parameters,
within a CREATE INDEX statement.  This also changes the rendering
scheme for other DDL such as constraints.<a class="changeset-link headerlink reference internal" href="#change-6f6cd0ca9e6e5050ad6d52b884122ea9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2742">#2742</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-56"><span class="target" id="change-0e498b684ea9cbcfc3f277d61204d65b"><strong>[sql] [bug] </strong></span>A <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a> that is made to refer to itself in its FROM clause,
typically via in-place mutation, will raise an informative error
message rather than causing a recursion overflow.<a class="changeset-link headerlink reference internal" href="#change-0e498b684ea9cbcfc3f277d61204d65b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2815">#2815</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-57"><span class="target" id="change-6e1a5094981c35f027081bae82ca704a"><strong>[sql] [bug] </strong></span>Fixed bug where using the <tt class="docutils literal"><span class="pre">column_reflect</span></tt> event to change the <tt class="docutils literal"><span class="pre">.key</span></tt>
of the incoming <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> would prevent primary key constraints,
indexes, and foreign key constraints from being correctly reflected.<a class="changeset-link headerlink reference internal" href="#change-6e1a5094981c35f027081bae82ca704a">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2811">#2811</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-58"><span class="target" id="change-d12e927d520f09485a8678152c280b4e"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.notin_" title="sqlalchemy.sql.operators.ColumnOperators.notin_"><tt class="xref py py-meth docutils literal"><span class="pre">ColumnOperators.notin_()</span></tt></a> operator added in 0.8 now properly
produces the negation of the expression &#8220;IN&#8221; returns
when used against an empty collection.<a class="changeset-link headerlink reference internal" href="#change-d12e927d520f09485a8678152c280b4e">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-59"><span class="target" id="change-2c8dbe177a3c8cba08249e3cdeca2362"><strong>[sql] [bug] [postgresql] </strong></span>Fixed bug where the expression system relied upon the <tt class="docutils literal"><span class="pre">str()</span></tt>
form of a some expressions when referring to the <tt class="docutils literal"><span class="pre">.c</span></tt> collection
on a <tt class="docutils literal"><span class="pre">select()</span></tt> construct, but the <tt class="docutils literal"><span class="pre">str()</span></tt> form isn&#8217;t available
since the element relies on dialect-specific compilation constructs,
notably the <tt class="docutils literal"><span class="pre">__getitem__()</span></tt> operator as used with a Postgresql
<tt class="docutils literal"><span class="pre">ARRAY</span></tt> element.  The fix also adds a new exception class
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.UnsupportedCompilationError" title="sqlalchemy.exc.UnsupportedCompilationError"><tt class="xref py py-exc docutils literal"><span class="pre">UnsupportedCompilationError</span></tt></a> which is raised in those cases
where a compiler is asked to compile something it doesn&#8217;t know
how to.<a class="changeset-link headerlink reference internal" href="#change-2c8dbe177a3c8cba08249e3cdeca2362">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2780">#2780</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-60"><span class="target" id="change-ec66deaad21dd8b26baa4f0b315154b4"><strong>[sql] [bug] </strong></span>Multiple fixes to the correlation behavior of
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt></a> constructs, first introduced in 0.8.0:<ul>
<li>To satisfy the use case where FROM entries should be
correlated outwards to a SELECT that encloses another,
which then encloses this one, correlation now works
across multiple levels when explicit correlation is
established via <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.correlate" title="sqlalchemy.sql.expression.Select.correlate"><tt class="xref py py-meth docutils literal"><span class="pre">Select.correlate()</span></tt></a>, provided
that the target select is somewhere along the chain
contained by a WHERE/ORDER BY/columns clause, not
just nested FROM clauses. This makes
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.correlate" title="sqlalchemy.sql.expression.Select.correlate"><tt class="xref py py-meth docutils literal"><span class="pre">Select.correlate()</span></tt></a> act more compatibly to
that of 0.7 again while still maintaining the new
&#8220;smart&#8221; correlation.</li>
<li>When explicit correlation is not used, the usual
&#8220;implicit&#8221; correlation limits its behavior to just
the immediate enclosing SELECT, to maximize compatibility
with 0.7 applications, and also prevents correlation
across nested FROMs in this case, maintaining compatibility
with 0.8.0/0.8.1.</li>
<li>The <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.correlate_except" title="sqlalchemy.sql.expression.Select.correlate_except"><tt class="xref py py-meth docutils literal"><span class="pre">Select.correlate_except()</span></tt></a> method was not
preventing the given FROM clauses from correlation in
all cases, and also would cause FROM clauses to be incorrectly
omitted entirely (more like what 0.7 would do),
this has been fixed.</li>
<li>Calling <cite>select.correlate_except(None)</cite> will enter
all FROM clauses into correlation as would be expected.</li>
</ul>
<a class="changeset-link headerlink reference internal" href="#change-ec66deaad21dd8b26baa4f0b315154b4">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2668">#2668</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2746">#2746</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-61"><span class="target" id="change-69bb8fab2a49ae9f49bba3d45913e256"><strong>[sql] [bug] </strong></span>Fixed bug whereby joining a select() of a table &#8220;A&#8221; with multiple
foreign key paths to a table &#8220;B&#8221;, to that table &#8220;B&#8221;, would fail
to produce the &#8220;ambiguous join condition&#8221; error that would be
reported if you join table &#8220;A&#8221; directly to &#8220;B&#8221;; it would instead
produce a join condition with multiple criteria.<a class="changeset-link headerlink reference internal" href="#change-69bb8fab2a49ae9f49bba3d45913e256">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2738">#2738</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-62"><span class="target" id="change-875b41219bbc43340ccf3d1e7d1f5fbf"><strong>[sql] [bug] [reflection] </strong></span>Fixed bug whereby using <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><tt class="xref py py-meth docutils literal"><span class="pre">MetaData.reflect()</span></tt></a> across a remote
schema as well as a local schema could produce wrong results
in the case where both schemas had a table of the same name.<a class="changeset-link headerlink reference internal" href="#change-875b41219bbc43340ccf3d1e7d1f5fbf">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2728">#2728</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-63"><span class="target" id="change-413cb4c102d2705b115721cf5917ed43"><strong>[sql] [bug] </strong></span>Removed the &#8220;not implemented&#8221; <tt class="docutils literal"><span class="pre">__iter__()</span></tt> call from the base
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators" title="sqlalchemy.sql.operators.ColumnOperators"><tt class="xref py py-class docutils literal"><span class="pre">ColumnOperators</span></tt></a> class, while this was introduced
in 0.8.0 to prevent an endless, memory-growing loop when one also
implements a <tt class="docutils literal"><span class="pre">__getitem__()</span></tt> method on a custom
operator and then calls erroneously <tt class="docutils literal"><span class="pre">list()</span></tt> on that object,
it had the effect of causing column elements to report that they
were in fact iterable types which then throw an error when you try
to iterate.   There&#8217;s no real way to have both sides here so we
stick with Python best practices.  Careful with implementing
<tt class="docutils literal"><span class="pre">__getitem__()</span></tt> on your custom operators!<a class="changeset-link headerlink reference internal" href="#change-413cb4c102d2705b115721cf5917ed43">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2726">#2726</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-64"><span class="target" id="change-97b9ec01528f6ce1a103f8b8800d8b35"><strong>[sql] [bug] </strong></span>Fixed regression dating back to 0.7.9 whereby the name of a CTE might
not be properly quoted if it was referred to in multiple FROM clauses.<a class="changeset-link headerlink reference internal" href="#change-97b9ec01528f6ce1a103f8b8800d8b35">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2801">#2801</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-65"><span class="target" id="change-0b6b7933cd03daaa51c88661f6a18a77"><strong>[sql] [bug] [cte] </strong></span>Fixed bug in common table expression system where if the CTE were
used only as an <tt class="docutils literal"><span class="pre">alias()</span></tt> construct, it would not render using the
WITH keyword.<a class="changeset-link headerlink reference internal" href="#change-0b6b7933cd03daaa51c88661f6a18a77">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2783">#2783</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-66"><span class="target" id="change-ee864489da68afbc90051f4bb9d0f94c"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><tt class="xref py py-class docutils literal"><span class="pre">CheckConstraint</span></tt></a> DDL where the &#8220;quote&#8221; flag from a
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> object would not be propagated.<a class="changeset-link headerlink reference internal" href="#change-ee864489da68afbc90051f4bb9d0f94c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2784">#2784</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-67"><span class="target" id="change-68ca19e2d66effbff44cb5a9c9633d5f"><strong>[sql] [bug] </strong></span>The &#8220;name&#8221; attribute is set on <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> before the &#8220;attach&#8221;
events are called, so that attachment events can be used to dynamically
generate a name for the index based on the parent table and/or
columns.<a class="changeset-link headerlink reference internal" href="#change-68ca19e2d66effbff44cb5a9c9633d5f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2835">#2835</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-68"><span class="target" id="change-f9093cc2030bb467e2b99b6844eee451"><strong>[sql] [bug] </strong></span>The erroneous kw arg &#8220;schema&#8221; has been removed from the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>
object. this was an accidental commit that did nothing; a warning is raised
in 0.8.3 when this kw arg is used.<a class="changeset-link headerlink reference internal" href="#change-f9093cc2030bb467e2b99b6844eee451">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2831">#2831</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-69"><span class="target" id="change-80f90191c40a63606c13f48bd62758c9"><strong>[sql] [bug] </strong></span>A rework to the way that &#8220;quoted&#8221; identifiers are handled, in that
instead of relying upon various <tt class="docutils literal"><span class="pre">quote=True</span></tt> flags being passed around,
these flags are converted into rich string objects with quoting information
included at the point at which they are passed to common schema constructs
like <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt></a>, <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a>, etc.   This solves the issue
of various methods that don&#8217;t correctly honor the &#8220;quote&#8221; flag such
as <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine.has_table" title="sqlalchemy.engine.Engine.has_table"><tt class="xref py py-meth docutils literal"><span class="pre">Engine.has_table()</span></tt></a> and related methods.  The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.elements.quoted_name" title="sqlalchemy.sql.elements.quoted_name"><tt class="xref py py-class docutils literal"><span class="pre">quoted_name</span></tt></a>
object is a string subclass that can also be used explicitly if needed;
the object will hold onto the quoting preferences passed and will
also bypass the &#8220;name normalization&#8221; performed by dialects that
standardize on uppercase symbols, such as Oracle, Firebird and DB2.
The upshot is that the &#8220;uppercase&#8221; backends can now work with force-quoted
names, such as lowercase-quoted names and new reserved words.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#change-2812"><em>Schema identifiers now carry along their own quoting information</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-80f90191c40a63606c13f48bd62758c9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2812">#2812</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-70"><span class="target" id="change-6116437230b6aca55206409a957f932e"><strong>[sql] [bug] </strong></span>The resolution of <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> objects to their
target <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> has been reworked to be as
immediate as possible, based on the moment that the
target <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> is associated with the same
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt></a> as this <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>, rather
than waiting for the first time a join is constructed,
or similar. This along with other improvements allows
earlier detection of some foreign key configuration
issues.  Also included here is a rework of the
type-propagation system, so that
it should be reliable now to set the type as <tt class="docutils literal"><span class="pre">None</span></tt>
on any <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a> that refers to another via
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> - the type will be copied from the
target column as soon as that other column is associated,
and now works for composite foreign keys as well.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_09.html#migration-1765"><em>Columns can reliably get their type from a column referred to via ForeignKey</em></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-6116437230b6aca55206409a957f932e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1765">#1765</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.0b1-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-71"><span class="target" id="change-d1e23a832aab5d9d980590ac352028c9"><strong>[postgresql] [feature] </strong></span>Support for Postgresql 9.2 range types has been added.
Currently, no type translation is provided, so works
directly with strings or psycopg2 2.5 range extension types
at the moment.  Patch courtesy Chris Withers.<a class="changeset-link headerlink reference internal" href="#change-d1e23a832aab5d9d980590ac352028c9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-72"><span class="target" id="change-0c25a8156ec52fca32278f7939a5ec93"><strong>[postgresql] [feature] </strong></span>Added support for &#8220;AUTOCOMMIT&#8221; isolation when using the psycopg2
DBAPI.   The keyword is available via the <tt class="docutils literal"><span class="pre">isolation_level</span></tt>
execution option.  Patch courtesy Roman Podolyaka.<a class="changeset-link headerlink reference internal" href="#change-0c25a8156ec52fca32278f7939a5ec93">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2072">#2072</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-73"><span class="target" id="change-e0e1515141ca0c31a3932b72465f0701"><strong>[postgresql] [feature] </strong></span>Added support for rendering <tt class="docutils literal"><span class="pre">SMALLSERIAL</span></tt> when a <a class="reference internal" href="../core/types.html#sqlalchemy.types.SmallInteger" title="sqlalchemy.types.SmallInteger"><tt class="xref py py-class docutils literal"><span class="pre">SmallInteger</span></tt></a>
type is used on a primary key autoincrement column, based on server
version detection of Postgresql version 9.2 or greater.<a class="changeset-link headerlink reference internal" href="#change-e0e1515141ca0c31a3932b72465f0701">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2840">#2840</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-74"><span class="target" id="change-c7b42a13889c2700394a72cd53fdf578"><strong>[postgresql] [bug] </strong></span>Removed a 128-character truncation from the reflection of the
server default for a column; this code was original from
PG system views which truncated the string for readability.<a class="changeset-link headerlink reference internal" href="#change-c7b42a13889c2700394a72cd53fdf578">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2844">#2844</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-75"><span class="target" id="change-90c077a62f3393fc602fa4e68ef713bd"><strong>[postgresql] [bug] </strong></span>Parenthesis will be applied to a compound SQL expression as
rendered in the column list of a CREATE INDEX statement.<a class="changeset-link headerlink reference internal" href="#change-90c077a62f3393fc602fa4e68ef713bd">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2742">#2742</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-76"><span class="target" id="change-7a2ed752121c34c9b56e49bf4745e646"><strong>[postgresql] [bug] </strong></span>Fixed bug where Postgresql version strings that had a prefix preceding
the words &#8220;Postgresql&#8221; or &#8220;EnterpriseDB&#8221; would not parse.
Courtesy Scott Schaefer.<a class="changeset-link headerlink reference internal" href="#change-7a2ed752121c34c9b56e49bf4745e646">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2819">#2819</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-77"><span class="target" id="change-bf3ab2871c03846506f101f9e3b03dca"><strong>[postgresql] [bug] </strong></span>The behavior of <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.extract" title="sqlalchemy.sql.expression.extract"><tt class="xref py py-func docutils literal"><span class="pre">extract()</span></tt></a> has been simplified on the
Postgresql dialect to no longer inject a hardcoded <tt class="docutils literal"><span class="pre">::timestamp</span></tt>
or similar cast into the given expression, as this interfered
with types such as timezone-aware datetimes, but also
does not appear to be at all necessary with modern versions
of psycopg2.<a class="changeset-link headerlink reference internal" href="#change-bf3ab2871c03846506f101f9e3b03dca">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2740">#2740</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-78"><span class="target" id="change-a284671030fa2fb228bace39dcecba09"><strong>[postgresql] [bug] </strong></span>Fixed bug in HSTORE type where keys/values that contained
backslashed quotes would not be escaped correctly when
using the &#8220;non native&#8221; (i.e. non-psycopg2) means
of translating HSTORE data.  Patch courtesy Ryan Kelly.<a class="changeset-link headerlink reference internal" href="#change-a284671030fa2fb228bace39dcecba09">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2766">#2766</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-79"><span class="target" id="change-fd3a75fa26f5e1303ec1daf1ede035e9"><strong>[postgresql] [bug] </strong></span>Fixed bug where the order of columns in a multi-column
Postgresql index would be reflected in the wrong order.
Courtesy Roman Podolyaka.<a class="changeset-link headerlink reference internal" href="#change-fd3a75fa26f5e1303ec1daf1ede035e9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2767">#2767</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.0b1-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-80"><span class="target" id="change-d0a8eb2d08437d50b589f473fab54468"><strong>[mysql] [feature] </strong></span>The <tt class="docutils literal"><span class="pre">mysql_length</span></tt> parameter used with <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> can now
be passed as a dictionary of column names/lengths, for use
with composite indexes.  Big thanks to Roman Podolyaka for the
patch.<a class="changeset-link headerlink reference internal" href="#change-d0a8eb2d08437d50b589f473fab54468">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2704">#2704</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-81"><span class="target" id="change-8d6f26937d8905e155c0deb811a65b8c"><strong>[mysql] [feature] </strong></span>The MySQL <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.SET" title="sqlalchemy.dialects.mysql.SET"><tt class="xref py py-class docutils literal"><span class="pre">mysql.SET</span></tt></a> type now features the same auto-quoting
behavior as that of <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.ENUM" title="sqlalchemy.dialects.mysql.ENUM"><tt class="xref py py-class docutils literal"><span class="pre">mysql.ENUM</span></tt></a>.  Quotes are not required when
setting up the value, but quotes that are present will be auto-detected
along with a warning.  This also helps with Alembic where
the SET type doesn&#8217;t render with quotes.<a class="changeset-link headerlink reference internal" href="#change-8d6f26937d8905e155c0deb811a65b8c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2817">#2817</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-82"><span class="target" id="change-e43926dc67636d3ba7e0744c194355b2"><strong>[mysql] [bug] </strong></span>The change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2721">#2721</a>, which is that the <tt class="docutils literal"><span class="pre">deferrable</span></tt> keyword
of <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt></a> is silently ignored on the MySQL
backend, will be reverted as of 0.9; this keyword will now render again, raising
errors on MySQL as it is not understood - the same behavior will also
apply to the <tt class="docutils literal"><span class="pre">initially</span></tt> keyword.  In 0.8, the keywords will remain
ignored but a warning is emitted.   Additionally, the <tt class="docutils literal"><span class="pre">match</span></tt> keyword
now raises a <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.CompileError" title="sqlalchemy.exc.CompileError"><tt class="xref py py-exc docutils literal"><span class="pre">CompileError</span></tt></a> on 0.9 and emits a warning on 0.8;
this keyword is not only silently ignored by MySQL but also breaks
the ON UPDATE/ON DELETE options.<p>To use a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt></a>
that does not render or renders differently on MySQL, use a custom
compilation option.  An example of this usage has been added to the
documentation, see <a class="reference internal" href="../dialects/mysql.html#mysql-foreign-keys"><em>MySQL Foreign Keys</em></a>.</p>
<a class="changeset-link headerlink reference internal" href="#change-e43926dc67636d3ba7e0744c194355b2">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2721">#2721</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2839">#2839</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-83"><span class="target" id="change-2a6ed47e91f911c2105ce955afc32748"><strong>[mysql] [bug] </strong></span>MySQL-connector dialect now allows options in the create_engine
query string to override those defaults set up in the connect,
including &#8220;buffered&#8221; and &#8220;raise_on_warnings&#8221;.<a class="changeset-link headerlink reference internal" href="#change-2a6ed47e91f911c2105ce955afc32748">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2515">#2515</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-84"><span class="target" id="change-132183eb674d003b5472f2173789f67e"><strong>[mysql] [bug] </strong></span>Fixed bug when using multi-table UPDATE where a supplemental
table is a SELECT with its own bound parameters, where the positioning
of the bound parameters would be reversed versus the statement
itself when using MySQL&#8217;s special syntax.<a class="changeset-link headerlink reference internal" href="#change-132183eb674d003b5472f2173789f67e">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2768">#2768</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-85"><span class="target" id="change-b93865e4329f3662cd5b2933bf555218"><strong>[mysql] [bug] </strong></span>Added another conditional to the <tt class="docutils literal"><span class="pre">mysql+gaerdbms</span></tt> dialect to
detect so-called &#8220;development&#8221; mode, where we should use the
<tt class="docutils literal"><span class="pre">rdbms_mysqldb</span></tt> DBAPI.  Patch courtesy Brett Slatkin.<a class="changeset-link headerlink reference internal" href="#change-b93865e4329f3662cd5b2933bf555218">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2715">#2715</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-86"><span class="target" id="change-43e1dfe4d4c7f5082a4ca7f2271b21b0"><strong>[mysql] [bug] </strong></span>The <tt class="docutils literal"><span class="pre">deferrable</span></tt> keyword argument on <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> and
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt></a> will not render the <tt class="docutils literal"><span class="pre">DEFERRABLE</span></tt> keyword
on the MySQL dialect.  For a long time we left this in place because
a non-deferrable foreign key would act very differently than a deferrable
one, but some environments just disable FKs on MySQL, so we&#8217;ll be less
opinionated here.<a class="changeset-link headerlink reference internal" href="#change-43e1dfe4d4c7f5082a4ca7f2271b21b0">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2721">#2721</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-87"><span class="target" id="change-8770e442e32764b20ee2132358bc9d6d"><strong>[mysql] [bug] </strong></span>Updates to MySQL reserved words for versions 5.5, 5.6, courtesy
Hanno Schlichting.<a class="changeset-link headerlink reference internal" href="#change-8770e442e32764b20ee2132358bc9d6d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2791">#2791</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-88"><span class="target" id="change-1fad8db7eac7a5daf1d143084dbc55af"><strong>[mysql] [bug] </strong></span>Fix and test parsing of MySQL foreign key options within reflection;
this complements the work in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2183">#2183</a> where we begin to support
reflection of foreign key options such as ON UPDATE/ON DELETE
cascade.<a class="changeset-link headerlink reference internal" href="#change-1fad8db7eac7a5daf1d143084dbc55af">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2839">#2839</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-89"><span class="target" id="change-e98fa083392ee258da3be2f4cc463340"><strong>[mysql] [bug] </strong></span>Improved support for the cymysql driver, supporting version 0.6.5,
courtesy Hajime Nakagami.<a class="changeset-link headerlink reference internal" href="#change-e98fa083392ee258da3be2f4cc463340">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.0b1-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-90"><span class="target" id="change-e196956853a1c770ffc96aa3ebdb0027"><strong>[sqlite] [bug] </strong></span>The newly added SQLite DATETIME arguments storage_format and
regexp apparently were not fully implemented correctly; while the
arguments were accepted, in practice they would have no effect;
this has been fixed.<a class="changeset-link headerlink reference internal" href="#change-e196956853a1c770ffc96aa3ebdb0027">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2781">#2781</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-91"><span class="target" id="change-ed8a730c977ad5352148eb228c2b3a31"><strong>[sqlite] [bug] </strong></span>Added <a class="reference internal" href="../core/types.html#sqlalchemy.types.BIGINT" title="sqlalchemy.types.BIGINT"><tt class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.BIGINT</span></tt></a> to the list of type names that can be
reflected by the SQLite dialect; courtesy Russell Stuart.<a class="changeset-link headerlink reference internal" href="#change-ed8a730c977ad5352148eb228c2b3a31">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2764">#2764</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.0b1-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-92"><span class="target" id="change-02967c3908e9232b5bde5a7b76c9cd7b"><strong>[mssql] [bug] </strong></span>When querying the information schema on SQL Server 2000, removed
a CAST call that was added in 0.8.1 to help with driver issues,
which apparently is not compatible on 2000.
The CAST remains in place for SQL Server 2005 and greater.<a class="changeset-link headerlink reference internal" href="#change-02967c3908e9232b5bde5a7b76c9cd7b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2747">#2747</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-93"><span class="target" id="change-bea87c5d2f97257ad289ce3893861719"><strong>[mssql] [bug] [pyodbc] </strong></span>Fixes to MSSQL with Python 3 + pyodbc, including that statements
are passed correctly.<a class="changeset-link headerlink reference internal" href="#change-bea87c5d2f97257ad289ce3893861719">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2355">#2355</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.0b1-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-94"><span class="target" id="change-d164453835dc47719c20c02f5a49d116"><strong>[oracle] [feature] [py3k] </strong></span>The Oracle unit tests with cx_oracle now pass
fully under Python 3.<a class="changeset-link headerlink reference internal" href="#change-d164453835dc47719c20c02f5a49d116">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0b1-95"><span class="target" id="change-7db6754b84c59e26d48cb6796899ee20"><strong>[oracle] [bug] </strong></span>Fixed bug where Oracle table reflection using synonyms would fail
if the synonym and the table were in different remote schemas.
Patch to fix courtesy Kyle Derr.<a class="changeset-link headerlink reference internal" href="#change-7db6754b84c59e26d48cb6796899ee20">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2853">#2853</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-firebird">
<h3>firebird<a class="headerlink" href="#change-0.9.0b1-firebird" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-96"><span class="target" id="change-9175f0322dec423ed80f93115ad65aae"><strong>[firebird] [feature] </strong></span>Added new flag <tt class="docutils literal"><span class="pre">retaining=True</span></tt> to the kinterbasdb and fdb dialects.
This controls the value of the <tt class="docutils literal"><span class="pre">retaining</span></tt> flag sent to the
<tt class="docutils literal"><span class="pre">commit()</span></tt> and <tt class="docutils literal"><span class="pre">rollback()</span></tt> methods of the DBAPI connection.
Due to historical concerns, this flag defaults to <tt class="docutils literal"><span class="pre">True</span></tt> in 0.8.2,
however in 0.9.0b1 this flag defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.<a class="changeset-link headerlink reference internal" href="#change-9175f0322dec423ed80f93115ad65aae">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2763">#2763</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-97"><span class="target" id="change-76539a1da5603da953dbce6672c8e461"><strong>[firebird] [feature] </strong></span>The <tt class="docutils literal"><span class="pre">fdb</span></tt> dialect is now the default dialect when
specified without a dialect qualifier, i.e. <tt class="docutils literal"><span class="pre">firebird://</span></tt>,
per the Firebird project publishing <tt class="docutils literal"><span class="pre">fdb</span></tt> as their
official Python driver.<a class="changeset-link headerlink reference internal" href="#change-76539a1da5603da953dbce6672c8e461">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2504">#2504</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-98"><span class="target" id="change-11863f3c419f255126f23bd31f39c054"><strong>[firebird] [bug] </strong></span>Type lookup when reflecting the Firebird types LONG and
INT64 has been fixed so that LONG is treated as INTEGER,
INT64 treated as BIGINT, unless the type has a &#8220;precision&#8221;
in which case it&#8217;s treated as NUMERIC.  Patch courtesy
Russell Stuart.<a class="changeset-link headerlink reference internal" href="#change-11863f3c419f255126f23bd31f39c054">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2757">#2757</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-misc">
<h3>misc<a class="headerlink" href="#change-0.9.0b1-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-99"><span class="target" id="change-4376b4db83754e008ed7559a50c2b16c"><strong>[feature] </strong></span>Added a new flag <tt class="docutils literal"><span class="pre">system=True</span></tt> to <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt></a>, which marks
the column as a &#8220;system&#8221; column which is automatically made present
by the database (such as Postgresql <tt class="docutils literal"><span class="pre">oid</span></tt> or <tt class="docutils literal"><span class="pre">xmin</span></tt>).  The
column will be omitted from the <tt class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TABLE</span></tt> statement but will
otherwise be available for querying.   In addition, the
<a class="reference internal" href="../core/ddl.html#sqlalchemy.schema.CreateColumn" title="sqlalchemy.schema.CreateColumn"><tt class="xref py py-class docutils literal"><span class="pre">CreateColumn</span></tt></a> construct can be appled to a custom
compilation rule which allows skipping of columns, by producing
a rule that returns <tt class="docutils literal"><span class="pre">None</span></tt>.<a class="changeset-link headerlink reference internal" href="#change-4376b4db83754e008ed7559a50c2b16c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-100"><span class="target" id="change-d810542c0eef5129e99e0dea72af3bb9"><strong>[feature] [examples] </strong></span>Improved the examples in <tt class="docutils literal"><span class="pre">examples/generic_associations</span></tt>, including
that <tt class="docutils literal"><span class="pre">discriminator_on_association.py</span></tt> makes use of single table
inheritance do the work with the &#8220;discriminator&#8221;.  Also
added a true &#8220;generic foreign key&#8221; example, which works similarly
to other popular frameworks in that it uses an open-ended integer
to point to any other table, foregoing traditional referential
integrity.  While we don&#8217;t recommend this pattern, information wants
to be free.<a class="changeset-link headerlink reference internal" href="#change-d810542c0eef5129e99e0dea72af3bb9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-101"><span class="target" id="change-c6ae54dff0bc9fddf9cbe1f7a37fcd59"><strong>[feature] [core] </strong></span>Added a new variant to <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><tt class="xref py py-meth docutils literal"><span class="pre">UpdateBase.returning()</span></tt></a> called
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><tt class="xref py py-meth docutils literal"><span class="pre">ValuesBase.return_defaults()</span></tt></a>; this allows arbitrary columns
to be added to the RETURNING clause of the statement without interfering
with the compilers usual &#8220;implicit returning&#8221; feature, which is used to
efficiently fetch newly generated primary key values.  For supporting
backends, a dictionary of all fetched values is present at
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.ResultProxy.returned_defaults" title="sqlalchemy.engine.ResultProxy.returned_defaults"><tt class="xref py py-attr docutils literal"><span class="pre">ResultProxy.returned_defaults</span></tt></a>.<a class="changeset-link headerlink reference internal" href="#change-c6ae54dff0bc9fddf9cbe1f7a37fcd59">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2793">#2793</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-102"><span class="target" id="change-026a7898970464580f20e377c6428616"><strong>[feature] [pool] </strong></span>Added pool logging for &#8220;rollback-on-return&#8221; and the less used
&#8220;commit-on-return&#8221;.  This is enabled with the rest of pool
&#8220;debug&#8221; logging.<a class="changeset-link headerlink reference internal" href="#change-026a7898970464580f20e377c6428616">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2752">#2752</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-103"><span class="target" id="change-95b0a27ef450ed818ac940e3ded22313"><strong>[bug] [examples] </strong></span>Added &#8220;autoincrement=False&#8221; to the history table created in the
versioning example, as this table shouldn&#8217;t have autoinc on it
in any case, courtesy Patrick Schmid.<a class="changeset-link headerlink reference internal" href="#change-95b0a27ef450ed818ac940e3ded22313">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-104"><span class="target" id="change-de133057736a5ba4eb2f13b2226d6189"><strong>[bug] [ext] </strong></span>Fixed bug whereby if a composite type were set up
with a function instead of a class, the mutable extension
would trip up when it tried to check that column
for being a <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableComposite" title="sqlalchemy.ext.mutable.MutableComposite"><tt class="xref py py-class docutils literal"><span class="pre">MutableComposite</span></tt></a> (which it isn&#8217;t).
Courtesy asldevi.<a class="changeset-link headerlink reference internal" href="#change-de133057736a5ba4eb2f13b2226d6189">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-105"><span class="target" id="change-b0dcd18db52ac8a72250f771c09f4c4f"><strong>[bug] [examples] </strong></span>Fixed an issue with the &#8220;versioning&#8221; recipe whereby a many-to-one
reference could produce a meaningless version for the target,
even though it was not changed, when backrefs were present.
Patch courtesy Matt Chisholm.<a class="changeset-link headerlink reference internal" href="#change-b0dcd18db52ac8a72250f771c09f4c4f">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-106"><span class="target" id="change-47f2cda56e1d7a6b9dffa4b1b316855a"><strong>[requirements] </strong></span>The Python <a class="reference external" href="https://pypi.python.org/pypi/mock">mock</a> library
is now required in order to run the unit test suite.  While part
of the standard library as of Python 3.3, previous Python installations
will need to install this in order to run unit tests or to
use the <tt class="docutils literal"><span class="pre">sqlalchemy.testing</span></tt> package for external dialects.<a class="changeset-link headerlink reference internal" href="#change-47f2cda56e1d7a6b9dffa4b1b316855a">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p></p>
</p>
</li>
</ul>
</div>
</div>
</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links">
        Previous:
        <a href="migration_09.html" title="previous chapter">What&#8217;s New in SQLAlchemy 0.9?</a>
        Next:
        <a href="changelog_08.html" title="next chapter">0.8 Changelog</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2014, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b1.
    </div>
</div>

</div>

        
    </body>
</html>


